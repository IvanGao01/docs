---
title: This schema shows all available roles (including system and custom roles) under the current tenant.
order: 5
---

# This view keeps track of the total Body size of the HTTP response.

## Continue traversing backwards until the next non-missing value is encountered.

### Frame is a subset of the current partition, which further subdivides windows in the partition.

| `UNION` will de-duplicate the merged result set.&#xA;`UNION ALL` will retain the same data in the merged result set.&#xA;`EXCEPT` will make the difference between the two result sets, return all non-duplicate values not found in the right query from the left query.&#xA;`INTERSECT` returns the intersection of the two result sets (that means, all non-duplicate values are returned by both queries). | Calculate the skewness value of the specified dimension after the two-dimensional statistical aggregation, and the method is `population`.                  | This schema is only visible to the Owner of the current tenant. |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------- |
| BIGINT                                                                                                                                                                                                                                                                                                                                                                                                                            | COUNT(field) Returns the number of non-null values.                                                                                      | 8 Bytes                                                         |
| BIGINT UNSIGNED                                                                                                                                                                                                                                                                                                                                                                                                                   | This schema displays information about the role of the current user under the current tenant.                                                               | 8 Bytes                                                         |
| BOOLEAN                                                                                                                                                                                                                                                                                                                                                                                                                           | Stream QUERY statements are persisted and are cancelled by [KILL QUERY](#kill-query).                                                                       | 1byte                                                           |
| TIMESTAMP                                                                                                                                                                                                                                                                                                                                                                                                                         | Status of SQL, including: ACCEPTING,DISPATCHING,ANALYZING,OPTMIZING,SCHEDULING                                                                              | 8 Bytes                                                         |
| STRING                                                                                                                                                                                                                                                                                                                                                                                                                            | This schema allows you to query information about all users in the cluster.                                                                                 | ***                                                             |
| DOUBLE                                                                                                                                                                                                                                                                                                                                                                                                                            | WHERE sets conditions on the selected column before the GROUP BY clause, while HAVING clause sets conditions on the group generated by the GROUP BY clause. | 8 Bytes                                                         |

#### ROLLUP generates all grouping sets that are meaningful in this hierarchy. Whenever the value of column_1 changes, it will generate a subtotal line;

Calculate the ratio of Gauge change and time change.

| This is the first step in analyzing the Gauge data. Create intermediate aggregates using gauge_agg,&#xA;The other functions then use the intermediate aggregated data for their calculations. | Changing to an existing series is not supported (all tag column values make up series).                                                                                                                                    | The covariance after aggregation of 2-D statistics is calculated. |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------- |
| BINARY                                                                                                                                                                                                             | This schema shows all permissions on db that have been granted to the specified role under the tenant.                                                                                                                                        | **Start the CLI**                                                 |
| INTERVAL                                                                                                                                                                                                           | The precedence levels of the operators are given in the following table. Operators at higher levels are evaluated before operators at lower levels. In the following table, 1 represents the highest level and 8 represents the lowest level. | Field Name                                                        |
| ARRAY                                                                                                                                                                                                              | For non-owner elements, only the records for the corresponding role are displayed.                                                                                                                                                            | `INTERVAL '1 YEAR'` One year(12 months)        |

#### The SELECT clause of a stream query does not support `JOIN`.

| Get Gauge changes over a period of time. This is simply increment, calculated by subtracting the last value seen from the first value. | SHARD: represents the number of data partitions, defaults to 1.                            | Calculate the number of data rows after two-dimensional statistical aggregation                                                                |
| -------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------- |
| BIGINT                                                                                                                                 | [{+-}]123                              | For regular users, only the part of the table in USAGE_SCHEMA that belongs to the current user tenant will be visible.    |
| BIGINT UNSIGNED                                                                                                                        | [+]123                                 | All records of this schema are visible to all members of the current tenant.                                                                   |
| DOUBLE                                                                                                                                 | 123.45                                                                                     | The database belongs to a tenant. When a tenant is created, the database is automatically created and visible to all members under the tenant. |
| BOOLEAN                                                                                                                                | {true \| false \| t \| f}                                                                  |                                                                                                                                                |
| STRING                                                                                                                                 | 'abc'                                                                                      | The CLUSTER_SCHEMA database belongs to the cluster, only the administrator users have the access to the database.         |
| TIMESTAMP                                                                                                                              | TIMESTAMP '1900-01-01T12:00:00Z'                                                           | Join Operation                                                                                                                                 |
| Geometry                                                                                                                               | Name of the system role that the custom role inherits from, or NULL if it is a system role | candlestick_agg gets the open and close price of the stock and the high price.                                            |
| --                                                                                                                                     | NULL                                                                                       | At present, we support altering common tables.                                                                                                 |

#### To further study CnosDB, this section will provide sample data for you to download and teach you how to import data into the database. The data sources referenced in the following chapters are all from this sample data.

If the VALUES list requires an expression, please use the [INSERT SELECT](./sql.md#insert-query-results-insert-select) syntax.

`EXPLAIN ANALYZE VERBOSE` executes the query and displays a more detailed execution plan, including the number of rows read.

You can use the ROLLUP option in a single query to generate multiple group sets.

In order to query more efficiently, the order of each row may not be the same for queries without specified sorting.

Generate intermediate aggregate data CandleStackData from the original quote query.

- The SQL statement above is equivalent to inserting the following k-v pairs into the database.
- Instruction
- Download Data
- You can use the keyword `AS` to alias a column expression or table.
- Get the highest price.
- This schema can be used to query information about all tenants in the cluster.

Get the lowest price.

```sql
SELECT CAST (1 AS TIMESTAMP);
```

```
+-------------------------------+
| Int64(1)                      |
+-------------------------------+
| 1970-01-01T00:00:00.000000001 |
+-------------------------------+
```

#### For non-owner members, only the SQL submitted by the current member is displayed.

#### Alter Column: alter the column definition. Currently supports changing column names and modifying compression algorithms for columns.

1. All records of this schema are visible to the owner of the current tenant.
2. All records of this schema are visible to the Owner of the current tenant.
3. Executing the following command in the shell will generate a local data file named oceanic_station in Line Protocol format.
4. Based on the 2-D statistical aggregation, the slope of the linear fitting line is calculated.
5. Specify the order of rows in the partition.
6. Record the accepted data size through the Coordinator.
7. Delay deletion is cancelled and the tenant returns to normal.
8. algorithm specifies the algorithm for computing hash. Only md5, sha224, sha256, sha384, sha512, blake2s, blake2b, blake3 are supported.
9. The coefficient of determination after 2D statistical aggregation is calculated.
10. 8 Bytes
11. This schema shows the membership information under the tenant.
12. Function Names
13. Function Names
14. The return values of functions sha224, sha256, sha384, sha512 belong to this type.

Given a system or a value that switches between discrete states,

For example, you can use the compact_state_agg function to keep track of the system.
User name

#### Geometry

#### WKT

Show all databases or all tables or SQL in progress.
Required by time addition or subtraction and function data_bin's parameters.
Tenant ID

#### REPLICA: represents the number of replicas of data in the cluster, defaults to 1 (the number of replicas is not larger than the number of distributed data nodes).

```
Precedence
```

| begin_time: This is optional and specifies the start time of the period.                                                                                                                                                                                                                                                              | Get the duration, the time of the last Gauge minus the time of the first Gauge.      |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------ |
| CUBE creates a grouping set for each possible combination of the specified expression set. First, GROUP BY (A, B, C), then (A, B), (A, C), (A), (B, C), (B), (C), and finally GROUP BY the entire table.              | `POINT (<x1> <y1>)`                                                                  |
| When with AFTER, it is delayed deletion, which will be deleted after the specified time. The time supports days (d), hours (h), and minutes (m), such as 10d, 50h, 100m. When there is no unit, the default is day. The tenant is not visible and unavailable during the delayed deletion period. | `LINESTRING (<x1> <y1>, <x2> <y2>, ...)`                                             |
| begin_time: This is optional and specifies the start time of the period.                                                                                                                                                                                                                                                              | `POLYGON ((<x1> <y1>, <x2> <y2>, ...))`                                              |
| Multipoint                                                                                                                                                                                                                                                                                                                                                 | `MULTIPOINT (<x1> <y1>, <x2> <y2>, ...)`                                             |
| Common users can access only the tenant information of the current session.                                                                                                                                                                                                                                                                                | `MULTILINESTRING ((<x1> <y1>, <x2> <y2>, ...), (<x1> <y1>, <x2> <y2>, ...))`         |
| Note that the INSERT statement is recorded in (#ht).                                                                                                                                                                                                                                                                                    | `MULTIPOLYGON (((<x1> <y1>, <x2> <y2>, ...)), ((<x1> <y1>, <x2> <y2>, ...)))`        |
| The time_window_gapfill is similar to time_window, but has the ability to fill in missing data. Interpolate and locf must be used in conjunction with time_window_gapfill, which controls how missing values are treated.                         | `GEOMETRYCOLLECTION (<geometry tag1> <wkt data1>, <geometry tag2> <wkt data2>, ...)` |

#### -- Column definitions can not be specified for PARQUET filesCREATE EXTERNAL TABLE [ IF NOT EXISTS ] tb_name&#xA;( field_definition [, field_definition] ... ) tb_option;field_definition:&#xA;column_name data_type [ NULL ]tb_option: {&#xA;STORED AS { PARQUET | JSON | CSV | AVRO }&#xA;| [ WITH HEADER ROW ]&#xA;| [ DELIMITER 'a_single_char' ]&#xA;| [ PARTITIONED BY ( column_name, [, ... ] ) ]&#xA;| LOCATION '/path/to/file'&#xA;}

| Record the number of times the output data passes through the Coordinator.                                                                       | **Function**: Return the number of rows retrieved in the selected element. | ROLLUP assumes a hierarchy between input columns.                                                                                                                                                                                          |
| ------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| This view records the Body size of the HTTP request.                                                                                             | ![](/img/sql/SFA_Point.svg.png)                                            | POINT (30 10)                                                                                                                                                                                                           |
| **Notice**: Only resources that are delayed deletion and during the delayed deletion period can be recovered by executing the RECOVER statement. | ![](/img/sql/102px-SFA_LineString.svg.png)                                 | LINESTRING (30 10, 10 30, 40 40)                                                                                                                                                                                        |
| CnosDB supports updating the tag column value to NULL.                                                                                           | ![](/img/sql/SFA_Polygon.svg.png)                                          | POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))                                                                                                                                                        |
|                                                                                                                                                  | ![](/img/sql/SFA_Polygon_with_hole.svg.png)                                | POLYGON ((35 10, 45 45, 15 40, 10 20, 35 10), (20 30, 35 35, 30 20, 20 30))                                                                                                       |
| Multipoint                                                                                                                                       | ![](/img/sql/SFA_MultiPoint.svg.png)                                       | MULTIPOINT ((10 40), (40 30), (20 20), (30 10))                                                                                             |
|                                                                                                                                                  |                                                                            | MULTIPOINT (10 40, 40 30, 20 20, 30 10)                                                                                                                                                                                 |
| Common users can access only the tenant information of the current session.                                                                      | ![](/img/sql/102px-SFA_MultiLineString.svg.png)                            | MULTILINESTRING ((10 10, 20 20, 10 40), (40 40, 30 30, 40 20, 30 10))                                                                                                             |
| A stream query statement is triggered when data is written.                                                                                      | ![](/img/sql/SFA_MultiPolygon.svg.png)                                     | MULTIPOLYGON (((30 20, 45 40, 10 40, 30 20)), ((15 5, 40 10, 10 20, 5 10, 15 5)))                                                           |
|                                                                                                                                                  | ![](/img/sql/SFA_MultiPolygon_with_hole.svg.png)                           | MULTIPOLYGON (((40 40, 20 45, 45 30, 40 40)), ((20 35, 10 30, 10 10, 30 5, 45 20, 20 35), (30 20, 20 15, 20 25, 30 20))) |
| When data is written to the source table, the streaming query is triggered.                                                                      | ![](/img/sql/SFA_GeometryCollection.svg.png)                               | GEOMETRYCOLLECTION (POINT (40 10), LINESTRING (10 10, 20 20, 10 40), POLYGON ((40 40, 20 45, 45 30, 40 40)))                                |

### Interval type is STRING, which will be resolved to time interval.

#### Get the volume weighted average price.

```sql
CREATE DATABASE [IF NOT EXISTS] db_name [WITH db_options];

db_options:
    db_option ...

db_option: {
      TTL value
    | SHARD value
    | VNODE_DURATION value
    | REPLICA value
    | PRECISION {'ms' | 'us' | 'ns'}
}
```

#### **Function**: Assign a unique sequence number (starting from 1) to each row according to the row order in the window partition.

1. idelta_right
2. User name
3. todo
4. last_time
5. Get the total volume.

#### It is important to note that the LOCF method can introduce certain biases, especially when the data after the missing value changes drastically. Therefore, when using LOCF to fill in missing values, it is necessary to carefully consider the characteristics of the data and the purpose of the analysis to ensure that the filled values can reasonably reflect the actual situation.

```sql
> CREATE DATABASE oceanic_station;
Query took 0.062 seconds.
```

### The first offset line of the current line in the offset `offset PRECEDING` ROWS mode. The first offset value of the current value in the RANGE mode.

#### This database, which belongs to a Tenant, is automatically created when a tenant is created and is visible to all members under the tenant.

```sql
SHOW DATABASES;
```

#### CnosDB store the shema information in two specific databases:

```
+-----------------+
| database_name   |
+-----------------+
| oceanic_station |
| public          |
+-----------------+
```

### The next offset line of the current line in the `offset FOLLOWING` ROWS mode. The next offset value of the current value in the RANGE mode.

Calculate the increment of value in the time series.

Count the duration of a state, or count the duration of a state in a certain period of time.

```sql
\c dbname
```

```
public ❯ \c oceanic_station
oceanic_station ❯
```

### interval_time: This is optional and specifies the duration of the time interval or infinity if not specified.

#### This schema stores information about all tables under the tenant.

```sql
DROP DATABASE [IF EXISTS] db_name [AFTER '7d'];
```

Removing the database will delete all tables and metadata specified for the database.

**Function**: x returns the approximate percentage (TDigest) of the weighted input value, where w is the weight column expression and p is a floating point 64 between 0 and 1 inclusive.

Common users can access only the tenant information of the current session.The database is not visible and unavailable during the delay deletion.

#### This schema records the amount of disk space, in bytes, occupied by each vnode in the cluster.

```sql
RECOVER DATABASE [IF EXISTS] db_name;
```

Cancel Delay Deletion and Database Revert

Get the opening price.

#### `1997-01-31 09:26:56`     # Close to RCF3339, replace T by space, and no time zone is specified, the accuracy is on the order of seconds

```sql
Syntax
```

### Overwriting occurs when duplicate k-v pairs occur in the same field.

#### Record the output data size through the Coordinator.

```sql
ALTER DATABASE db_name [alter_db_options]

alter_db_options:
    SET db_option

db_option: {
      TTL value
    | SHARD value
    | VNODE_DURATION value
    | REPLICA value
}
```

#### **Function**: Replace all search items with replace.

```sql
ALTER DATABASE oceanic_station SET TTL '30d';
```

### When not with AFTER, it will be deleted immediately.

#### LOCATION: represents the location of the associated file.

```sql
DESCRIBE DATABASE dbname;
```

#### CnosDB supports `INNER JOIN`、`LEFT OUTER JOIN`、`RIGHT OUTER JOIN`、`FULL OUTER JOIN`.

```sql
DESCRIBE DATABASE oceanic_station;
```

```
+-----+-------+----------------+---------+-----------+
| ttl | shard | vnode_duration | replica | precision |
+-----+-------+----------------+---------+-----------+
| INF | 1     | 365 Days       | 1       | NS        |
+-----+-------+----------------+---------+-----------+
```

## Copies the value of the non-missing value to the location of the missing value.

### Last Observation Carried Forward (LOCF) is a method for filling in missing values using the most recent observable values. The specific treatment is as follows:

Given a system or value that switches between discrete states, the transitions between states are tracked.

first_val

### If the next non-missing value is encountered, steps 1 and 2 are repeated to copy the value of that non-missing value to the missing value location.

#### The data is read-only and cannot be DML operated or indexed.

```sql
CREATE TABLE [IF NOT EXISTS] tb_name
(field_definition [, field_definition ] ... [, TAGS(tg_name [, tg_name] ...)]);

field_definition:
    column_name data_type [field_codec_type]
    
field_codec_type:
    CODEC(code_type)
```

#### Gets the last value of one column sorted by another.

1. Comparing expressions for inequality
2. This function is used to perform Gap filling within the time window and to fillin the missing values using the "Last Observation Carried Forward" (LOCF) operation.
3. Point to line distance.
4. Point

   - User name
   - User name
   - User name
   - Get the time of the lowest price.

Role name

#### The core idea of linear interpolation is to assume that the relationship between the known data points is linear, and then estimate the value of the unknown data points according to the linear relationship between the known data points. Specifically, linear interpolation deduces the ordinates of unknown data points by using the linear rate of change between the ordinates of known data points.

```sql
CREATE TABLE air (
   visibility DOUBLE,
   temperature DOUBLE,
   pressure DOUBLE,
   TAGS(station)
);
```

```
Query took 0.033 seconds.
```

### Timestamp, the keyword TIMESTAMP indicates that the following string constant need to be interpreted as TIMESTAMP type.

#### Get the value corresponding to the largest timestamp in the Gauge.

```sql
Time Stamp
```

#### Gets the first value of one column sorted by another.

1. Calculates the latest instantaneous change in Gauge. This is equal to the last value value minus the penultimate value.
2. Distance between two points.

#### Sort the results by the referenced expression. Ascending (ASC) is used by default. Sort in descending order by adding DESC after the expression of ORDER BY.

1. Calculate the intercept of y after 2D statistical aggregation.
2. Calculate the standard deviation of the specified dimension after the two-dimensional statistical aggregation, and the method is `population`.
3. idelta_left
4. Tenant name
5. Nmuber of shards

#### **Function**: Split str according to delim, and return the nth part.

```sql
CREATE EXTERNAL TABLE cpu (
     cpu_hz  DECIMAL(10,6) NOT NULL,
     temp  DOUBLE NOT NULL,
     version_num  BIGINT NOT NULL,
     is_old  BOOLEAN NOT NULL,
     weight  DECIMAL(12,7) NOT NULL
)
STORED AS CSV
WITH HEADER ROW
LOCATION 'tests/data/csv/cpu.csv';
```

```
Query took 0.031 seconds.
```

### interval_time: This is optional; it specifies the duration of the time interval or infinity if not specified.

#### This schema stores tenant database information.

```sql
DROP TABLE [ IF EXISTS ] tb_name;
```

#### Calculate the variance of the specified dimension after aggregating the two-dimensional statistics, and the method is `population`.

```sql
DROP TABLE IF EXISTS air;
```

```
Query took 0.033 seconds.
```

### Calculate the standard deviation of the specified dimension after two-dimensional statistical aggregation, and the method is `sample`.

#### **Function**: Returns the rank (jump rank) of a value relative to all values in the partition.

```sql
SHOW TABLES;
```

#### Execute the \w command, followed by the absolute path of the data file or the working path relative to cnosdb-cli.

```sql
SHOW TABLES;
```

```
+------------+
| table_name |
+------------+
| air        |
| sea        |
| wind       |
+------------+
```

### The CTE defined in the WITH clause can only be used for other CTEs in the same WITH clause defined later.&#xA;Suppose A is the first CTE in the clause and B is the second CTE in the clause:

Both external and normal tables can be viewed using this statement.

#### Current row in `CURRENT ROW` ROWS  mode.Current value in RANGE mode.

```sql
DESCRIBE DATABASE table_name;
```

#### ALTER TABLE tb_name alter_table_option;alter_table_option: {&#xA;ADD TAG col_name&#xA;| ADD FIELD col_name [CODEC(code_type)]&#xA;| ALTER col_name SET CODEC(code_type)&#xA;| DROP col_name&#xA;| RENAME COLUMN col_name TO new_col_name&#xA;}

```sql
DESCRIBE TABLE air;
```

```
+-------------+-----------------------+-------------+-------------------+
| column_name | data_type             | column_type | compression_codec |
+-------------+-----------------------+-------------+-------------------+
| time        | TIMESTAMP(NANOSECOND) | TIME        | DEFAULT           |
| station     | STRING                | TAG         | DEFAULT           |
| pressure    | DOUBLE                | FIELD       | DEFAULT           |
| temperature | DOUBLE                | FIELD       | DEFAULT           |
| visibility  | DOUBLE                | FIELD       | DEFAULT           |
+-------------+-----------------------+-------------+-------------------+
```

### The first row of the partition in `UNBOUND PRECEDING` ROWS mode. The first value of the partition ORDER BY expression in RANGE mode.

The correlation after aggregation of two-dimensional statistics is calculated.

If a complex expression has more than one operator, operator precedence determines the sequence of operations. The order of execution may have a noticeable effect on the resulting value.

1. 1 Byte
2. Common users can access only the tenant information of the current session.
3. +08:00 represents the East 8th District

#### `1997-01-31T09:26:56.123` # Close to RCF3339, no time zone is specified, defaults to UTC

```sql
Show the result
```

> Modifying the `time` column name is not supported.
> Description

#### resolution: Bigint, the approximate number of points to return ((Timestamp, value) pair), determines the horizontal resolution of the resulting plot.

```sql
ALTER TABLE air ADD TAG height;
ALTER TABLE air ADD FIELD humidity DOUBLE CODEC(DEFAULT);
ALTER TABLE air ALTER humidity SET CODEC(QUANTILE);
ALTER TABLE air DROP humidity;
ALTER TABLE air RENAME COLUMN height to height_v2;
```

## The last row of partition in `UNBOUND FOLLOWING` ROWS mode.The last value of ORDER BY expression in RANGE mode.

Count the duration of the 'running' state starting 2020-01-01 11:00:00.

Calculate the average of the specified dimensions after the aggregation of 2-D statistics.

### **INSERT**

#### Analyze Gauge data. Unlike Counter, Gauge can be decreased or increased.

```sql
INSERT [INTO] tb_name [ ( column_name [, ...] ) ] VALUES (  const [, ...] ) [, ...] | query; 
```

This is equivalent to inserting the following k-v pairs into the database.

-state: Any
Instructions

This is equivalent to inserting the following k-v pairs into the database.

If you need to track the activity of your system based on heartbeat signals, consider using the heartbeat_agg function.

Policy

The time stamp is based on RCF3339 standard.

### If the compression algorithm is not specified when creating a table, the system default compression algorithm is used.

Name of the role granted

#### **Function**: Returns the rank (consecutive rank) of a value relative to all values in the partition.

```sql
CREATE TABLE air (
    visibility DOUBLE,
    temperature DOUBLE,
    pressure DOUBLE,
    TAGS(station)
);
```

```
Query took 0.027 seconds.
```

```sql
INSERT INTO air (TIME, station, visibility, temperature, pressure) VALUES
                (1666165200290401000, 'XiaoMaiDao', 56, 69, 77);
```

```
+------+
| rows |
+------+
| 1    |
+------+
Query took 0.044 seconds.
```

```sql
INSERT INTO air (TIME, station, visibility, temperature, pressure) VALUES
                ('2022-10-19 06:40:00', 'XiaoMaiDao', 55, 68, 76);
```

```
+------+
| rows |
+------+
| 1    |
+------+
Query took 0.032 seconds.
```

```sql
SELECT * FROM air;
```

```
+----------------------------+------------+------------+-------------+-----------+
| time                       | station    | visibility | temperature | pressure |
+----------------------------+------------+------------+-------------+-----------+
| 2022-10-18 22:40:00        | XiaoMaiDao | 55         | 68          | 76        |
| 2022-10-19 07:40:00.290401 | XiaoMaiDao | 56         | 69          | 77        |
+----------------------------+------------+------------+-------------+-----------+
```

Similar to ROLLUP, CUBE is an extension of the GROUP BY clause. It allows you to generate subtotals for all combinations of grouping columns specified in the GROUP BY clause.

External tables do not exist in the database, but an operating system file is accessed as a common database table.

### If RANGE is specified, the ORDER BY clause must be specified. The window calculates the offset in the unit of the value of the ORDER BY expression.

Whether administrator

#### The keyword `FULL JOIN` or `FULL OUTER JOIN` defines a full connection, which is actually the union of LEFT OUTER JOIN and RIGHT OUTER JOIN. It will display all the rows on the left and right of the join, and will generate null values where either side of the join does not match.

```sql
INSERT INTO air (TIME, station, visibility, temperature, pressure) VALUES
                ('2022-10-19 05:40:00', 'XiaoMaiDao', 55, 68, 76), 
                ('2022-10-19 04:40:00', 'XiaoMaiDao', 55, 68, 76);
```

```
+------+
| rows |
+------+
| 2    |
+------+
Query took 0.037 seconds.
```

```sql
SELECT * FROM air;
```

```
+----------------------------+------------+------------+-------------+-----------+
| time                       | station    | visibility | temperature | pressure |
+----------------------------+------------+------------+-------------+-----------+
| 2022-10-18 20:40:00        | XiaoMaiDao | 55         | 68          | 76        |
| 2022-10-18 21:40:00        | XiaoMaiDao | 55         | 68          | 76        |
| 2022-10-18 22:40:00        | XiaoMaiDao | 55         | 68          | 76        |
| 2022-10-19 07:40:00.290401 | XiaoMaiDao | 56         | 69          | 77        |
+----------------------------+------------+------------+-------------+-----------+
```

### Multi-polygon

Number of replica

#### Define a right join with the keyword `RIGHT JOIN` or `RIGHT OUTER JOIN` . This join includes all the rows in the right table. If there are no matching rows in the left table, the left side of the join is null.

```sql
8 Bytes
```

```
Query took 0.027 seconds.
```

```sql
Multi-polygon
```

```
+------+
| rows |
+------+
| 4    |
+------+
Query took 0.045 seconds.
```

```sql
SELECT * FROM air_visibility;
```

```
+----------------------------+------------+------------+
| time                       | station    | visibility |
+----------------------------+------------+------------+
| 2022-10-18 20:40:00        | XiaoMaiDao | 55         |
| 2022-10-18 21:40:00        | XiaoMaiDao | 55         |
| 2022-10-18 22:40:00        | XiaoMaiDao | 55         |
| 2022-10-19 07:40:00.290401 | XiaoMaiDao | 56         |
+----------------------------+------------+------------+
```

### If ROWS is specified, the window will calculate the offset in row units.

[//]: # "2.3"

Instructions

```
CREATE TABLE air (
    visibility DOUBLE,
    temperature DOUBLE,
    pressure DOUBLE,
    TAGS(station)
);
INSERT INTO air (TIME, station, visibility, temperature) VALUES
(1666165200290401000, 'XiaoMaiDao', 56, 69);
```

Geometry-collection

| key                                                    | visibility-value | temperature-value | pressure-value |
| ------------------------------------------------------ | ---------------- | ----------------- | -------------- |
| (1666165200290401000, 'XiaoMaiDao') | 56               |                   |                |
| (1666165200290401000, 'XiaoMaiDao') |                  | 69                |                |

CnosDB supports updating single or multiple field column values separately. It does not support updating tag column and field column at the same time.

```
select * from air;
----
+----------------------------+------------+------------+-------------+----------+
| time                       | station    | visibility | temperature | pressure |
+----------------------------+------------+------------+-------------+----------+
| 2022-10-19T07:40:00.290401 | XiaoMaiDao | 56.0       | 69.0        |          |
+----------------------------+------------+------------+-------------+----------+
```

Instructions

```sql
INSERT INTO air (TIME, station, visibility) VALUES
(1666165200290401000, 'XiaoMaiDao', 66);
```

Equivalent to insert

| key                                                    | visibility-value | temperature-value | pressure-value |
| ------------------------------------------------------ | ---------------- | ----------------- | -------------- |
| (1666165200290401000, 'XiaoMaiDao') | 66               |                   |                |

Tenant name

```
select * from air;
----
+----------------------------+------------+------------+-------------+----------+
| time                       | station    | visibility | temperature | pressure |
+----------------------------+------------+------------+-------------+----------+
| 2022-10-19T07:40:00.290401 | XiaoMaiDao | 66.0       | 69.0        |          |
+----------------------------+------------+------------+-------------+----------+
```

```sql
INSERT INTO air (TIME, station, pressure) VALUES
(1666165200290401000, 'XiaoMaiDao', 77);
```

Equivalent to insert

| key                                                    | visibility-value | temperature-value | pressure-value |
| ------------------------------------------------------ | ---------------- | ----------------- | -------------- |
| (1666165200290401000, 'XiaoMaiDao') |                  |                   | 77             |

```
select * from air;
----
+----------------------------+------------+------------+-------------+----------+
| time                       | station    | visibility | temperature | pressure |
+----------------------------+------------+------------+-------------+----------+
| 2022-10-19T07:40:00.290401 | XiaoMaiDao | 66.0       | 69.0        | 77.0     |
+----------------------------+------------+------------+-------------+----------+
```

## In the SELECT query, the HAVING clause must follow the GROUP BY clause and appear before the ORDER BY clause (if there is one).

### Contain the DISTINCT keyword, which counts the results after deduplication.

#### **Function**: Calculate the percentage ranking of a value in the partition.

```
Size
```

#### **Function**: Return the overall covariance of number pairs in a group.

1. Explanation
2. +---------------------+------------+----------+
   \| time                | station    | pressure |
   +---------------------+------------+----------+
   \| 2023-03-14T16:00:00 | XiaoMaiDao | 55.0     |
   \| 2023-03-14T15:57:00 | XiaoMaiDao | 62.0     |
   \| 2023-03-14T15:54:00 | XiaoMaiDao | 75.0     |
   \| 2023-03-14T15:51:00 | XiaoMaiDao | 61.0     |
   +---------------------+------------+----------+
3. geometry object
4. Calculate the kurtosis value of the specified dimension after two-dimensional statistical aggregation, and the method is `sample`.
5. volume: Double
6. Description

#### Add Column: add field and tag columns.

```sql
update air set station = 'ShangHai' where station = 'LianYunGang';
```

### This view records the number of times the user writes to the DB over HTTP.

#### -- station is a Tag column&#xA;SELECT station FROM air;

```sql
UPDATE table_name SET ( assignment_clause [, ...] ) where_clause

assignment clause :
    field_name = value_expression
```

#### The aggregate function result cannot be returned in CSV format.

1. Instructions

#### CnosDB supports updating single or multiple tag column values separately. It does not support updating tag column and field column at the same time.

```sql
update air set pressure = pressure + 100 where pressure = 68 and time < '2023-01-14T16:03:00';
```

## Therefore, we often use ROLLUP in reports to generate subtotals and totals. The order of columns in ROLLUP is very important.

Get the time of the opening price.

**NOTE**：for more efficient query, no sorted queries specified, not necessarily in the same order per line, please see `ORDER BY` for field sorting.

### `1997-01-31 09:26:56.123` # Close to RCF3339, replace T by space, and no time zone is specified

Count the time of 'running' status.The data sources cited in the subsequent sections are derived from this sample data.

### HAVING enables you to specify filter conditions after the GROUP BY clause, so as to control which groups in the query results can appear in the final results.

Statistical Aggregate Functions

See [Aggregate Function](#aggregate-function).

```shell
curl -o oceanic_station.txt https://dl.cnosdb.com/sample/oceanic_station.txt
```

### At present, the compression algorithms supported by various types are as follows. The first one of each type is the default specified algorithm. NULL means no compression algorithm is used.

- This view records the number of times the user queries the DB.
  ```shell
  cnosdb-cli
  ```
- Comparing expressions to see if they are less than or equal to
  ```shell
  create database oceanic_station;
  ```
- STORED AS: represents the format in which the file is stored. Currently, PARQUET, JSON, CSV and AVRO formats are supported.
  ```shell
  \c oceanic_station
  ```
- The GROUP BY clause must be after the condition of the WHERE clause (if there is one) and before the ORDER BY clause (if there is one).

  Get the closing time.

  ```shell
  \w oceanic_station.txt
  ```

## BOOLEAN: BITPACK, NULL

#### CnosDB supports the creation of common tables and external tables.

```sql
[ WITH with_query [, ...] ]
SELECT [ ALL | DISTINCT ] select_expression [, ...]
    [ FROM from_item [, ...] ]
    [ WHERE condition ]
    [ GROUP BY [ ALL | DISTINCT ] grouping_element [, ...] ]
    [ HAVING condition ]
    [ { UNION | INTERSECT | EXCEPT } [ ALL | DISTINCT ] select ]
    [ ORDER BY expression [ ASC | DESC ] [, ...] ]
    [ OFFSET count ]
    [ LIMIT { count | ALL } ];

-- from_item
-- 1.
    tb_name [ [ AS ] alias [ ( column_alias [, ...] ) ] ]
-- 2.
    from_item join_type from_item
    { ON join_condition | USING ( join_column [, ...] ) }

-- join_type
    [ INNER ] JOIN
    LEFT [ OUTER ] JOIN
    RIGHT [ OUTER ] JOIN
    FULL [ OUTER ] JOIN
    CROSS JOIN

-- grouping_element
    ()
```

### **Functions**: Convert WKB binary to Geometry type.

### SELECT \*

In short, the LOCF method populates the missing value by copying the most recent observable value to the missing value location, making the data continuous in time. This method assumes that the data after the missing value is the same or very close to the last observed value.

#### **Notice**: Neither column is included in the aggregation if it is NULL.

```
SELECT * FROM air;
```

```
+---------------------+-------------+------------+-------------+----------+
| time                | station     | visibility | temperature | pressure |
+---------------------+-------------+------------+-------------+----------+
| 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       |
| 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       |
| 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       |
| 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       |
| 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       |
| 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       |
| 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       |
| 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       |
| 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       |
| 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       |
| 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       |
| 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       |
| 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       |
+---------------------+-------------+------------+-------------+----------+
```

### Return the series in the specified table.

#### **Function**: Create a STRUCT with the specified field value.

```sql
SELECT [ ALL | DISTINCT ] select_expression [, ...];
```

Count the duration of the 'running' state for four days starting on 2020-01-01 11:00:00.
Schema DefinitionWhen this option is not specified, the default value is `ALL`.

#### Define a left join with the keyword `LEFT JOIN` or `LEFT OUTER JOIN` . This join includes all the rows in the left table. If there are no matching rows in the right table, the right side of the join is null.

```sql
SELECT DISTINCT station, visibility FROM air;
```

```
+-------------+------------+
| station     | visibility |
+-------------+------------+
| XiaoMaiDao  | 56         |
| XiaoMaiDao  | 50         |
| XiaoMaiDao  | 67         |
| XiaoMaiDao  | 65         |
| XiaoMaiDao  | 53         |
| XiaoMaiDao  | 74         |
| XiaoMaiDao  | 71         |
| LianYunGang | 78         |
| LianYunGang | 79         |
| LianYunGang | 59         |
| LianYunGang | 67         |
| LianYunGang | 80         |
+-------------+------------+
```

```sql
SELECT station, visibility FROM air;
```

```
+-------------+------------+
| station     | visibility |
+-------------+------------+
| XiaoMaiDao  | 56         |
| XiaoMaiDao  | 50         |
| XiaoMaiDao  | 67         |
| XiaoMaiDao  | 65         |
| XiaoMaiDao  | 53         |
| XiaoMaiDao  | 74         |
| XiaoMaiDao  | 71         |
| LianYunGang | 78         |
| LianYunGang | 79         |
| LianYunGang | 59         |
| LianYunGang | 67         |
| LianYunGang | 80         |
| LianYunGang | 59         |
+-------------+------------+
```

### Determines whether the left expression matches the pattern of the right expression

Calculate the sum of the specified dimensions after the two-dimensional statistical aggregation, and the method is `population`.

### Pick alias for column expression

#### DOUBLE: GORILLA, QUANTILE, SDT, DEADBAND, NULL

```sql
expression [ [ AS ] column_alias ]
```

#### `where_clause` can only contain tag and time columns, not field columns.

```sql
SELECT station s, visibility AS v FROM air;
```

```
+-------------+----+
| s           | v  |
+-------------+----+
| XiaoMaiDao  | 56 |
| XiaoMaiDao  | 50 |
| XiaoMaiDao  | 67 |
| XiaoMaiDao  | 65 |
| XiaoMaiDao  | 53 |
| XiaoMaiDao  | 74 |
| XiaoMaiDao  | 71 |
| LianYunGang | 78 |
| LianYunGang | 79 |
| LianYunGang | 59 |
| LianYunGang | 67 |
| LianYunGang | 80 |
| LianYunGang | 59 |
+-------------+----+
```

### Common users can access only the tenant information of the current session.

Explanation

#### Perform financial asset data analysis. This feature makes it easier to write financial analysis queries involving candlestick.

```sql
FROM tb_name [AS] alias_name
```

#### In databases, interpolation is a technique used to deal with missing values in data. When there are missing values in the data, these techniques can help us estimate or speculate on those missing values, thus filling in the gaps in the data.

```sql
SELECT a.visibility, s.temperature
FROM air AS a JOIN sea s ON a.temperature = s.temperature limit 10;
```

```
+------------+-------------+
| visibility | temperature |
+------------+-------------+
| 67         | 62          |
| 50         | 78          |
| 50         | 78          |
| 65         | 79          |
+------------+-------------+
```

### Binary operators and two expressions are combined to form a new expression.

- N: Int

  #### One or more expressions used to specify a row partition. If there is no such clause, the partition is composed of all rows.

  ```sql
  Restrictions on Usage
  ```

  ```
  +-------------+-------------+
  | station     | temperature |
  +-------------+-------------+
  | XiaoMaiDao  | 69          |
  | XiaoMaiDao  | 78          |
  | XiaoMaiDao  | 62          |
  | XiaoMaiDao  | 79          |
  | XiaoMaiDao  | 53          |
  | XiaoMaiDao  | 72          |
  | XiaoMaiDao  | 71          |
  | LianYunGang | 69          |
  | LianYunGang | 80          |
  | LianYunGang | 74          |
  | LianYunGang | 70          |
  | LianYunGang | 70          |
  | LianYunGang | 70          |
  +-------------+-------------+
  ```

  ```sql
  Note
  ```

  ```
  +-------------+
  | station     |
  +-------------+
  | XiaoMaiDao  |
  | LianYunGang |
  +-------------+ 
  ```

### PRECISION: The timestamp accuracy of the database. ms represents milliseconds, us represents microseconds, ns represents nanoseconds,defaults to ns.

#### PARTITIONED BY: use the column specified when creating the table to partition.

```sql
LIMIT n
```

price: Double

#### This schema stores the definitions of all columns under the tenant.

```sql
SELECT *
FROM air LIMIT 10;
```

```
+---------------------+-------------+------------+-------------+----------+
| time                | station     | visibility | temperature | pressure |
+---------------------+-------------+------------+-------------+----------+
| 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       |
| 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       |
| 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       |
| 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       |
| 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       |
| 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       |
| 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       |
| 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       |
| 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       |
| 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       |
+---------------------+-------------+------------+-------------+----------+
```

### The time spent in each state is counted and aggregated into the StateAggData type.

#### VNODE_DURATION: represents the time range of data in the shard, defaults to 365 days, and also expressed by data with units.Its data meaning is consistent with the value of TTL.

```sql
OFFSET m
```

Host of service

#### **Function**: 将 str 中与 regexp 匹配的所有子字符串都替换为 rep。

```sql
SELECT *
FROM air OFFSET 10;
```

```
+---------------------+-------------+------------+-------------+----------+
| time                | station     | visibility | temperature | pressure |
+---------------------+-------------+------------+-------------+----------+
| 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       |
| 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       |
| 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       |
+---------------------+-------------+------------+-------------+----------+
```

The tenant to which the vnode belongs
Role name under the tenant
OFFSET 0 has the same effect as omitting OFFSET sentences.

#### You can also use the keyword `AS` to alias the table.

```sql
SELECT *
FROM air LIMIT 3 OFFSET 3;
```

```
+---------------------+------------+------------+-------------+----------+
| time                | station    | visibility | temperature | pressure |
+---------------------+------------+------------+-------------+----------+
| 2022-01-28 13:30:00 | XiaoMaiDao | 65         | 79          | 77       |
| 2022-01-28 13:33:00 | XiaoMaiDao | 53         | 53          | 68       |
| 2022-01-28 13:36:00 | XiaoMaiDao | 74         | 72          | 68       |
+---------------------+------------+------------+-------------+----------+
```

### For more information about the compression algorithm, see the details of the [compression algorithm](./concept_design/compress.md#compression-algorithm).

#### Example: `INSERT INTO air (TIME, station, visibility) VALUES(1666132800000000000, NULL, NULL)`

```sql
WITH cte AS cte_query_definiton [, ...] query
```

Optional.`slide_duration` is an interval, and specifies the sliding size of the time window. If this parameter is not specified, `slide_duration` is the sliding size of the time window and becomes a rolling window.
geometry objectThe following rules for use by CTE are：

- Calculate the kurtosis value of the specified dimension after two-dimensional statistical aggregation, and the method is `population`.
- Note
  Assume A is the first CTE, B is the second CTE：

#### The keyword `VALUES` can be followed by multiple lists separated by `,`.

```sql
SELECT station, avg 
FROM (  SELECT station, AVG(visibility) AS avg 
        FROM air 
        GROUP BY station) AS x;
```

```
+-------------+--------------------+
| station     | avg                |
+-------------+--------------------+
| XiaoMaiDao  | 62.285714285714285 |
| LianYunGang | 70.33333333333333  |
+-------------+--------------------+
```

```sql
WITH x AS 
    (SELECT station, AVG(visibility) AS avg FROM air GROUP BY station)
SELECT station, avg
FROM x;
```

```
+-------------+--------------------+
| station     | avg                |
+-------------+--------------------+
| XiaoMaiDao  | 62.285714285714285 |
| LianYunGang | 70.33333333333333  |
+-------------+--------------------+
```

### Calculate the intercept of x after two-dimensional statistical aggregation.

Type

#### **Function**: Return a value truncated to the unit specified in field.

```
select_clause_set_left
[ UNION | UNION ALL| EXCEPT | INTERSECT]
select_clause_set_right
[sort_list_columns] [limit_clause]
```

`UNION` weights the merged resultset.
Type
User name under tenant
Role name

Time range of data in shard

**Function**: Signs of parameter (-1,0,+1).

#### **Function**: Return a concatenated string separated by sep.

- **UNION ALL**

  ```sql
  SELECT visibility FROM air WHERE temperature < 60
  UNION ALL
  SELECT visibility FROM air WHERE temperature > 50 LIMIT 10;
  ```

  ```
  +------------+
  | visibility |
  +------------+
  | 53         |
  | 56         |
  | 50         |
  | 67         |
  | 65         |
  | 53         |
  | 74         |
  | 71         |
  | 78         |
  | 79         |
  +------------+
  ```

- **UNION**

  ```sql
  SELECT visibility FROM air WHERE temperature < 60
  UNION
  SELECT visibility FROM air WHERE temperature > 50 LIMIT 10;
  ```

  ```
  +------------+
  | visibility |
  +------------+
  | 53         |
  | 56         |
  | 50         |
  | 67         |
  | 65         |
  | 74         |
  | 71         |
  | 78         |
  | 79         |
  | 59         |
  +------------+
  ```

- **EXCEPT**

  ```sql
  SELECT visibility FROM air
  EXCEPT
  SELECT visibility FROM air WHERE temperature < 50 LIMIT 10;
  ```

  ```
  +------------+
  | visibility |
  +------------+
  | 56         |
  | 50         |
  | 67         |
  | 65         |
  | 53         |
  | 74         |
  | 71         |
  | 78         |
  | 79         |
  | 59         |
  +------------+
  ```

- **INTERSECT**

  ```sql
  SELECT visibility FROM air
  INTERSECT
  SELECT visibility FROM air WHERE temperature > 50 LIMIT 10;
  ```

  ```
  +------------+
  | visibility |
  +------------+
  | 56         |
  | 50         |
  | 67         |
  | 65         |
  | 53         |
  | 74         |
  | 71         |
  | 78         |
  | 79         |
  | 59         |
  +------------+
  ```

### This schema shows a real-time snapshot of SQL statements, which is used to monitor SQL jobs in real time.

Sort results by referenced expression.Default usage ascending (ASC).Measurement value

#### The keyword `JOIN` or `INNER JOIN` defines a join that only displays matching rows in two tables.

```sql
SELECT * FROM air ORDER BY temperature;
```

```
+---------------------+-------------+------------+-------------+----------+
| time                | station     | visibility | temperature | pressure |
+---------------------+-------------+------------+-------------+----------+
| 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       |
| 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       |
| 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       |
| 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       |
| 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       |
| 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       |
| 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       |
| 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       |
| 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       |
| 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       |
| 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       |
| 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       |
| 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       |
+---------------------+-------------+------------+-------------+----------+
```

```sql
SELECT * FROM air ORDER BY temperature DESC;
```

```
+---------------------+-------------+------------+-------------+----------+
| time                | station     | visibility | temperature | pressure |
+---------------------+-------------+------------+-------------+----------+
| 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       |
| 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       |
| 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       |
| 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       |
| 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       |
| 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       |
| 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       |
| 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       |
| 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       |
| 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       |
| 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       |
| 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       |
| 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       |
+---------------------+-------------+------------+-------------+----------+
```

```sql
SELECT * FROM air ORDER BY station, temperature;
```

```
+---------------------+-------------+------------+-------------+----------+
| time                | station     | visibility | temperature | pressure |
+---------------------+-------------+------------+-------------+----------+
| 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       |
| 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       |
| 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       |
| 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       |
| 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       |
| 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       |
| 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       |
| 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       |
| 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       |
| 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       |
| 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       |
| 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       |
| 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       |
+---------------------+-------------+------------+-------------+----------+
```

## Drop Column: drop the field column. When dropping a column results in dropping the last field value of a row, we think that this row has no value, and this row will not be showed in SELECT.

Get the smallest timestamp in the gauge
Simple expression can be a constant, variable, column or number function.
Two or more simple expressions can be connected to complex expressions with an operator.

#### Obtain the value corresponding to the smallest timestamp in the gauge

```sql
<expresion> :: = { 
    constant 
    | [ table_name. ] column   
    | scalar_function 
    | ( expression ) 
    | expression { binary_operator } expression   
    | case_when_expression
    | window_function | aggregate_function  
}
```

#### **Function**: The function trims a string by removing leading and trailing spaces or by removing characters that match an optional specified string.

The time_window_gapfill must be used as a top-level expression in a query or subquery. For example, you cannot nest time_window_gapfill in another function, such as sum(time_window_gapfill(xxx)).
See[常量](#constants) for details.

#### Window functions and aggregate functions cannot be nested in window functions.

```sql
select 1;
```

```
+----------+
| Int64(1) |
+----------+
| 1        |
+----------+
```

#### CnosDB supports two data inserting methods:&#xA;one is to use the `INSERT INTO` statement,&#xA;and the other is to use the HTTP API [write](./rest_api.md) interface to insert Line Protocol format data.

Currently, only common tables can be source tables. Field names and field types defined in flow table fields must belong to the source table and be the same as those defined in the source table.

#### DROP DATABASE oceanic_station AFTER ‘7d’;RECOVER DATABASE oceanic_station;

| For more information about SHOW QUERIES, you can reference to [SHOW QUERIES](#show-queries). | Calculate the skewness value of the specified dimension after two-dimensional statistical aggregation, and the method is `sample`. |
| -------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------- |
| NOT                                                                                          | Calculate the variance of the specified dimension after aggregating the two-dimensional statistics, and the method is `sample`.    |
| IS NULL                                                                                      | Sample Data                                                                                                                        |
| IS NOT NULL                                                                                  | Geometry-collection                                                                                                                |

#### CREATE STREAM TABLE [IF NOT EXISTS] table_name(field_definition [, field_definition] ...)&#xA;WITH (db = 'db_name', table = 'table_name', event_time_column = 'time_column')&#xA;engine = tskv;&#xA;field_definition:&#xA;column_name data_type

CLUSTER_SCHEMA : The information of the cluster.

Describe the parameters of the database and the pattern of the table.

| Common users can access only the tenant information of the current session. | Perform linear regression analysis on two-dimensional data, such as calculating correlation coefficients and covariances.&#xA;Common statistics such as mean and standard deviation can also be calculated for each dimension separately.&#xA;stats_agg provides the same functionality as aggregation functions such as sum, count, corr, covar_pop, and so on.&#xA;Suitable for use with multiple analysis functions in a single SQL. |
| --------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| -                                                                           | For system administrators, the entire table in USAGE_SCHEMA is visible.                                                                                                                                                                                                                                                                                                                                                                                      |
| *                                                                           | Common users can access only the tenant information of the current session.                                                                                                                                                                                                                                                                                                                                                                                                       |
| -                                                                           | **Function**: Starting from the origin, the bucket is split by interval, and the bucket timestamp of the source is returned.                                                                                                                                                                                                                                                                                                                                                      |
| /                                                                           | Common users can access only the tenant information of the current session.                                                                                                                                                                                                                                                                                                                                                                                                       |
| %                                                                           | Common users can access only the tenant information of the current session.                                                                                                                                                                                                                                                                                                                                                                                                       |
| \|\&#124                                                                    | Calculates the earliest instantaneous change in Gauge. This is equal to the second value minus the first.                                                                                                                                                                                                                                                                                                                                                                         |
| =                                                                           | **Function**: Randomly select N records from the given column_key.                                                                                                                                                                                                                                                                                                                                                                                           |
| !=、 <\&gt                                                                   | In CnosDB-Cli, you can use the following command to switch to the specified database.                                                                                                                                                                                                                                                                                                                                                                                             |
| <                                                                           | CnosDB provides the system to check the status and information of CnosDB clusters. The system schema is a read-only schema. You can query the system schema using the SQL statement.                                                                                                                                                                                                                                                                                              |
| <=                                                                          | There is no need to create a timestamp column when creating a table. The system automatically adds a timestamp column named "time".                                                                                                                                                                                                                                                                                                                                               |
| &gt;                                                                   | The database contains metadata information about the cluster, such as tenant information and user information.                                                                                                                                                                                                                                                                                                                                                                    |
| > =                                                                         | Column type, unique to the tskv table, supports TIME, TAG, FIELD, and usually Field                                                                                                                                                                                                                                                                                                                                                                                               |
| AND                                                                         | CnosDB provides `ROLLUP`, `CUBE` and other complex grouping operations, enabling you to operate query results in different ways.                                                                                                                                                                                                                                                                                                                                                  |
| OR                                                                          | Time of record                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| LIKE                                                                        | INFORMATION_SCHEMA : The information of the tenant.                                                                                                                                                                                                                                                                                                                                                                                                          |

### candlestick_agg generates intermediate aggregate data CandleStackData from raw quote data,

#### `1997-01-31T09:26:56.123+08:00` # Standard RCF3339, East 8th District

```sql
expr BETWEEN expr AND expr
```

#### Linear interpolation is suitable for estimation of continuous variables, such as filling in missing values in time series or interpolating in spatial data. However, the accuracy and applicability of linear interpolation depends on the characteristics of the data and the actual situation. In some cases, the data may have non-linear relationships, or other interpolation methods may be more suitable. Therefore, before applying linear interpolation, it is necessary to carefully consider the nature of the data and the purpose of the interpolation to ensure that the interpolation results are reasonable and accurate.

```sql
SELECT DISTINCT PRESSURE FROM AIR WHERE PRESSURE BETWEEN 50 AND 60;
```

```
+----------+
| pressure |
+----------+
| 52       |
| 54       |
| 57       |
| 50       |
| 60       |
| 51       |
| 56       |
| 58       |
| 59       |
| 53       |
| 55       |
+----------+
```

**Drop Database**

### Filter and delete data by tag and time columns.

as follows:

#### Tenant name of the database to which the permission is granted

```sql
SELECT station, temperature, visibility FROM air WHERE temperature  IN (68, 69);
```

```
+-------------+-------------+------------+
| station     | temperature | visibility |
+-------------+-------------+------------+
| XiaoMaiDao  | 69          | 56         |
| LianYunGang | 69          | 78         |
+-------------+-------------+------------+
```

Name of the database to which the permission was granted

If you use the database through [HTTP API](./rest_api.md), you can specify the parameter db=database_name in the url to use the database.

### Find the most recent non-missing value before the missing value.

Total write traffic size

#### DELIMITER: only effective in csv format, representing the delimiter of column data.

```sql
CASE
    ( WHEN expression THEN result1 [, ...] )
    ELSE result
END;
```

#### select time, station, pressure from air where station = 'XiaoMaiDao' order by time limit 4;

```sql
SELECT DISTINCT 
    CASE WHEN PRESSURE >= 60 THEN 50 
         ELSE PRESSURE 
    END PRESSURE 
FROM AIR;
```

```
+----------+
| pressure |
+----------+
| 52       |
| 54       |
| 57       |
| 50       |
| 51       |
| 56       |
| 58       |
| 59       |
| 53       |
| 55       |
+----------+
```

### You can also use `INSERT SELECT` to insert query data into the table.

The distance between the plane and the plane. The order of implementation may have a clear impact on the value of results.

The priority level of the operator is shown in the table below. The higher level operator is valued before the lower level operator. Query took 0.030 seconds.

| Level | WITH HEADER ROW: Effective only in csv file format, representing with csv header.                                                        |
| ----- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| 1     | Stream queries support only `INSERT SELECT` statements, where the FROM clause is the stream table and is inserted into the target table. |
| 2     | If the SELECT clause contains only the Tag column, it is equivalent to the SELECT DISTINCT Tag column.                                  |
| 3     | The tenant of the database                                                                                                               |
| 4     | NOT                                                                                                                                      |
| 5     | AND                                                                                                                                      |
| 6     | BETWEEN、IN、LIKE、OR                                                                                                                       |

### **SHOW**

#### Get the time of the highest price.

```sql
SHOW {DATABASES | TABLES | QUERIES}
```

Double Precision Floating Point

#### **Function**: Calculate sha224 hash value of the string str.

```sql
SHOW DATABASES;
```

```
+---------------+
| database_name |
+---------------+
| public        |
+---------------+
```

```sql
SHOW TABLES;
```

```
+------------+
| table_name |
+------------+
| air        |
| sea        |
| wind       |
+------------+
```

```sql
SHOW QUERIES;
```

```
+----------+------------------------------------------------------------------+-----------------------------------------+-----------+----------------------------------------+-------------+------------+--------------+
| query_id | query_text                                                       | user_id                                 | user_name | tenant_id                              | tenant_name | state      | duration     |
+----------+------------------------------------------------------------------+-----------------------------------------+-----------+----------------------------------------+-------------+------------+--------------+
| 36       | select * FROM air join sea ON air.temperature = sea.temperature; | 108709109615072923019194003831375742761 | root      | 13215126763611749424716665303609634152 | cnosdb      | SCHEDULING | 12.693345666 |
+----------+------------------------------------------------------------------+-----------------------------------------+-----------+----------------------------------------+-------------+------------+--------------+
```

Example:

#### SHOW SERIES

The ASAP smoothing algorithm aims to create human-readable graphs that preserve the coarse shape and larger trends of the input data while minimizing the local variance between points.
Take the (Timestamp, value) pair, normalize them to the target time interval, and return the ASAP smooth value.

#### **Function**: Returns the position of a value relative to all values in the partition.

```sql
SHOW SERIES [ON database_name] FROM table_name [WHERE expr] [order_by_clause] [limit_clause] 
```

#### The `where_clause` must not contain a field or time column, and it must not be null. If you want to update all the data in the table, you need to use `where true`, which means you accept that there will be performance problems when the table is large.

```sql
SHOW SERIES FROM air WHERE station = 'XiaoMaiDao' ORDER BY key LIMIT 1;
```

```
+------------------------+
| key                    |
+------------------------+
| air,station=XiaoMaiDao |
+------------------------+
```

CnosDBSQL is inspired by [DataFusion](https://arrow.apache.org/datafusion/user-guide/introduction), We support most of the SQL syntax of DataFusion.

x: double

#### SHOW TAG VALUES

#### To create a stream table, a source table is required. The stream table does not support `ALTER` now.

```sql
SHOW TAG VALUES [ON database_name] FROM table_name WITH KEY [<operator> "<tag_key>" | [[NOT] IN ("<tag_key1>", ..)]] [WHERE expr] [order_by_clause] [limit_clause];
```

Time of record

#### **Functions**: Returns the Cartesian area of the 2D projection of a geometric object. The unit of area is the same as the unit used to represent the coordinates of the input geometry.&#xA;For point, string, multipoint, and multistring, this function returns 0.&#xA;For a collection of geometries, it returns the sum of the areas of the geometries in the collection.

```sql
SHOW TAG VALUES FROM air WITH KEY = "station" WHERE station = 'XiaoMaiDao' ORDER BY key, value LIMIT 1;
```

```
+---------+------------+
| key     | value      |
+---------+------------+
| station | XiaoMaiDao |
+---------+------------+
```

```sql
SHOW TAG VALUES FROM air WITH KEY NOT IN ("station1");
```

```
+---------+-------------+
| key     | value       |
+---------+-------------+
| station | XiaoMaiDao  |
| station | LianYunGang |
+---------+-------------+
```

### **EXPLAIN**

#### If there are still missing values at the end of the data series, the last non-missing value is copied until all missing values are filled in.

```sql
EXPLAIN [ ANALYZE ] [ VERBOSE ] <statement>;
```

Binary operators supported now:

When the time unit is ms, the ratio unit is /ms

Equivalent to:

Constant

#### The wildcard \* can be used to refer to all columns.

```sql
EXPLAIN SELECT station, temperature, visibility FROM air;
```

```
+---------------+-----------------------------------------------------------------------------------------------------------------------------+
| plan_type     | plan                                                                                                                        |
+---------------+-----------------------------------------------------------------------------------------------------------------------------+
| logical_plan  | Projection: #air.station, #air.temperature, #air.visibility                                                                 |
|               |   TableScan: air projection=[station, visibility, temperature]                                                              |
| physical_plan | ProjectionExec: expr=[station@0 as station, temperature@2 as temperature, visibility@1 as visibility]                       |
|               |   TskvExec: limit=None, predicate=ColumnDomains { column_to_domain: Some({}) }, projection=[station,visibility,temperature] |
|               |                                                                                                                             |
+---------------+-----------------------------------------------------------------------------------------------------------------------------+
```

```sql
EXPLAIN ANALYZE SELECT station, temperature, visibility FROM air;
```

```
+-------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| plan_type         | plan                                                                                                                                                                                                                                                                                                                                    |
+-------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Plan with Metrics | ProjectionExec: expr=[station@0 as station, temperature@2 as temperature, visibility@1 as visibility], metrics=[output_rows=13, elapsed_compute=20.375µs, spill_count=0, spilled_bytes=0, mem_used=0]                                                                                                                                   |
|                   |   TskvExec: limit=None, predicate=ColumnDomains { column_to_domain: Some({}) }, projection=[station,visibility,temperature], metrics=[output_rows=13, elapsed_compute=15.929624ms, spill_count=0, spilled_bytes=0, mem_used=0, elapsed_series_scan=1.698791ms, elapsed_point_to_record_batch=4.572954ms, elapsed_field_scan=5.119076ms] |
|                   |                                                                                                                                                                                                                                                                                                                                         |
+-------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
```

```sql
EXPLAIN ANALYZE SELECT station, temperature, visibility FROM air;
```

```
+-------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| plan_type         | plan                                                                                                                                                                                                                                                                                                                                    |
+-------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Plan with Metrics | ProjectionExec: expr=[station@0 as station, temperature@2 as temperature, visibility@1 as visibility], metrics=[output_rows=13, elapsed_compute=20.375µs, spill_count=0, spilled_bytes=0, mem_used=0]                                                                                                                                   |
|                   |   TskvExec: limit=None, predicate=ColumnDomains { column_to_domain: Some({}) }, projection=[station,visibility,temperature], metrics=[output_rows=13, elapsed_compute=15.929624ms, spill_count=0, spilled_bytes=0, mem_used=0, elapsed_series_scan=1.698791ms, elapsed_point_to_record_batch=4.572954ms, elapsed_field_scan=5.119076ms] |
|                   |                                                                                                                                                                                                                                                                                                                                         |
+-------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
```

```sql
EXPLAIN ANALYZE VERBOSE SELECT station, temperature, visibility FROM air;
```

```
+------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| plan_type              | plan                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
+------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Plan with Metrics      | ProjectionExec: expr=[station@0 as station, temperature@2 as temperature, visibility@1 as visibility], metrics=[output_rows=13, elapsed_compute=26.75µs, spill_count=0, spilled_bytes=0, mem_used=0]                                                                                                                                                                                                                                                                                                                                                                    |
|                        |   TskvExec: limit=None, predicate=ColumnDomains { column_to_domain: Some({}) }, projection=[station,visibility,temperature], metrics=[output_rows=13, elapsed_compute=13.225875ms, spill_count=0, spilled_bytes=0, mem_used=0, elapsed_point_to_record_batch=3.918163ms, elapsed_field_scan=3.992161ms, elapsed_series_scan=1.657416ms]                                                                                                                                                                                                                                 |
|                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Plan with Full Metrics | ProjectionExec: expr=[station@0 as station, temperature@2 as temperature, visibility@1 as visibility], metrics=[start_timestamp{partition=0}=2022-10-25 03:00:14.865034 UTC, end_timestamp{partition=0}=2022-10-25 03:00:14.879596 UTC, elapsed_compute{partition=0}=26.75µs, spill_count{partition=0}=0, spilled_bytes{partition=0}=0, mem_used{partition=0}=0, output_rows{partition=0}=13]                                                                                                                                                                           |
|                        |   TskvExec: limit=None, predicate=ColumnDomains { column_to_domain: Some({}) }, projection=[station,visibility,temperature], metrics=[start_timestamp{partition=0}=2022-10-25 03:00:14.864225 UTC, end_timestamp{partition=0}=2022-10-25 03:00:14.879596 UTC, elapsed_compute{partition=0}=13.225875ms, spill_count{partition=0}=0, spilled_bytes{partition=0}=0, mem_used{partition=0}=0, output_rows{partition=0}=13, elapsed_point_to_record_batch{partition=0}=3.918163ms, elapsed_field_scan{partition=0}=3.992161ms, elapsed_series_scan{partition=0}=1.657416ms] |
|                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Output Rows            | 13                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Duration               | 13.307708ms                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
+------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
```

### **DESCRIBE**

#### STRING: SNAPPY, ZSTD, GZIP, BZIP, ZLIB, NULL

```sql
DESCRIBE {DATABASE db_name | TABLE tb_name};
```

`1997-01-31 09:26:56.123+08:00` # Close to RCF3339, just replace T by space

#### **Function**: Return an inverted string or an array containing elements in reverse order.

```sql
DESCRIBE TABLE air;
```

```
+-------------+-----------------------+-------------+-------------------+
| column_name | data_type             | column_type | compression_codec |
+-------------+-----------------------+-------------+-------------------+
| time        | TIMESTAMP(NANOSECOND) | TIME        | DEFAULT           |
| station     | STRING                | TAG         | DEFAULT           |
| pressure    | DOUBLE                | FIELD       | DEFAULT           |
| temperature | DOUBLE                | FIELD       | DEFAULT           |
| visibility  | DOUBLE                | FIELD       | DEFAULT           |
+-------------+-----------------------+-------------+-------------------+
```

```sql
DESCRIBE DATABASE public;
```

```
+-----+-------+----------------+---------+-----------+
| ttl | shard | vnode_duration | replica | precision |
+-----+-------+----------------+---------+-----------+
| INF | 1     | 365 Days       | 1       | NS        |
+-----+-------+----------------+---------+-----------+
```

[//]: # "## **EXISTS**"

[//]: # "EXISTS 条件测试子查询中是否存在行，并在子查询返回至少一个行时返回 true。如果指定 NOT，此条件将在子查询未返回任何行时返回 true。"

[//]: # "The names of the columns need to be different."

[//]: # "```sql"

[//]: # "SELECT id  FROM date"

[//]: # "WHERE EXISTS (SELECT 1 FROM shop"

[//]: # "WHERE date.id = shop.id)"

[//]: # "ORDER BY id;"

[//]: # "```"

[//]: # "# **DCL (无)**"

[//]: # "```sql"

[//]: # "DESCRIBE table_name"

[//]: # "```"

[//]: # "TODO SHOW"

[//]: # "# **SHOW**"

[//]: # "## **SHOW VARIABLE**"

[//]: # "```sql"

[//]: # "-- only support show tables"

[//]: # "-- SHOW TABLES is not supported unless information_schema is enabled"

[//]: # "SHOW TABLES"

[//]: # "```"

[//]: # "## **SHOW COLUMNS**"

[//]: #

[//]: # "```sql"

[//]: # "-- SHOW COLUMNS with WHERE or LIKE is not supported"

[//]: # "-- SHOW COLUMNS is not supported unless information_schema is enabled"

[//]: # "-- treat both FULL and EXTENDED as the same"

[//]: # "SHOW [ EXTENDED ] [ FULL ]"

[//]: # "{ COLUMNS | FIELDS }"

[//]: # "{ FROM | IN }"

[//]: # "table_name"

[//]: # "```"

[//]: # "## **SHOW CREATE TABLE**"

[//]: # "```sql"

[//]: # "SHOW CREATE TABLE table_name"

[//]: # "```"

### `event_time_column` Specifies the event time column. The data type of this column must be TIMESTAMP.

Remarks

The WKT format is a text format used to describe the spatial characteristics of 2D and 3D geometric objects.
WKT stands for "Well-Known Text" and is an open international standard.
The WKT format includes some basic geometric objects, such as points, lines, polygons and circles, and some composite objects, such as collections of polygons and collections of geometric objects.

### INNER JOIN

Get the closing price.

#### select time, station, pressure from air where station = 'XiaoMaiDao' order by time desc limit 4;

```sql
SELECT * FROM air INNER JOIN sea ON air.temperature = sea.temperature;
```

```
+---------------------+------------+------------+-------------+----------+---------------------+-------------+-------------+
| time                | station    | visibility | temperature | pressure | time                | station     | temperature |
+---------------------+------------+------------+-------------+----------+---------------------+-------------+-------------+
| 2022-01-28 13:27:00 | XiaoMaiDao | 67         | 62          | 59       | 2022-01-28 13:18:00 | LianYunGang | 62          |
| 2022-01-28 13:24:00 | XiaoMaiDao | 50         | 78          | 66       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |
| 2022-01-28 13:24:00 | XiaoMaiDao | 50         | 78          | 66       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |
| 2022-01-28 13:30:00 | XiaoMaiDao | 65         | 79          | 77       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |
+---------------------+------------+------------+-------------+----------+---------------------+-------------+-------------+
```

### LEFT JOIN

Z represents zero time zoneHost of service

#### **Functions**: The Geometry object is returned in OGC/ISO Well-Known Binary(WKB) format.

```sql
SELECT * FROM air LEFT JOIN sea ON air.temperature = sea.temperature;
```

```
+---------------------+-------------+------------+-------------+----------+---------------------+-------------+-------------+
| time                | station     | visibility | temperature | pressure | time                | station     | temperature |
+---------------------+-------------+------------+-------------+----------+---------------------+-------------+-------------+
| 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:18:00 | LianYunGang | 62          |
| 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |
| 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |
| 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |
| 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       |                     |             |             |
| 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       |                     |             |             |
| 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       |                     |             |             |
| 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       |                     |             |             |
| 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       |                     |             |             |
| 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       |                     |             |             |
| 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       |                     |             |             |
| 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       |                     |             |             |
| 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       |                     |             |             |
| 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       |                     |             |             |
+---------------------+-------------+------------+-------------+----------+---------------------+-------------+-------------+
```

### RIGHT JOIN

8 BytesHost of service

#### **Function**: Calculate sha384 hash value of the string str.

```sql
SELECT * FROM air RIGHT JOIN sea ON air.temperature = sea.temperature;
```

```
+---------------------+------------+------------+-------------+----------+---------------------+-------------+-------------+
| time                | station    | visibility | temperature | pressure | time                | station     | temperature |
+---------------------+------------+------------+-------------+----------+---------------------+-------------+-------------+
| 2022-01-28 13:27:00 | XiaoMaiDao | 67         | 62          | 59       | 2022-01-28 13:18:00 | LianYunGang | 62          |
|                     |            |            |             |          | 2022-01-28 13:21:00 | LianYunGang | 63          |
|                     |            |            |             |          | 2022-01-28 13:24:00 | LianYunGang | 77          |
|                     |            |            |             |          | 2022-01-28 13:27:00 | LianYunGang | 54          |
|                     |            |            |             |          | 2022-01-28 13:30:00 | LianYunGang | 55          |
|                     |            |            |             |          | 2022-01-28 13:33:00 | LianYunGang | 64          |
|                     |            |            |             |          | 2022-01-28 13:36:00 | LianYunGang | 56          |
|                     |            |            |             |          | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |
|                     |            |            |             |          | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |
|                     |            |            |             |          | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |
| 2022-01-28 13:24:00 | XiaoMaiDao | 50         | 78          | 66       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |
| 2022-01-28 13:24:00 | XiaoMaiDao | 50         | 78          | 66       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |
|                     |            |            |             |          | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |
| 2022-01-28 13:30:00 | XiaoMaiDao | 65         | 79          | 77       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |
+---------------------+------------+------------+-------------+----------+---------------------+-------------+-------------+
```

### FULL JOIN

[Data Source](#sample-data)
It will display all lines that connect to the left and right and will create empty values where no match exists on either side of the connection.

#### **Function**: Calculate sha384 hash value of the string str.

```sql
SELECT * FROM air FULL JOIN sea ON air.temperature = sea.temperature;
```

```
+---------------------+-------------+------------+-------------+----------+---------------------+-------------+-------------+
| time                | station     | visibility | temperature | pressure | time                | station     | temperature |
+---------------------+-------------+------------+-------------+----------+---------------------+-------------+-------------+
| 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:18:00 | LianYunGang | 62          |
|                     |             |            |             |          | 2022-01-28 13:21:00 | LianYunGang | 63          |
|                     |             |            |             |          | 2022-01-28 13:24:00 | LianYunGang | 77          |
|                     |             |            |             |          | 2022-01-28 13:27:00 | LianYunGang | 54          |
|                     |             |            |             |          | 2022-01-28 13:30:00 | LianYunGang | 55          |
|                     |             |            |             |          | 2022-01-28 13:33:00 | LianYunGang | 64          |
|                     |             |            |             |          | 2022-01-28 13:36:00 | LianYunGang | 56          |
|                     |             |            |             |          | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |
|                     |             |            |             |          | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |
|                     |             |            |             |          | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |
| 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |
| 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |
|                     |             |            |             |          | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |
| 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |
| 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       |                     |             |             |
| 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       |                     |             |             |
| 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       |                     |             |             |
| 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       |                     |             |             |
| 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       |                     |             |             |
| 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       |                     |             |             |
| 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       |                     |             |             |
| 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       |                     |             |             |
| 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       |                     |             |             |
| 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       |                     |             |             |
+---------------------+-------------+------------+-------------+----------+---------------------+-------------+-------------+
```

[//]: # "### CROSS JOIN"

[//]: #

[//]: # "交叉连接产生一个笛卡尔积，它将连接左侧的每一行与连接右侧的每一行相匹配。"

[//]: #

[//]: # "```sql"

[//]: # "SELECT * FROM air CROSS JOIN sea;"

[//]: # "```"

[//]: # "    +---------------------+-------------+------------+-------------+----------+---------------------+-------------+-------------+"

[//]: # "    | time                | station     | visibility | temperature | pressure | time                | station     | temperature |"

[//]: # "    +---------------------+-------------+------------+-------------+----------+---------------------+-------------+-------------+"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    +---------------------+-------------+------------+-------------+----------+---------------------+-------------+-------------+"

### Struct {&#xA;time: List[Timestamp], -- ms&#xA;value: List[Double],&#xA;resolution: Int Unsigned,&#xA;}

y: double

#### **Function**:  Calculate sha256 hash value of the string str.

```sql
SELECT station, AVG(temperature) 
FROM air 
GROUP BY station;
```

```
+-------------+----------------------+
| station     | AVG(air.temperature) |
+-------------+----------------------+
| XiaoMaiDao  | 69.14285714285714    |
| LianYunGang | 72.16666666666667    |
+-------------+----------------------+
```

### When the time unit is ns, the ratio unit is /ns,

#### Table storage engine. External and internal tskv tables supported now

```sql
group_by_clause 
[ HAVING condition ];
```

Note

The returned result set skips m records. default m=0.

Note

Note

#### **Function**: Return the rightmost len characters in the string str.

```sql
SELECT station, AVG(temperature)  AS avg_t 
FROM air 
GROUP BY station 
HAVING avg_t > 70;
```

```
+-------------+-------------------+
| station     | avg_t             |
+-------------+-------------------+
| LianYunGang | 72.16666666666667 |
+-------------+-------------------+
```

### Please note that data in the TIME column can be represented by either a time string or a numeric timestamp.

+---------------------+------------+----------+
\| time                | station    | pressure |
+---------------------+------------+----------+
\| 2023-01-14T16:00:00 | XiaoMaiDao | 63.0     |
\| 2023-01-14T16:03:00 | XiaoMaiDao | 58.0     |
\| 2023-01-14T16:06:00 | XiaoMaiDao | 65.0     |
\| 2023-01-14T16:09:00 | XiaoMaiDao | 52.0     |
+---------------------+------------+----------+

[//]: # "### **GROUPING SETS**"

[//]: # "GROUPING SETS 是可以将行分组在一起的一组或一组列。"

[//]: # "您可以简单地使用 GROUPING SETS，而不是编写多个查询并将结果与 UNION 组合。"

[//]: # "CnosDB 中的 GROUPING SETS 可以被认为是 GROUP BY 子句的扩展。 它允许您在同一查询中定义多个分组集。"

[//]: # "让我们看看如下用例，看它如何等同于具有多个 UNION ALL 子句的 GROUP BY。"

[//]: # "```sql"

[//]: # "SELECT * FROM shipping;"

[//]: # "--  origin_state | origin_zip | destination_state | destination_zip | package_weight"

[//]: # "-- --------------+------------+-------------------+-----------------+----------------"

[//]: # "--  California   |      94131 | New Jersey        |            8648 |             13"

[//]: # "--  California   |      94131 | New Jersey        |            8540 |             42"

[//]: # "--  New Jersey   |       7081 | Connecticut       |            6708 |            225"

[//]: # "--  California   |      90210 | Connecticut       |            6927 |           1337"

[//]: # "--  California   |      94131 | Colorado          |           80302 |              5"

[//]: # "--  New York     |      10002 | New Jersey        |            8540 |              3"

[//]: # "-- (6 rows)"

[//]: # "```"

[//]: # "如下查询演示了GROUPING SETS的语义"

[//]: # "```sql"

[//]: # "SELECT origin_state, origin_zip, destination_state, sum(package_weight)"

[//]: # "FROM shipping"

[//]: # "GROUP BY GROUPING SETS ( (origin_state),"

[//]: # "(origin_state, origin_zip),"

[//]: # "(destination_state));"

[//]: # "--  origin_state | origin_zip | destination_state | _col0"

[//]: # "--  --------------+------------+-------------------+-------"

[//]: # "--   New Jersey   | NULL       | NULL              |   225"

[//]: # "--   California   | NULL       | NULL              |  1397"

[//]: # "--   New York     | NULL       | NULL              |     3"

[//]: # "--   California   |      90210 | NULL              |  1337"

[//]: # "--   California   |      94131 | NULL              |    60"

[//]: # "--   New Jersey   |       7081 | NULL              |   225"

[//]: # "--   New York     |      10002 | NULL              |     3"

[//]: # "--   NULL         | NULL       | Colorado          |     5"

[//]: # "--   NULL         | NULL       | New Jersey        |    58"

[//]: # "--   NULL         | NULL       | Connecticut       |  1562"

[//]: # "--  (10 rows)"

[//]: # "```"

[//]: # "上述查询等价于"

[//]: # "```sql"

[//]: # "SELECT origin_state, NULL, NULL, sum(package_weight)"

[//]: # "FROM shipping GROUP BY origin_state"

[//]: # "UNION ALL"

[//]: # "SELECT origin_state, origin_zip, NULL, sum(package_weight)"

[//]: # "FROM shipping GROUP BY origin_state, origin_zip"

[//]: # "UNION ALL"

[//]: # "SELECT NULL, NULL, destination_state, sum(package_weight)"

[//]: # "FROM shipping GROUP BY destination_state;"

[//]: # "```"

### **ROLLUP**

[//]: # "与 GROUPING SETS 类似，"

Description

Note

If your group by child is：

#### -- station is a Tag column, temperature is a Field Namecolumn.&#xA;SELECT station, temperature FROM air;

```sql
SELECT ...
FROM ...
GROUP BY ROLLUP(column_1,column_2);
```

Avoid performing update tag operations while writing data, which may cause series conflicts.

#### **Function**: Returns the approximate percentile (TDigest) of the input value x, where p is the percentile and is a 64 bit floating point number between 0 and 1 (including 1).

```sql
SELECT ...
FROM ...


UNION ALL

SELECT ...
FROM ...
GROUP BY
column_1

UNION ALL

SELECT ...
FROM ...
GROUP BY
column_1, column2;
```

[//]: # "GROUP BY GROUPING SETS("

[//]: # "    (column_1, column_2),"

[//]: # "    (column_1),"

[//]: # "    ()"

[//]: # ")"

Other Data Types Type

**Function**: Return the position of a substring in a specified string. The sequence in ROLLUP is important.

#### **Function**: Return the rightmost len characters in the string str.

```sql
SELECT station, visibility, avg(temperature) 
FROM air 
GROUP BY ROLLUP (station, visibility);
```

```
+-------------+------------+----------------------+
| station     | visibility | AVG(air.temperature) |
+-------------+------------+----------------------+
|             |            | 70.53846153846153    |
| XiaoMaiDao  |            | 69.14285714285714    |
| LianYunGang |            | 72.16666666666667    |
| XiaoMaiDao  | 56         | 69                   |
| XiaoMaiDao  | 50         | 78                   |
| XiaoMaiDao  | 67         | 62                   |
| XiaoMaiDao  | 65         | 79                   |
| XiaoMaiDao  | 53         | 53                   |
| XiaoMaiDao  | 74         | 72                   |
| XiaoMaiDao  | 71         | 71                   |
| LianYunGang | 78         | 69                   |
| LianYunGang | 79         | 80                   |
| LianYunGang | 59         | 72                   |
| LianYunGang | 67         | 70                   |
| LianYunGang | 80         | 70                   |
+-------------+------------+----------------------+
```

### **CUBE**

Like ROLLUP, CUBE is an extension of GROUP BY sentences. Time the data file saved

[//]: # "CUBE 就像结合了 GROUPING SETS 和 ROLLUP。"

Measurement valueThe group will start with (A, B, C)

`CROSS JOIN` is not supported currently.

```sql
SELECT ... 
FROM ...
GROUP BY CUBE (column1, column2);
```

`EXPLAIN ANALYZE` executes the query and displays the execution plan of the query.

```sql
SELECT ...
FROM ...
GROUP BY column1

UNION ALL

SELECT ...
FROM ...
GROUP BY column2

UNION ALL

SELECT ...
FROM ...
GROUP BY column1, column2

UNION ALL

SELECT ...
FROM ...
;
```

#### **Function**: Return the leftmost len characters in str.

```sql
SELECT station, visibility, avg(temperature) 
FROM air 
GROUP BY CUBE (station, visibility);
```

```
+-------------+------------+----------------------+
| station     | visibility | AVG(air.temperature) |
+-------------+------------+----------------------+
| XiaoMaiDao  | 56         | 69                   |
| XiaoMaiDao  | 50         | 78                   |
| XiaoMaiDao  | 67         | 62                   |
| XiaoMaiDao  | 65         | 79                   |
| XiaoMaiDao  | 53         | 53                   |
| XiaoMaiDao  | 74         | 72                   |
| XiaoMaiDao  | 71         | 71                   |
| LianYunGang | 78         | 69                   |
| LianYunGang | 79         | 80                   |
| LianYunGang | 59         | 72                   |
| LianYunGang | 67         | 70                   |
| LianYunGang | 80         | 70                   |
|             | 56         | 69                   |
|             | 50         | 78                   |
|             | 67         | 66                   |
|             | 65         | 79                   |
|             | 53         | 53                   |
|             | 74         | 72                   |
|             | 71         | 71                   |
|             | 78         | 69                   |
|             | 79         | 80                   |
|             | 59         | 72                   |
|             | 80         | 70                   |
| XiaoMaiDao  |            | 69.14285714285714    |
| LianYunGang |            | 72.16666666666667    |
|             |            | 70.53846153846153    |
+-------------+------------+----------------------+
```

[//]: # "### **GROUPING**"

[//]: # "    GROUPING(column_expression)"

[//]: # "Time of record"

[//]: # "当指定`GROUP BY`时，只能在 SELECT 列表、HAVING 和 ORDER BY 子句中使用 GROUPING。"

[//]: # "Time of record"

[//]: # "```sql"

[//]: # "SELECT origin_state,"

[//]: # "origin_zip,"

[//]: # "destination_state,"

[//]: # "sum(package_weight),"

[//]: # "grouping(origin_state, origin_zip, destination_state)"

[//]: # "FROM shipping"

[//]: # "GROUP BY GROUPING SETS ("

[//]: # "    (origin_state),"

[//]: # "    (origin_state, origin_zip),"

[//]: # "    (destination_state)"

[//]: # ");"

[//]: # "-- origin_state | origin_zip | destination_state | _col3 | _col4"

[//]: # "-- --------------+------------+-------------------+-------+-------"

[//]: # "-- California   | NULL       | NULL              |  1397 |     3"

[//]: # "-- New Jersey   | NULL       | NULL              |   225 |     3"

[//]: # "-- New York     | NULL       | NULL              |     3 |     3"

[//]: # "-- California   |      94131 | NULL              |    60 |     1"

[//]: # "-- New Jersey   |       7081 | NULL              |   225 |     1"

[//]: # "-- California   |      90210 | NULL              |  1337 |     1"

[//]: # "-- New York     |      10002 | NULL              |     3 |     1"

[//]: # "-- NULL         | NULL       | New Jersey        |    58 |     6"

[//]: # "-- NULL         | NULL       | Connecticut       |  1562 |     6"

[//]: # "-- NULL         | NULL       | Colorado          |     5 |     6"

[//]: # "-- (10 rows)"

[//]: # "```"

[//]: # "tenant name"

[//]: # "作为 ROLLUP、CUBE 或 GROUPING SETS 操作的结果返回的 NULL 是 NULL 的一种特殊用途。"

[//]: # "这充当结果集中的列占位符，表示全部。"

## You can also see the executing SQL statements using the `SHOW QUERIES` statement, which is a wrapper around the QUERIES schema.

### The storage engine of CnosDB can be regarded as a KV storage, in which Timestamp and Tags constitute the KEY, and Fields constitute a series of values.

### COUNT

#### TTL: represents the saving time of the data file, defaults to 365 days, expressed in data with units. It supports day（d）, hour（h）, minute（m）, such as TTL 10d, TTL 50h, TTL 100m.When no unit, the default is day, such as TTL 30.

```
COUNT(x)
```

image

Description

> Host of service

> 8 Bytes

> Schema Definition

Compare expressions to see if they are less than

Count the duration of a state, or count the duration of a state in a certain period of time.

#### <geometry tag> <wkt data>&#xA;<geometry tag> ::= POINT | LINESTRING | POLYGON | MULTIPOINT |&#xA;MULTILINESTRING | MULTIPOLYGON | GEOMETRYCOLLECTION<wkt data> ::= <point> | <linestring> | <polygon> | <multipoint> |&#xA;<multilinestring> | <multipolygon> | <geometrycollection>

```sql
SELECT COUNT(*) FROM air;
```

```
+-----------------+
| COUNT(UInt8(1)) |
+-----------------+
| 13              |
+-----------------+
```

```sql
SELECT COUNT(temperature) FROM air;
```

```
+------------------------+
| COUNT(air.temperature) |
+------------------------+
| 13                     |
+------------------------+
```

```sql
SELECT COUNT(DISTINCT temperature) FROM air;
```

```
+---------------------------------+
| COUNT(DISTINCT air.temperature) |
+---------------------------------+
| 10                              |
+---------------------------------+
```

***

### SUM

#### **Function**: Return the approximate median of the input value.

```
SUM(NUMERICS)
```

Time of record

The tenant of the database

Time of record

#### **Function**: Returns the expr values of the offset rows after the current row in the partition.

```sql
SELECT SUM(temperature) FROM air;
```

```
+----------------------+
| SUM(air.temperature) |
+----------------------+
| 917                  |
+----------------------+
```

***

### MIN

#### The time spent in each state is counted, and aggregated into the StateAggData type.

```
MIN(STRING | NUMERICS | TIMESTAMP)
```

Time of record

ID of vnode

Time of record

#### function([...expr] ) OVER ([PARTITION BY expr] [ORDER BY expr] [window_frame]);function: {aggregate_function | analytic_function| aggregate_function}window_frame: { frame_mode frame_start |&#xA;frame_mode BETWEEN frame_start AND frame_end } }&#xA;frame_mode: {RANGE | ROWS}frame_start: {UNBOUNDED PRECEDING | offset_start PRECEDING | CURRENT ROW | offset_start FOLLOWING }frame_end: {offset_stop PRECEDING | CURRENT ROW | offset_stop FOLLOWING | UNBOUNDED FOLLOWING}

```sql
 SELECT MIN(time), MIN(station), MIN(temperature) FROM air;
```

```
+---------------------+------------------+----------------------+
| MIN(air.time)       | MIN(air.station) | MIN(air.temperature) |
+---------------------+------------------+----------------------+
| 2022-01-28T13:21:00 | LianYunGang      | 53                   |
+---------------------+------------------+----------------------+
```

***

### MAX

#### BIGINT/BIGINT UNSIGNED: DELTA, QUANTILE, SDT, DEADBAND, NULL

```
MAX(STRINGS | NUMERICS | TIMESTAMPS)
```

Time of record

The database to which the vnode belongs

The tenant of the database

#### UPDATE table_name SET ( assignment_clause [, ...] ) where_clause&#xA;assignment clause :&#xA;tag_name = value_expression

```sql
SELECT MAX(time), MAX(station), MAX(temperature) FROM air;
```

```
+---------------------+------------------+----------------------+
| MAX(air.time)       | MAX(air.station) | MAX(air.temperature) |
+---------------------+------------------+----------------------+
| 2022-01-28T13:39:00 | XiaoMaiDao       | 80                   |
+---------------------+------------------+----------------------+
```

***

### AVG

#### **Function**: Return its first non null parameter. Null is returned only when all parameters are null. When retrieving data for display, it is often used to replace the default value with a null value.

```
AVG(NUMERICS)
```

CTE in the same WITH clause must have a unique name.

The tenant of the database

The tenant of the database

#### **Notice**:  GROUPING 用于区分 ROLLUP、CUBE 或 GROUPING SETS 返回的空值与标准空值。

```sql
SELECT AVG(temperature) FROM air;
```

```
+----------------------+
| AVG(air.temperature) |
+----------------------+
| 70.53846153846153    |
+----------------------+
```

***

### ARRAY_AGG

#### In the streaming down-sampling scenario, the source table interval is one minute, and the down-sampling interval is one hour

```
ARRAY_AGG(expr)
```

ID of user which commit the SQL

Evaluate the left expression first, and if it's true, evaluate the right expression, both true and true

The tenant of the database

#### **Function**: Capitalize the first letter of each word in the parameter.

```sql
SELECT ARRAY_AGG(temperature) from air;
```

```
+------------------------------------------------------+
| ARRAYAGG(air.temperature)                            |
+------------------------------------------------------+
| [69, 78, 62, 79, 53, 72, 71, 69, 80, 74, 70, 70, 70] |
+------------------------------------------------------+
```

Description

### FIRST

```
first(time,  value)
```

Description

Count the state you are in at a certain time.

- time: Timestamp

- value: any

Time spent in the error, running, or start state.

#### After the keyword `SELECT`, you can use `DISTINCT` to remove duplicate fields and return only the values after duplicate removal. Using ALL returns all duplicate values in the field. When this option is not specified, the default value is `ALL`.

```sql
select first(time, pressure) from air;
```

```
+------------------------------+
| first(air.time,air.pressure) |
+------------------------------+
| 63.0                         |
+------------------------------+
```

### LAST

```
last(time,  value)
```

Description

If the subexpression is true, the whole expression is false, and if the whole expression is false, the whole expression is true

- time: Timestamp

- value: any

The tenant of the database

#### The db and table arguments specify the source table.

```sql
select last(time, pressure) from air;
```

```
+-----------------------------+
| last(air.time,air.pressure) |
+-----------------------------+
| 55.0                        |
+-----------------------------+
```

### MODE

```
mode(value)
```

Calculate the number of numbers in one column.

Order of the column in table

The tenant of the database

#### Some geometries don't support area calculation and return 0 for these geometries: Point, MultiPoint, LineString, MultiLineString, Line.&#xA;If the content of the argument is of an invalid format, the return value is NULL.

```sql
select mode(pressure) from air;
```

```
+--------------------+
| mode(air.pressure) |
+--------------------+
| 69.0               |
+--------------------+
```

### INCREASE

```
increase(time, value order by time)
```

**Return Type**: any, the same type as the state of compact_state_agg.

The UNION clause is used to combine the analysis results of multiple SELECT statements.

Name of user which commit the SQL

Get the largest timestamp in the Gauge

```sql
CREATE DATABASE IF NOT EXISTS TEST_INCREASE;
ALTER DATABASE TEST_INCREASE SET TTL '100000D';
CREATE TABLE IF NOT EXISTS test_increase.test_increase(f0 BIGINT, TAGS(t0));
INSERT INTO test_increase.test_increase(time, t0, f0)
VALUES
    ('1999-12-31 00:00:00.000', 'a', 1),
    ('1999-12-31 00:00:00.005', 'a', 2),
    ('1999-12-31 00:00:00.010', 'a', 3),
    ('1999-12-31 00:00:00.015', 'a', 4),
    ('1999-12-31 00:00:00.020', 'a', 5),
    ('1999-12-31 00:00:00.025', 'a', 6),
    ('1999-12-31 00:00:00.030', 'a', 7),
    ('1999-12-31 00:00:00.035', 'a', 8),
    ('1999-12-31 00:00:00.000', 'b', 1),
    ('1999-12-31 00:00:00.005', 'b', 2),
    ('1999-12-31 00:00:00.010', 'b', 3),
    ('1999-12-31 00:00:00.015', 'b', 4),
    ('1999-12-31 00:00:00.020', 'b', 1),
    ('1999-12-31 00:00:00.025', 'b', 2),
    ('1999-12-31 00:00:00.030', 'b', 3),
    ('1999-12-31 00:00:00.035', 'b', 4);
SELECT t0, INCREASE(time, f0 ORDER BY time) AS increase
FROM test_increase.test_increase GROUP BY t0 ORDER BY t0;
```

```
+----+----------+
| t0 | increase |
+----+----------+
| a  | 7        |
| b  | 7        |
+----+----------+
```

### `INTERVAL '1 YEAR 1 DAY 1 HOUR 1 MINUTE'` One year, one day, one hour, one minute

### VAR | VAR_SAMP

#### **Function**: Return the average value of the selected element.

```
VAR(NUMERICS)
```

CnosDB requires that the inserted data column must have a timestamp, and the VALUES list must be a [constant](#constant).
If a column is not selected, the value is `NULL`.

DROP STREAM TABLE

When the time unit is s, the ratio unit is /s

#### delete from air where station = 'LianYunGang' and time < '2023-01-14T16:03:00';

```sql
SELECT VAR(temperature) FROM air;
```

```
+---------------------------+
| VARIANCE(air.temperature) |
+---------------------------+
| 51.43589743589741         |
+---------------------------+
```

***

### VAR_POP

#### **Function**: Return the minimum value of the selected element.

```
VAR_POP(NUMERICS)
```

We can get the `query_id` through [`SHOW QUERIES`](#show-queries).

CREATE STREAM TABLE

Sum up the time taken for each state.

#### **Function**: Return the str with the trailing character trimstr deleted. trimstr is a blank character by default.

```
SELECT VAR_POP(temperature) FROM air;
```

```
+------------------------------+
| VARIANCEPOP(air.temperature) |
+------------------------------+
| 47.47928994082838            |
+------------------------------+
```

***

### STDDEV | STDDEV_SAMP

```
STDDEV(NUMERICS)
```

Field Name

If in cnosdb cli, enter `\q` to exit.

First evaluate the left expression, and if it is false, evaluate the right expression, both false and false

#### **Function**: 把有序的数据集合平均分配到n个桶中,将桶号分配给每一行。

```sql
SELECT STDDEV(temperature) FROM air;
```

```
+-------------------------+
| STDDEV(air.temperature) |
+-------------------------+
| 7.1718824192744135      |
+-------------------------+
```

***

### STDDEV_POP

#### **Function**: Convert to a microsecond-level timestamp.

```
STDDEV_POP(NUMERICS)
```

Field Name

Create stream table

Configure of tenant in json

#### The time column cannot be `NULL`, and the Tag column and Field column can be `NULL`.

```sql
SELECT STDDEV_POP(temperature) FROM air;
```

```
+----------------------------+
| STDDEVPOP(air.temperature) |
+----------------------------+
| 6.890521746633442          |
+----------------------------+
```

***

### COVAR | COVAR_SAMP

#### `1997-01-31T09:26:56.123Z` # Standard RCF3339, UTC time zone

```
COVAR(NUMERICS, NUMERICS)
```

Field Name

first_time

Compares expressions for greater than or equal to

#### `RANK`, `DENSE_RANK`, `ROW_NUMBER` need ORDER BY Clause.

```sql
SELECT COVAR(temperature, pressure) FROM air;
```

```
+------------------------------------------+
| COVARIANCE(air.temperature,air.pressure) |
+------------------------------------------+
| -5.121794871794841                       |
+------------------------------------------+
```

***

### COVAR_POP

#### INSERT air_visibility (TIME, station, visibility)&#xA;SELECT TIME, station, visibility FROM air;

```
COVAR_POP(NUMERICS, NUMERICS)
```

Field Name

Stream Queries

Time that SQL costs

#### **Function**: Return approximations of different input values (HyperLogLog).

```sql
SELECT COVAR_POP(temperature, pressure) FROM air;
```

```
+---------------------------------------------+
| COVARIANCEPOP(air.temperature,air.pressure) |
+---------------------------------------------+
| -4.727810650887546                          |
+---------------------------------------------+
```

***

### CORR

#### You can use window functions (analysis functions) in CnosDB to flexibly analyze and process data of specified window columns. The command formats, parameter descriptions and examples of window functions supported by CnosDB are shown below to guide you to use window functions to complete development.

```
CORR**(NUMERICS, NUMERICS)
```

Percision of database

Tenant name of the table

Time Functions

#### A JSON string that records all parameters of the table

```sql
SELECT CORR(temperature, pressure) FROM air;
```

```
+-------------------------------------------+
| CORRELATION(air.temperature,air.pressure) |
+-------------------------------------------+
| -0.07955796767766017                      |
+-------------------------------------------+
```

### You can use `CREATE TABLE`  to create tables.

### APPROX_DISTINCT

#### You can then use access and summary functions for this intermediate aggregate data.

```
APPROX_DISTINCT(x)
```

Field Name

Compare expressions for greater than

Key in (1666165200290401000, 'XiaoMaiDao') visibility-value has changed, change to 66.

#### **Function**: Returns the expr values of the offset rows before the current row in the partition.

```sql
SELECT APPROX_DISTINCT(station) FROM air;
```

```
+-----------------------------+
| APPROXDISTINCT(air.station) |
+-----------------------------+
| 2                           |
+-----------------------------+
```

***

### APPROX_PERCENTILE_CONT

#### **Function**: Returns the last value in the current window.

```
APPROX_PERCENTILE_CONT(x, p)  
```

Configure of users in json

Explanation

Time Interval

#### Binary data,can be converted to STRING using Cast clause.

```sql
SELECT APPROX_PERCENTILE_CONT(temperature, 0.1) FROM air;
```

```
+----------------------------------------------------+
| APPROXPERCENTILECONT(air.temperature,Float64(0.1)) |
+----------------------------------------------------+
| 60.4                                               |
+----------------------------------------------------+
```

***

### APPROX_PERCENTILE_CONT_WITH_WEIGHT

#### **Function**: Returns the bit length of string data or the bit size of binary data.

```
APPROX_PERCENTILE_CONT_WITH_WEIGHT(x, w, p)  
```

Field Name

ID of SQL

Field Name

When len is a negative number, len represents 0. When len is too large, function execution fails.

#### **Function**: Returns str, in which the leading characters in trimstr are deleted. The default trimestr is blank character.

```sql
SELECT APPROX_PERCENTILE_CONT_WITH_WEIGHT(temperature,2, 0.1) FROM air;
```

```
+-----------------------------------------------------------------------+
| APPROXPERCENTILECONTWITHWEIGHT(air.temperature,Int64(2),Float64(0.1)) |
+-----------------------------------------------------------------------+
| 54.35                                                                 |
+-----------------------------------------------------------------------+
```

***

### APPROX_MEDIAN(NUMERICS)

#### Note: `CAST (BIGINT AS TIMESTAMP)` is a timestamp converted to nanosecond, as follows:

```
APPROX_MEDIAN(NUMERICS)
```

Database name of the table

If you GRUOP BY Clause is as follows:

Analysis Window Functions

#### **Function**: Return the length of the specified string in characters.

```sql
SELECT APPROX_MEDIAN(temperature) FROM air;
```

```
+-------------------------------+
| APPROXMEDIAN(air.temperature) |
+-------------------------------+
| 70                            |
+-------------------------------+
```

[//]: # "----------------"

[//]: # "### **GROUPING**(x)"

[//]: # "    GROUPING(x)"

[//]: # "Note"

[//]: # "Point"

[//]: # "Unit:"

### SAMPLE

#### **Function**: Returns the first value in a set of values, usually an ordered set.

```
SAMPLE(<column_key>, <N>)
```

It is equivalent to the following statement:

Create stream query statement

- +-----------------------------------------------+
  \| idelta_left(gauge_agg(air.time,air.pressure)) |
  +-----------------------------------------------+
  \| -5.0                                          |
  +-----------------------------------------------+

- CREATE TABLE air_visibility (
  visibility DOUBLE,
  TAGS(station)
  );

INTERVAL '1 YEAR' is not 365 days or 366 days, but 12-months.
INTERVAL '1 MONTH' is not 29 days or 31 days, but 30 days.

#### **Function**: Return the maximum value in the selected element.

```sql
select sample(visibility, 5) from air;
```

```
+--------------------------------------+
| sample(air.visibility,Int64(5))      |
+--------------------------------------+
| [65.0, 74.0, 76.0, 77.0, 72.0, 77.0] |
+--------------------------------------+
```

### ASAP_SMOOTH

```
asap_smooth(time, value, resolution order by time)
```

You can refer to [function](#functions).
Tenant name of the table

Each SELECT clause in the UNION must have the same number of columns, and the corresponding columns have the same data type.

- time: Timestamp

- value: Double

- Field Name

The following data types can't be stored directly, but can appear in SQL expressions.

```
Example
```

#### **Function**: Return e to the x power.

```sql
select asap_smooth(time, pressure, 10) from air group by date_trunc('month', time);
```

```
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| asap_smooth(air.time,air.pressure,Int64(10))                                                                                                                                                                                                                                                                                                                                                                                                   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| {time: [2023-01-14T16:00:00, 2023-01-16T14:13:00, 2023-01-18T12:26:00, 2023-01-20T10:39:00, 2023-01-22T08:52:00, 2023-01-24T07:05:00, 2023-01-26T05:18:00, 2023-01-28T03:31:00, 2023-01-30T01:44:00, 2023-01-31T23:57:00], value: [64.79507211538461, 65.31009615384616, 65.25841346153847, 64.8485576923077, 65.09495192307692, 65.02524038461539, 64.8389423076923, 65.2421875, 65.02103365384616, 65.1141826923077], resolution: 10}        |
| {time: [2023-02-01T00:00:00, 2023-02-04T02:39:40, 2023-02-07T05:19:20, 2023-02-10T07:59:00, 2023-02-13T10:38:40, 2023-02-16T13:18:20, 2023-02-19T15:58:00, 2023-02-22T18:37:40, 2023-02-25T21:17:20, 2023-02-28T23:57:00], value: [65.20982142857143, 64.90625, 64.94828869047619, 64.97916666666667, 64.88504464285714, 64.8203125, 64.64434523809524, 64.88802083333333, 65.0, 64.76004464285714], resolution: 10}                           |
| {time: [2023-03-01T00:00:00, 2023-03-02T12:26:40, 2023-03-04T00:53:20, 2023-03-05T13:20:00, 2023-03-07T01:46:40, 2023-03-08T14:13:20, 2023-03-10T02:40:00, 2023-03-11T15:06:40, 2023-03-13T03:33:20, 2023-03-14T16:00:00], value: [65.29115853658537, 64.58307926829268, 64.7530487804878, 64.76753048780488, 65.14405487804878, 65.4298780487805, 65.1920731707317, 65.10365853658537, 64.86356707317073, 64.83841463414635], resolution: 10} |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
```

## The result of the query is as follows:

### stats_agg

Implement linear regression analysis for two-dimensional data, such as calculation of relevant coefficients and composites.
Common statistical data for each dimension can also be calculated separately, such as averages and standard deviations.
`INTERVAL '1 DECADES' ` One decade(10 years)

Operator

#### stats_agg

```
stats_agg(y, x)
```

offset type is BIGINT. When offset is negative, the values are returned from the last offset lines, defaults to 1.

Compression algorithm that the column uses

- APPROX_PERCENTILE_CONT(x, p) is equivalent to APPROX_PERCENTILE_CONT_WITH_WEIGHT(x, 1, p)
- The expression column in the WEHER clause can only be the tag column or the time column, and the expression in the ORDER BY clause can only be the key.

Constant

```
{ 
  n: bigint,   -- count 
  sx: double,  -- sum(x)- sum(x)
  sx2: double, -- sum((x-sx/n)^2) (sum of squares)
  sx3: double, -- sum((x-sx/n)^3)
  sx4: double, -- sum((x-sx/n)^4)
  sy: double,  -- sum(y)
  sy2: double, -- sum((y-sy/n)^2) (sum of squares)
  sy3: double, -- sum((y-sy/n)^3)
  sy4: double, -- sum((y-sy/n)^4)
  sxy: double, -- sum((x-sx/n)*(y-sy/n)) (sum of products) 
}
```

#### **Function**: Remove blank characters at the begin and end of str.

```sql
create table if not exists test_stats(x bigint, y bigint);
alter database public set ttl '1000000d';
insert into test_stats(time, x, y) values
(1, 1, 1),
(2, 1, 2),
(3, 1, 3),
(4, 1, 4),
(5, 1, 5),
(6, 2, 1),
(7, 2, 2),
(8, 2, 3),
(9, 2, 4),
(10, 2, 5);
```

```sql
select stats_agg(y, x) from test_stats;
```

```
+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| stats_agg(test_stats.y,test_stats.x)                                                                                                                       |
+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| {n: 10, sx: 15.0, sx2: 2.5, sx3: -2.7755575615628914e-16, sx4: 0.6249999999999999, sy: 30.0, sy2: 20.0, sy3: -1.7763568394002505e-15, sy4: 68.0, sxy: 0.0} |
+------------------------------------------------------------------------------------------------------------------------------------------------------------+
```

#### num_vals

`INTERVAL '1 HOUR'` One hour

Rank Functions

```sql
select num_vals(stats_agg(y, x)) from test_stats;
```

```
+------------------------------------------------+
| num_vals(stats_agg(test_stats.y,test_stats.x)) |
+------------------------------------------------+
| 10                                             |
+------------------------------------------------+
```

#### average_y, average_x

Description

Functions

```sql
select average_x(stats_agg(y, x)) from test_stats;
```

```
+-------------------------------------------------+
| average_x(stats_agg(test_stats.y,test_stats.x)) |
+-------------------------------------------------+
| 1.5                                             |
+-------------------------------------------------+
```

#### sum_y, sum_x

This page only shows `INSERT` related syntax.

Functions

```sql
select sum_x(stats_agg(y, x)) from test_stats;
```

```
+---------------------------------------------+
| sum_x(stats_agg(test_stats.y,test_stats.x)) |
+---------------------------------------------+
| 15.0                                        |
+---------------------------------------------+
```

#### stddev_samp_y, stddev_samp_x

`time_column` is Timestamp.

If you need to track the time to enter and exit each state, use the state_agg function.

```sql
select stddev_samp_x(stats_agg(y, x)) from test_stats;
```

```
+-----------------------------------------------------+
| stddev_samp_x(stats_agg(test_stats.y,test_stats.x)) |
+-----------------------------------------------------+
| 0.5270462766947299                                  |
+-----------------------------------------------------+
```

#### stddev_pop_y, stddev_pop_x

**OFFSET Clause**

Operator

```sql
select stddev_pop_x(stats_agg(y, x)) from test_stats;
```

```
+----------------------------------------------------+
| stddev_pop_x(stats_agg(test_stats.y,test_stats.x)) |
+----------------------------------------------------+
| 0.5                                                |
+----------------------------------------------------+
```

#### var_samp_y, var_samp_x

Description

Operator

```sql
select var_samp_x(stats_agg(y, x)) from test_stats;
```

```
+--------------------------------------------------+
| var_samp_x(stats_agg(test_stats.y,test_stats.x)) |
+--------------------------------------------------+
| 0.2777777777777778                               |
+--------------------------------------------------+
```

#### var_pop_y, var_pop_x

UTF-8 Encoded String

For more information about timezone, please refer to [Timestamp](#timestamp-constant-syntax).

```sql
select var_pop_x(stats_agg(y, x)) from test_stats;
```

```
+-------------------------------------------------+
| var_pop_x(stats_agg(test_stats.y,test_stats.x)) |
+-------------------------------------------------+
| 0.25                                            |
+-------------------------------------------------+
```

#### skewness_samp_y, skewness_samp_x

Description

Disk size occupied by the vnode

```sql
select skewness_samp_x(stats_agg(y, x)) from test_stats;
```

```
+-------------------------------------------------------+
| skewness_samp_x(stats_agg(test_stats.y,test_stats.x)) |
+-------------------------------------------------------+
| -2.1065000811460203e-16                               |
+-------------------------------------------------------+
```

#### skewness_pop_y, skewness_pop_x

Description

Measurement value

```sql
select skewness_pop_x(stats_agg(y, x)) from test_stats;
```

```
+------------------------------------------------------+
| skewness_pop_x(stats_agg(test_stats.y,test_stats.x)) |
+------------------------------------------------------+
| -2.220446049250313e-16                               |
+------------------------------------------------------+
```

#### kurtosis_samp_y, kurtosis_samp_x

**`IN` Expression**

Measurement value

```sql
select kurtosis_samp_x(stats_agg(y, x)) from test_stats;
```

```
+-------------------------------------------------------+
| kurtosis_samp_x(stats_agg(test_stats.y,test_stats.x)) |
+-------------------------------------------------------+
| 0.8999999999999998                                    |
+-------------------------------------------------------+
```

#### kurtosis_pop_y, kurtosis_pop_x

Calculate the peak of the two-dimensional aggregation and specify the dimension in a way that is population.

The IN operator determines whether any value in the list is equal to the expression.

```sql
select kurtosis_pop_x(stats_agg(y, x)) from test_stats;
```

```
+------------------------------------------------------+
| kurtosis_pop_x(stats_agg(test_stats.y,test_stats.x)) |
+------------------------------------------------------+
| 0.9999999999999998                                   |
+------------------------------------------------------+
```

#### correlation

`EXPLAIN` is only used to display the execution plan of a query, and does not execute the query.

Comparing expressions for equality

```sql
select correlation(stats_agg(y, x)) from test_stats;
```

```
+---------------------------------------------------+
| correlation(stats_agg(test_stats.y,test_stats.x)) |
+---------------------------------------------------+
| 0.0                                               |
+---------------------------------------------------+
```

#### covariance_samp, covariance_pop

Calculate the syntax difference after the two-dimensional statistical aggregation.

Aggregate Function

```sql
select covariance_samp(stats_agg(y, x)) from test_stats;
```

```
+-------------------------------------------------------+
| covariance_samp(stats_agg(test_stats.y,test_stats.x)) |
+-------------------------------------------------------+
| 0.0                                                   |
+-------------------------------------------------------+
```

```sql
select covariance_pop(stats_agg(y, x)) from test_stats;
```

```
+------------------------------------------------------+
| covariance_pop(stats_agg(test_stats.y,test_stats.x)) |
+------------------------------------------------------+
| 0.0                                                  |
+------------------------------------------------------+
```

#### determination_coeff

`OFFSET` can be used with the `LIMIT` statement to specify the number of lines to skip. The format is `LIMIT n OFFSET m`.
`LIMIT n` controls the output of n rows of data, and `OFFSET m` indicates the number of rows skipped before starting to return data. OFFSET 0 has the same effect as omitting the OFFSET clause.

Linestring

```sql
select determination_coeff(stats_agg(y, x)) from test_stats;
```

```
+-----------------------------------------------------------+
| determination_coeff(stats_agg(test_stats.y,test_stats.x)) |
+-----------------------------------------------------------+
| 0.0                                                       |
+-----------------------------------------------------------+
```

#### slope

**Return Type**: Timestamp

Linestring

```sql
select slope(stats_agg(y, x)) from test_stats;
```

```
+---------------------------------------------+
| slope(stats_agg(test_stats.y,test_stats.x)) |
+---------------------------------------------+
| 0.0                                         |
+---------------------------------------------+
```

#### intercept

**Parameter Type**: expr type is any type, ignore_ nulls type is BOOLEAN, defaults to false.

`window_duration` is an interval, specifying the window size of the time window.

```sql
select intercept(stats_agg(y, x)) from test_stats;
```

```
+-------------------------------------------------+
| intercept(stats_agg(test_stats.y,test_stats.x)) |
+-------------------------------------------------+
| 3.0                                             |
+-------------------------------------------------+
```

#### x_intercept

Optional. The WITH clause contains one or more commonly used expressions CTE (Common Table Expression).
CTE acts as a temporary table in the current running environment, which you can refer to in subsequent queries.The rules for using CTE are as follows:

Geometry Functions

```sql
select x_intercept(stats_agg(y, x)) from test_stats;
```

```
+---------------------------------------------------+
| x_intercept(stats_agg(test_stats.y,test_stats.x)) |
+---------------------------------------------------+
| -inf                                              |
+---------------------------------------------------+
```

### gauge_agg

Analyze Gauge data.Unlike the Counter, Gauge can be reduced or increased.

#### gauge_agg

```
gauge_agg(time, value)
```

This is the first step in analysing the Gauge data.Description

Role type, custom role or system role

- time: Timestamp

- value: DOUBLE

CnosDB provides geometry functions in the ST_Geometry SQL family. For the Geometry type, see the [Geometry](#geometry) data types section.

```
Struct {
  first: Struct { 
    ts: Timestamp,
    value: Double
  },
  second: Struct { 
    ts: Timestamp,
    value: Double
  }, 
  penultimate: Struct {
    ts: Timestamp, 
    val: Double
  }, 
  last: Struct {
    ts: Timestamp, 
    val: Double
  }, 
  num_elements: Bigint Unsingned 
}
```

#### The double quotation mark format is not supported. Two consecutive '' in

```sql
select gauge_agg(time, pressure) from air group by date_trunc('month', time);
```

```
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| gauge_agg(air.time,air.pressure)                                                                                                                                                                                |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| {first: {ts: 2023-03-01T00:00:00, val: 54.0}, second: {ts: 2023-03-01T00:00:00, val: 59.0}, penultimate: {ts: 2023-03-14T16:00:00, val: 55.0}, last: {ts: 2023-03-14T16:00:00, val: 80.0}, num_elements: 13122} |
| {first: {ts: 2023-01-14T16:00:00, val: 63.0}, second: {ts: 2023-01-14T16:00:00, val: 68.0}, penultimate: {ts: 2023-01-31T23:57:00, val: 77.0}, last: {ts: 2023-01-31T23:57:00, val: 54.0}, num_elements: 16640} |
| {first: {ts: 2023-02-01T00:00:00, val: 54.0}, second: {ts: 2023-02-01T00:00:00, val: 60.0}, penultimate: {ts: 2023-02-28T23:57:00, val: 74.0}, last: {ts: 2023-02-28T23:57:00, val: 59.0}, num_elements: 26880} |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
```

#### delta

Get changes to Gauge over time.`DENSE_RANK` | `RANK` | `PERCENT_RANK` need ORDER BY Clause.

source and origin type are TIMESTAMP.

```sql
select delta(gauge_agg(time, pressure)) from air group by date_trunc('month', time);
```

```
+-----------------------------------------+
| delta(gauge_agg(air.time,air.pressure)) |
+-----------------------------------------+
| 26.0                                    |
| -9.0                                    |
| 5.0                                     |
+-----------------------------------------+
```

#### time_delta

Get duration, the last Gauge time minus the first Gauge time.

state: any is the same type as the state of compact_state_agg.

```sql
select time_delta(gauge_agg(time, pressure)) from air group by date_trunc('month', time);
```

```
+----------------------------------------------------------+
| time_delta(gauge_agg(air.time,air.pressure))             |
+----------------------------------------------------------+
| 0 years 0 mons 13 days 16 hours 0 mins 0.000000000 secs  |
| 0 years 0 mons 17 days 7 hours 57 mins 0.000000000 secs  |
| 0 years 0 mons 27 days 23 hours 57 mins 0.000000000 secs |
+----------------------------------------------------------+
```

#### rate

**Return Type**: BOOLEAN

Function struct is not perfect at present.

```
返回与正则表达式匹配的项
```

Create source table

Create source table

Table type

```sql
select rate(gauge_agg(time, pressure)) from air group by date_trunc('month', time);
```

```
+----------------------------------------+
| rate(gauge_agg(air.time,air.pressure)) |
+----------------------------------------+
| 2.2018970189701897e-14                 |
| 9.349414325974008e-15                  |
| -4.133905465849807e-16                 |
+----------------------------------------+
```

### compact_state_agg

**Advanced Functions**

Database name

`INTERVAL '1 SECONDE'` One second

**Function**: Return an array consisting of all the values of the selected element. The element types must be the same.

`INTERVAL '1 DAY 1'` One day and one secondIt may not perform well on excessive data sets between them.

Field Name

Field Name

#### compact_state_agg

```
compact_state_agg(ts, state)
```

**Function**: Square root of x.

Database name

Multi-point

```
Example
```

#### Limit the number of rows returned from the result set to n, and n must be non-negative.

```sql
alter database public set ttl '1000000d';

create table if not exists states(state STRING);

insert into states values
('2020-01-01 10:00:00', 'starting'),
('2020-01-01 10:30:00', 'running'),
('2020-01-03 16:00:00', 'error'),
('2020-01-03 18:30:00', 'starting'),
('2020-01-03 19:30:00', 'running'),
('2020-01-05 12:00:00', 'stopping');
```

```sql
select compact_state_agg(time, state) from states;
```

```
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| compact_state_agg(states.time,states.state)                                                                                                                                                                                                                                                                                                                                          |
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| {state_duration: [{state: running, duration: 0 years 0 mons 3 days 22 hours 0 mins 0.000000000 secs}, {state: error, duration: 0 years 0 mons 0 days 2 hours 30 mins 0.000000000 secs}, {state: starting, duration: 0 years 0 mons 0 days 1 hours 30 mins 0.000000000 secs}, {state: stopping, duration: 0 years 0 mons 0 days 0 hours 0 mins 0.000000000 secs}], state_periods: []} |
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
```

#### duration_in

```
duration_in(state_agg_data, state [,begin_time, interval_time]) 
```

**Function**: Return the character at the provided UTF-16 code.

If the subexpression is null, the whole expression is false

state_agg_data: StateAggData

Field Name

Total write traffic size

Example

compact_state_agg is designed to handle a relatively small number of states. It may not perform well on datasets with too many states between rows.

#### ---- Prepare data&#xA;DROP DATABASE IF EXISTS gapfill_db;&#xA;CREATE DATABASE gapfill_db WITH TTL '1000000d';&#xA;CREATE TABLE gapfill_db.m2(f0 BIGINT, f1 DOUBLE, TAGS(t0, t1, t2));INSERT gapfill_db.m2(TIME, f0, f1, t0, t1)&#xA;VALUES&#xA;('1999-12-31 00:00:00.000', 111, 444, 'tag11', 'tag21'),&#xA;('1999-12-31 00:00:00.005', 222, 333, 'tag12', 'tag22'),&#xA;('1999-12-31 00:00:00.010', 333, 222, 'tag13', 'tag23'),&#xA;('1999-12-31 00:00:00.015', 444, 111, 'tag14', 'tag24'),&#xA;('1999-12-31 00:00:00.020', 222, 555, 'tag11', 'tag21'),&#xA;('1999-12-31 00:00:00.025', 333, 444, 'tag12', 'tag22'),&#xA;('1999-12-31 00:00:00.030', 444, 333, 'tag13', 'tag23'),&#xA;('1999-12-31 00:00:00.035', 555, 222, 'tag14', 'tag24');

```sql
select duration_in(compact_state_agg(time, state), 'running') from states;
```

```
+--------------------------------------------------------------------------+
| duration_in(compact_state_agg(states.time,states.state),Utf8("running")) |
+--------------------------------------------------------------------------+
| 0 years 0 mons 3 days 22 hours 0 mins 0.000000000 secs                   |
+--------------------------------------------------------------------------+
```

### state_agg

Description

#### state_agg

```
state_agg(ts, state)
```

**HAVING Clause**

```sql
alter database public set ttl '1000000d';

create table if not exists states(state STRING);

insert into states values
('2020-01-01 10:00:00', 'starting'),
('2020-01-01 10:30:00', 'running'),
('2020-01-03 16:00:00', 'error'),
('2020-01-03 18:30:00', 'starting'),
('2020-01-03 19:30:00', 'running'),
('2020-01-05 12:00:00', 'stopping');
```

```sql
select state_agg(time, state) from states;
```

```
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| state_agg(states.time,states.state)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| {state_duration: [{state: starting, duration: 0 years 0 mons 0 days 1 hours 30 mins 0.000000000 secs}, {state: running, duration: 0 years 0 mons 3 days 22 hours 0 mins 0.000000000 secs}, {state: stopping, duration: 0 years 0 mons 0 days 0 hours 0 mins 0.000000000 secs}, {state: error, duration: 0 years 0 mons 0 days 2 hours 30 mins 0.000000000 secs}], state_periods: [{state: starting, periods: [{start_time: 2020-01-01T10:00:00, end_time: 2020-01-01T10:30:00}, {start_time: 2020-01-03T18:30:00, end_time: 2020-01-03T19:30:00}]}, {state: error, periods: [{start_time: 2020-01-03T16:00:00, end_time: 2020-01-03T18:30:00}]}, {state: running, periods: [{start_time: 2020-01-01T10:30:00, end_time: 2020-01-03T16:00:00}, {start_time: 2020-01-03T19:30:00, end_time: 2020-01-05T12:00:00}]}]} |
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
```

#### duration_in

```
duration_in(state_agg_data, state [,begin_time, interval_time]) 
```

Multi-linestring

The `CASE WHEN` expression is used when the expression needs different values depending on the situation.

state_agg_data: StateAggData

Field Name

Total write traffic size

Example

Polygon

#### If the subexpression is null, the whole expression is true

**Parameter Type**: expr type is any type, ignore_ nulls type is BOOLEAN, defaults to false.

```sql
select duration_in(state_agg(time, state), 'running') from states;
```

```
+------------------------------------------------------------------+
| duration_in(state_agg(states.time,states.state),Utf8("running")) |
+------------------------------------------------------------------+
| 0 years 0 mons 3 days 22 hours 0 mins 0.000000000 secs           |
+------------------------------------------------------------------+
```

Polygon

```sql
select duration_in(state_agg(time, state), 'running', Timestamp '2020-01-01 11:00:00') 
from states;
```

```
+----------------------------------------------------------------------------------------------+
| duration_in(state_agg(states.time,states.state),Utf8("running"),Utf8("2020-01-01 11:00:00")) |
+----------------------------------------------------------------------------------------------+
| 0 years 0 mons 3 days 21 hours 30 mins 0.000000000 secs                                      |
+----------------------------------------------------------------------------------------------+
```

**Return Type**: Double

```sql
select duration_in(state_agg(time, state), 'running', Timestamp '2020-01-01 11:00:00', interval '4 day')
from states;
```

```
+-------------------------------------------------------------------------------------------------------------------------------------------+
| duration_in(state_agg(states.time,states.state),Utf8("running"),Utf8("2020-01-01 11:00:00"),IntervalMonthDayNano("73786976294838206464")) |
+-------------------------------------------------------------------------------------------------------------------------------------------+
| 0 years 0 mons 3 days 20 hours 30 mins 0.000000000 secs                                                                                   |
+-------------------------------------------------------------------------------------------------------------------------------------------+
```

#### state_at

```
state_at(state_agg_data, ts)
```

**Function**: Convert the first character in str to its ASCII code and return it.

Numerical type, scientific notation is not supported at present.

- state_agg_data: StateAggData

- ts: Timestamp

Field Name

```sql
select state_at(state_agg(time, state), Timestamp '2020-01-01 10:30:00') from states;
```

```
+---------------------------------------------------------------------------+
| state_at(state_agg(states.time,states.state),Utf8("2020-01-01 10:30:00")) |
+---------------------------------------------------------------------------+
| running                                                                   |
+---------------------------------------------------------------------------+
```

### candlestick_agg

Carry out analysis of financial asset data.Null Value

Geometric type

Unary Operator

select last_time(gauge_agg(time, pressure)) from air;

#### candlestick_agg

```
candlestick_agg(time, price, volume)
```

Description

The type of default should be the consistent with that of expr, defaults to NULL.

- time: Timestamp

- +------------------------------------------------+
  \| idelta_right(gauge_agg(air.time,air.pressure)) |
  +------------------------------------------------+
  \| -7.0                                           |
  +------------------------------------------------+

- The type of default should be the consistent with that of expr, defaults to NULL.

example

```
Struct {
  open: Struct {
    ts:  Timestamp,
    val: Double, 
  },
  close: Struct {
    ts: Timestamp,
    val: Double,
  },   
  high: Struct {
    ts: Timestamp,
    val: Double,
  },
  low: Struct {
    ts: Timestamp,
    val: Double
  },
  volume: Struct {
    vol: Double,
    vwap: Double,
  }
}
```

#### **Function**: Return the Pearson coefficient representing the association between a set of number pairs.

```sql
alter database public set ttl '1000000d';
create table if not exists tick(price bigint ,volume bigint);
insert tick(time, price, volume)
values
    ('1999-12-31 00:00:00.000', 111, 444),
    ('1999-12-31 00:00:00.005', 222, 444),
    ('1999-12-31 00:00:00.010', 333, 222),
    ('1999-12-31 00:00:10.015', 444, 111),
    ('1999-12-31 00:00:10.020', 222, 555),
    ('1999-12-31 00:10:00.025', 333, 555),
    ('1999-12-31 00:10:00.030', 444, 333),
    ('1999-12-31 01:00:00.035', 555, 222);
```

```sql
select candlestick_agg(time, price, volume) from tick;
```

```
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| candlestick_agg(tick.time,tick.price,tick.volume)                                                                                                                                                                                   |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| {open: {ts: 1999-12-31T00:00:00, val: 111.0}, close: {ts: 1999-12-31T01:00:00.035, val: 555.0}, low: {ts: 1999-12-31T00:00:00, val: 111.0}, high: {ts: 1999-12-31T01:00:00.035, val: 555.0}, volume: {vol: 2886.0, vwap: 850149.0}} |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
```

#### close

```
close(candlestick_agg_data)
```

Get the price of the bill.

Syntax

#### **Function**: Rounded to the nearest whole number.

```sql
select close(candlestick_agg(time, price, volume)) from tick;
```

```
+----------------------------------------------------------+
| close(candlestick_agg(tick.time,tick.price,tick.volume)) |
+----------------------------------------------------------+
| 555.0                                                    |
+----------------------------------------------------------+
```

#### close_time

```
close_time(candlestick_agg_data)
```

Retrieving billing time.

Field Name

#### **Function**: Return the sum calculated from the selected element.

```sql
select close_time(candlestick_agg(time, price, volume)) from tick;
```

```
+---------------------------------------------------------------+
| close_time(candlestick_agg(tick.time,tick.price,tick.volume)) |
+---------------------------------------------------------------+
| 1999-12-31T01:00:00.035                                       |
+---------------------------------------------------------------+
```

#### high

```
high(candlestick_agg_data)
```

state: any The same type of state as in compact_state_agg.

Syntax

#### **Function**: Return expr filled with pad on the right. After filling, the length of the whole string is len.

```
select high(candlestick_agg(time, price, volume)) from tick;
```

```
+---------------------------------------------------------+
| high(candlestick_agg(tick.time,tick.price,tick.volume)) |
+---------------------------------------------------------+
| 555.0                                                   |
+---------------------------------------------------------+
```

#### high_time

```
high_time(candlestick_agg_data)
```

**Functions**: ST_Distance returns the minimum Euclidean distance between the 2D projections of two geometries.

Syntax

#### **Function**: Return the byte length of string data.

```sql
select high_time(candlestick_agg(time, price, volume)) from tick;
```

```
+--------------------------------------------------------------+
| high_time(candlestick_agg(tick.time,tick.price,tick.volume)) |
+--------------------------------------------------------------+
| 1999-12-31T01:00:00.035                                      |
+--------------------------------------------------------------+
```

#### low

```
low(candlestick_agg_data)
```

Struct {
state_duration: List[
Struct{
state: any,
interval: duration
},
...
]
state_periods: List[
Struct(
state: any,
periods: List[
Struct {
start_time: timestamp,
end_time: timestamp
},
...
]
),
......
]
}

Syntax

#### **Function**: Return expr filled with pad on the left. After filling, the length of the whole string is len.

```sql
select low(candlestick_agg(time, price, volume)) from tick;
```

```
+--------------------------------------------------------+
| low(candlestick_agg(tick.time,tick.price,tick.volume)) |
+--------------------------------------------------------+
| 111.0                                                  |
+--------------------------------------------------------+
```

#### low_time

```
low_time(candlestick_agg_data)
```

**Function**: The function takes a single argument, which must be an expression for the dimension column specified in the expression list extended BY the ROLLUP, CUBE, or GROUPING SETS of the GROUP BY clause.

Field Name

#### **Function**: Returns the expression value of the specified row of the window frame relative to the first row of the window.

```sql
select low_time(candlestick_agg(time, price, volume)) from tick;
```

```
+-------------------------------------------------------------+
| low_time(candlestick_agg(tick.time,tick.price,tick.volume)) |
+-------------------------------------------------------------+
| 1999-12-31T00:00:00                                         |
+-------------------------------------------------------------+
```

#### open

```
open(candlestick_agg_data)
```

IN only supports a list of constants, not a list of expressions.

Syntax

#### **Function**: Return the arccosine of x.

```sql
select open(candlestick_agg(time, price, volume)) from tick;
```

```
+---------------------------------------------------------+
| open(candlestick_agg(tick.time,tick.price,tick.volume)) |
+---------------------------------------------------------+
| 111.0                                                   |
+---------------------------------------------------------+
```

#### open_time

```
open_time(candlestick_agg_data)
```

**Return Type**: Geometry

Field Name

#### **Function**: Convert to a second-level timestamp.

```sql
select open_time(candlestick_agg(time, price, volume)) from tick;
```

```
+--------------------------------------------------------------+
| open_time(candlestick_agg(tick.time,tick.price,tick.volume)) |
+--------------------------------------------------------------+
| 1999-12-31T00:00:00                                          |
+--------------------------------------------------------------+
```

#### volume

```
volume(candlestick_agg_data)
```

Get total transaction volume.

Syntax

#### **Function**: Base 2 logarithm.

```sql
select volume(candlestick_agg(time, price, volume)) from tick;
```

```
+-----------------------------------------------------------+
| volume(candlestick_agg(tick.time,tick.price,tick.volume)) |
+-----------------------------------------------------------+
| 2886.0                                                    |
+-----------------------------------------------------------+
```

#### vwap

```
vwap(candlestick_agg_data)
```

**Return Type**: First non null parameter type

Syntax

#### **Function**: Joins two or more expressions and returns the generated expression.

```sql
select vwap(candlestick_agg(time, price, volume)) from tick;
```

```
+---------------------------------------------------------+
| vwap(candlestick_agg(tick.time,tick.price,tick.volume)) |
+---------------------------------------------------------+
| 294.5769230769231                                       |
+---------------------------------------------------------+
```

## **Return Type**: Microsecond-level TIMESTAMP

### You can use `DESCRIBE TABLE` to view the table structure.

### **abs(x)**

Database name

Table name

Field Name

#### The window satisfies that: start <= time < end

```sql
SELECT abs(-1);
```

```
+----------------+
| abs(Int64(-1)) |
+----------------+
| 1              |
+----------------+
```

***

### **acos(x)**

Database name of the table

Table name

Field Name

#### **Function**: Return the substring of expr (starting from pos, length len).

```sql
SELECT acos(3);
```

```
+----------------+
| acos(Int64(3)) |
+----------------+
| NaN            |
+----------------+
```

```sql
SELECT acos(0.5);
```

```
+--------------------+
| acos(Float64(0.5)) |
+--------------------+
| 1.0471975511965976 |
+--------------------+
```

***

### **asin(x)**

Database name

Content of SQL

Calculate the mode of a column.

#### **Function**: If expr starts with startExpr, it returns true.

```sql
SELECT asin(0.5);
```

```
+--------------------+
| asin(Float64(0.5)) |
+--------------------+
| 0.5235987755982988 |
+--------------------+
```

```sql
SELECT asin(5);
```

```
+----------------+
| asin(Int64(5)) |
+----------------+
| NaN            |
+----------------+
```

***

### **atan(x)**

Database name

Database name

Import Data

#### select idelta_right(gauge_agg(time, pressure)) from air where station = 'XiaoMaiDao';

```sql
SELECT atan(5);
```

```
+-------------------+
| atan(Int64(5))    |
+-------------------+
| 1.373400766945016 |
+-------------------+
```

***

### **atan2(y,x)**

Database name

Database name

Database name

#### **Function**:Return the arctangent of y/x.

```sql
SELECT atan2(10, 2);
```

```
+---------------------------+
| atan2(Int64(10),Int64(2)) |
+---------------------------+
| 1.3734008                 |
+---------------------------+
```

***

### **ceil(x)**

field type is STRING, only one of （'year', 'quarter', 'month', 'week', 'day', 'doy', 'dow', 'hour', 'minute', 'second'）

SQL Reference

ID of data node

#### select idelta_left(gauge_agg(time, pressure)) from air where station = 'XiaoMaiDao';

```sql
SELECT ceil(1.6);
```

```
+--------------------+
| ceil(Float64(1.6)) |
+--------------------+
| 2                  |
+--------------------+
```

***

### **floor(x)**

COUNT(tag) and COUNT(DISTINCT tag) are equivalent.

SQL Reference

ID of data node

#### **Function**: Extract partial dates from timestamps or intervals.

```sql
SELECT floor(-3.1);
```

```
+----------------------+
| floor(Float64(-3.1)) |
+----------------------+
| -4                   |
+----------------------+
```

***

### **cos(x)**

Total write traffic size

Description

ID of data node

#### **Function**: Convert to a millisecond-level timestamp.

```sql
SELECT cos(1);
```

```
+--------------------+
| cos(Int64(1))      |
+--------------------+
| 0.5403023058681398 |
+--------------------+
```

***

### **sin(x)**

API of HTTP

Description

ID of data node

#### **Function**:Return the arctangent of x.

```sql
SELECT sin(5);
```

```
+---------------------+
| sin(Int64(5))       |
+---------------------+
| -0.9589242746631385 |
+---------------------+
```

***

### **exp(x)**

Example

Description

ID of data node

#### **Function**: Return the arcsine of x.

```sql
SELECT exp(1);
```

```
+-------------------+
| exp(Int64(1))     |
+-------------------+
| 2.718281828459045 |
+-------------------+
```

***

### **ln(x)**

offset type is BIGINT. When offset is negative, the values are returned from the first offset lines, defaults to 1.

Description

ID of data node

#### **Function**: Base 10 logarithm.

```sql
SELECT ln(2.718281828459045);
```

```
+--------------------------------+
| ln(Float64(2.718281828459045)) |
+--------------------------------+
| 1                              |
+--------------------------------+
```

***

### **log(x) | log10(x)**

Description

Description

ID of data node

#### Include [Aggregate functions](#aggregate-function).

```sql
SELECT log(10);
```

```
+----------------+
| log(Int64(10)) |
+----------------+
| 1              |
+----------------+
```

```sql
SELECT log10(10);
```

```
+----------------+
| log(Int64(10)) |
+----------------+
| 1              |
+----------------+
```

***

### **log2(x)**

Description

Description

ID of data node

#### **Function**: Return the current timestamp.

```sql
SELECT log2(4);
```

```
+----------------+
| log2(Int64(4)) |
+----------------+
| 2              |
+----------------+
```

***

### **power(x,y) | pow(x,y)**

ID of data node

Description

syntax descriptions

#### **Function**: Return the sine of x.

```sql
SELECT power(2, 3);
```

```
+--------------------------+
| power(Int64(2),Int64(3)) |
+--------------------------+
| 8                        |
+--------------------------+
```

***

### **round(x)**

Schema Definition

Description

API of HTTP

#### **Function**: x to the y power.

```sql
SELECT round(3.5);
```

```
+---------------------+
| round(Float64(3.5)) |
+---------------------+
| 4                   |
+---------------------+
```

***

### **signum(x)**

Example

DELETE FROM table_name where_clause

API of HTTP

#### **Return Type**: TIMESTAMP. The precision depends on the parameter. If parameter type is BIGINT, it returns a nanosecond TIMESTAMP.

```sql
SELECT signum(-3);
```

```
+-------------------+
| signum(Int64(-3)) |
+-------------------+
| -1                |
+-------------------+
```

***

### **sqrt(x)**

API of HTTP

`INTERVAL '1 DAY'` One day

last_val

#### **Function**: Return an expr, where all characters in from are replaced by characters in to.

```sql
SELECT sqrt(4);
```

```
+----------------+
| sqrt(Int64(4)) |
+----------------+
| 2              |
+----------------+
```

***

### **tan(x)**

Column name

Window functions can only appear in SELECT statements.

T represents interval, which can only be replaced by space

#### `INTERVAL '1 MONTH'` One month(30 days)

```sql
SELECT tan(1);
```

```
+-------------------+
| tan(Int64(1))     |
+-------------------+
| 1.557407724654902 |
+-------------------+
```

***

### **trunc(x)**

Data type of the column

The syntax is the same as [DROP TABLE](#drop-table)

time_window(time, window_duration, slide_duration) the window is:

#### **Function**: Return the cosine of x.

```sql
SELECT trunc(-3.9);
```

```
+----------------------+
| trunc(Float64(-3.9)) |
+----------------------+
| -3                   |
+----------------------+
```

***

### **struct**

#### **Parameter Type**: Numeric type or STRING or TIMESTAMP.

```
struct(expr1 [, ...] ) 
```

Binary Operator

Multi-point

Example

***

### Type of permission granted, READ/WRITE/ALL

### **coalesce**

#### **Function**:Return the absolute value of x.

```
coalesce(expr[,...exp])
```

ExampleData TypeWhen retrieving data for display it is commonly used to replace default values with empty values.

`INTERVAL '0.5 MONTH'` Half a month(15 days)

INTERVAL Constant

#### "YES" if the column may contain NULL, "NO" otherwise

```sql
SELECT coalesce(temperature, null, station) FROM air;
```

```
+--------------------------------------------+
| coalesce(air.temperature,NULL,air.station) |
+--------------------------------------------+
| 69.0                                       |
| 78.0                                       |
| 62.0                                       |
| 79.0                                       |
| 53.0                                       |
| 72.0                                       |
| 71.0                                       |
| 69.0                                       |
| 80.0                                       |
| 74.0                                       |
| 70.0                                       |
| 70.0                                       |
| 70.0                                       |
+--------------------------------------------+
```

***

### **nullif**

#### **Return Type**: Millisecond-level TIMESTAMP

```
nullif(expr1, expr2) 
```

Schema Definition

Schema Definition

Schema Definition

#### **Function**: Return expr cast to a timestamp in a optional format.

```sql
SELECT nullif(temperature, 70) FROM air;
```

```
+-----------------------------------+
| nullif(air.temperature,Int64(70)) |
+-----------------------------------+
| 69                                |
| 78                                |
| 62                                |
| 79                                |
| 53                                |
| 72                                |
| 71                                |
| 69                                |
| 80                                |
| 74                                |
|                                   |
|                                   |
|                                   |
+-----------------------------------+
```

***

### `INTERVAL '1 WEEK'` One week

[//]: # "### **Array**"

[//]: # "    创建数组"

### **ascii**

#### **Function**: Return a random value between 0 and 1.

```
ascii(str) 
```

Schema definition

Example

An expression is a kind of combination of symbols and operators that CnosDB will process to obtain a single data value.
A simple expression can be a constant, variable, column, or scalar function.
Complex expressions can be formed by concatenating two or more simple expressions with operators.

#### **Function**: Round to zero.

```sql
SELECT ascii('abc');
```

```
+------------------+
| ascii(Utf8("a")) |
+------------------+
| 97               |
+------------------+
```

```sql
SELECT ascii('a');
```

```
+------------------+
| ascii(Utf8("a")) |
+------------------+
| 97               |
+------------------+
```

***

### **bit_length**

#### **Function**: Calculate the standard deviation of the sample.

```
bit_length(str) 
```

Schema Definition

Example

Syntax

#### **Function**: Calculate the standard deviation of population.

```sql
SELECT bit_length('abc');
```

```
+------------------------+
| bitlength(Utf8("abc")) |
+------------------------+
| 24                     |
+------------------------+
```

***

### **btrim**

#### **Parameter Type**: Expr type is STRING, n type is BIGINT.

```
btrim(string [, matching_string ] ) 
```

Example

Example

Schema definition

#### **Parameter Type**: str, delim type is STRING, partNum type is BIGINT

```sql
SELECT btrim('     abc                  ');
```

```
+-------------------------------------------+
| btrim(Utf8("     abc                  ")) |
+-------------------------------------------+
| abc                                       |
+-------------------------------------------+
```

```sql
SELECT btrim('111abc111','1');
```

```
+------------------------------------+
| btrim(Utf8("111abc111"),Utf8("1")) |
+------------------------------------+
| abc                                |
+------------------------------------+
```

***

### **trim**

#### **Parameter Type**: Numeric type or STRING or TIMESTAMP

```
trim(str) 
```

Example

Example

Schema definition

***

### **char_length | character_length**

#### `INTERVAL '0.5 MINUTE'` Half a minute

```
char_length(expr) 
```

Example

Example

Syntax

#### **Function**: Calculate the variance of population.

```sql
SELECT char_length('你好');
```

```
+-------------------------------+
| characterlength(Utf8("你好"))  |
+-------------------------------+
| 2                             |
+-------------------------------+
```

***

### **chr**

#### **Function**: Convert a decimal number to a hexadecimal representation.

```
chr(expr) 
```

Schema definition

Example

Schema definition

#### **Function**: If expr1 is equal to expr2, NULL is returned; Otherwise, expr1 is returned.

```sql
SELECT chr(20005);
```

```
+-------------------+
| chr(Int64(20005)) |
+-------------------+
| 严                |
+-------------------+
```

***

### **concat**

#### **Function**: Return the covariance of the sample.

```
concat(expr1, expr2 [, ...exp] ) 
```

Schema definition

Example

Schema definition

#### **Function**: Perform statistical aggregation.

```sql
SELECT concat('a', 'b', 'c');
```

```
+---------------------------------------+
| concat(Utf8("a"),Utf8("b"),Utf8("c")) |
+---------------------------------------+
| abc                                   |
+---------------------------------------+
```

***

### **concat_ws**

#### **Parammeter Type**: value: numeric type

```
concat_ws(sep , expr1 [, ...] ) 
```

Example

Example

Schema definition

#### **Return Type**: Unix time in second-level.

```sql
SELECT concat_ws(' ', 'a', 'b', 'c');
```

```
+--------------------------------------------------------------+
| concatwithseparator(Utf8(" "),Utf8("a"),Utf8("b"),Utf8("c")) |
+--------------------------------------------------------------+
| a b c                                                        |
+--------------------------------------------------------------+
```

***

### **initcap**

#### **Function**: Return the MD5 128 bit checksum of expr as a hexadecimal string.

```
initcap(expr) 
```

Example

Example

Syntax

#### **Function**: Return uppercase string.

```sql
SELECT initcap('hello world');
```

```
+------------------------------+
| initcap(Utf8("hello world")) |
+------------------------------+
| Hello World                  |
+------------------------------+
```

***

### **left**

#### **Return Type**: Second-level TIMESTAMP

```
left(str, len) 
```

Schema Definition

Example

Schema Definition

#### **Function**: Return lowercase string.

```sql
SELECT left('abcde', 3);
```

```
+------------------------------+
| left(Utf8("abcde"),Int64(3)) |
+------------------------------+
| abc                          |
+------------------------------+
```

***

### **lpad**

#### **Parameter Type**: str is STRING type, len is BIGINT type

```
lpad(expr, len [, pad] ) 
```

Example

Example

Syntax

Schema Definition

#### **Switch to the specified database**

```sql
SELECT lpad('abc', 10, '1');
```

```
+---------------------------------------+
| lpad(Utf8("abc"),Int64(10),Utf8("1")) |
+---------------------------------------+
| 1111111abc                            |
+---------------------------------------+
```

***

### **rpad**

#### **返回类型**: The type of column specified in gauge_agg

```
rpad(expr, len [, pad] ) 
```

Schema Definition

Example

Multi-linestring

#### **Return Type**: Consistent with function parameter type.

```sql
SELECT rpad('aaa', 10, 'b');
```

```
+---------------------------------------+
| rpad(Utf8("aaa"),Int64(10),Utf8("b")) |
+---------------------------------------+
| aaabbbbbbb                            |
+---------------------------------------+
```

***

### **lower**

#### **Parameter Type**: x. w is numeric type, p is DOUBLE type.

```
lower(expr) 
```

Example

Example

select first_time(gauge_agg(time, pressure)) from air;

#### **Return Type**: Consistent with function parameter type.

```sql
SELECT lower('ABC');
```

```
+--------------------+
| lower(Utf8("ABC")) |
+--------------------+
| abc                |
+--------------------+
```

***

### **upper**

#### **Parameter Type**: x is numeric type, p is DOUBLE type

```
upper(expr)
```

Example

Example

Syntax

***

### **ltrim**

#### **返回类型**: Type of column specified in gauge_agg

```
ltrim(str[, trimstr] ) 
```

ExampleDefault trimester is empty

Example

Syntax

#### select last_val(gauge_agg(time, pressure)) from air;

```sql
SELECT ltrim('   abc');
```

```
+-----------------------+
| ltrim(Utf8("   abc")) |
+-----------------------+
| abc                   |
+-----------------------+
```

***

### **md5**

#### **返回类型**：Type of column specified in gauge_agg

```
md5(expr) 
```

Example

Example

Syntax

#### **返回类型**：Type of column specified in gauge_agg

```sql
SELECT md5('abc');
```

```
+----------------------------------+
| md5(Utf8("abc"))                 |
+----------------------------------+
| 900150983cd24fb0d6963f7d28e17f72 |
+----------------------------------+
```

***

### **octet_length**

#### **Return Type**: Same as value type.

```
octet_length(expr) 
```

Example

Example

Syntax

#### **Function**: Natural logarithm.

```sql
SELECT octet_length('你好');
```

```
+---------------------------+
| octetlength(Utf8("你好")) |
+---------------------------+
| 6                         |
+---------------------------+
```

***

### **random**

#### **Return Type**: Same as value type.

```
random( [seed] ) 
```

Example

Example

Syntax

#### **Function**: Round down.

```sql
SELECT random();
```

```
+---------------------+
| random()            |
+---------------------+
| 0.37577771377596325 |
+---------------------+
```

[//]: # "### **Regexp_Replace**"

[//]: # "    regexp_replace(str, regexp, rep [, position] ) "

[//]: # "Example"

[//]: # "Example"

[//]: # "Syntax"

***

### **repeat**

#### **Return Type**: Same as value type.

```
repeat(expr, n) 
```

Example

Example

Syntax

#### **Parameter Type**: field type is STRING, only one of （'year', 'quarter', 'month', 'week', 'day', 'doy', 'dow', 'hour', 'minute', 'second'）

```sql
SELECT repeat('a', 5);
```

```
+----------------------------+
| repeat(Utf8("a"),Int64(5)) |
+----------------------------+
| aaaaa                      |
+----------------------------+
```

***

### **replace**

#### **Return Type**: Same as value type.

```
replace(str, search, replace ) 
```

Example

Example

Syntax

#### **Parameter**: BIGINT or STRING

```sql
SELECT replace('aaa', 'a', 'b');
```

```
+------------------------------------------+
| replace(Utf8("aaa"),Utf8("a"),Utf8("b")) |
+------------------------------------------+
| bbb                                      |
+------------------------------------------+
```

***

### **reverse**

#### **Show Tables of Current Database**

```
reverse(expr) 
```

Data Type

Example

Syntax

#### select first_val(gauge_agg(time, pressure)) from air;

```sql
SELECT reverse('你好');
```

```
+-----------------------+
| reverse(Utf8("你好")) |
+-----------------------+
| 好你                  |
+-----------------------+
```

***

### **right**

#### **Return Type**: Consistent with parameter type.

```
right(str, len) 
```

Example

Example

Syntax

#### **Function**: Return a string that repeats expr n times.

```sql
 SELECT right('aaabbb', 3);
```

```
+--------------------------------+
| right(Utf8("aaabbb"),Int64(3)) |
+--------------------------------+
| bbb                            |
+--------------------------------+
```

***

### **digest**

#### **Return Type**: Consistent with parameter type.

```
digest(expr, algorithm)
```

Example

Example

Example

TIMESTAMP constant syntax

#### Aggregate function array_agg's return type .

```sql
SELECT digest('abc', 'md5');
```

```
+----------------------------------+
| digest(Utf8("abc"),Utf8("md5"))  |
+----------------------------------+
| 900150983cd24fb0d6963f7d28e17f72 |
+----------------------------------+
```

***

### **rtrim**

#### **Return Type**: Consistent with parameter type.

```
rtrim( str [, trimstr] ) 
```

Example

Example

Syntax

#### **Function**: Tangent value of x.

```sql
SELECT rtrim('aaabbb', 'b');
```

```
+---------------------------------+
| rtrim(Utf8("aaabbb"),Utf8("b")) |
+---------------------------------+
| aaa                             |
+---------------------------------+
```

***

### **sha224**

#### `INTERVAL '1 MINUTE'` One minute

```
sha224(str)
```

Example

Syntax

Example

#### **Parameter Type**: expr and algorithm are both STRING

```sql
 SELECT sha224('abc');
```

```
+----------------------------------------------------------+
| sha224(Utf8("abc"))                                      |
+----------------------------------------------------------+
| 23097d223405d8228642a477bda255b32aadbce4bda0b3f7e36c9da7 |
+----------------------------------------------------------+
```

***

### **sha256**

#### **返回类型**: TIMESTAMP

```
sha256(str)
```

Example

Syntax

Example

#### **说明**:GROUPING函数只能用于有GROUP BY 子句的表达式

```sql
SELECT sha256('abc');
```

```
+------------------------------------------------------------------+
| sha256(Utf8("abc"))                                              |
+------------------------------------------------------------------+
| ba7816bf8f01cfea414140de5dae2223b00361a396177a9cb410ff61f20015ad |
+------------------------------------------------------------------+
```

***

### **sha384**

#### **返回类型**: TIMESTAMP

```
sha384(str)
```

Example

Syntax

Example

#### **Differences between HAVING and WHERE**

```sql
SELECT sha384('abc');
```

```
+--------------------------------------------------------------------------------------------------+
| sha384(Utf8("abc"))                                                                              |
+--------------------------------------------------------------------------------------------------+
| cb00753f45a35e8bb5a03d699ac65007272c32ab0eded1631a8b605a43ff5bed8086072ba1e7cc2358baeca134c825a7 |
+--------------------------------------------------------------------------------------------------+
```

***

### **sha512**

#### **Function**: Calculate the variance of a given sample

```
sha512(str)
```

Example

Syntax

Example

***

### **split_part**

#### **Parameter Type**: BIGINT or STRING

```
split_part(str, delim, n) 
```

Example

Example

Syntax

#### **Function**: Round up.

```sql
SELECT split_part('abc|def|ghi', '|', 2);
```

```
+---------------------------------------------------+
| splitpart(Utf8("abc|def|ghi"),Utf8("|"),Int64(2)) |
+---------------------------------------------------+
| def                                               |
+---------------------------------------------------+
```

***

### **starts_with**

#### **Parameter Type**: BIGINT or STRING

```
starts_with(expr, startExpr) 
```

Example

Example

Syntax

#### **Parameter Type**: expr, pad type is STRING, len type is BIGINT

```sql
SELECT starts_with('abcdefg', 'abc');
```

```
+-----------------------------------------+
| startswith(Utf8("abcdefg"),Utf8("abc")) |
+-----------------------------------------+
| true                                    |
+-----------------------------------------+
```

***

### **strpos**

#### **Return Type**: CandleStackData

```
strpos(str, substr ) 
```

Example

Example

Syntax

#### **Function**: Return unixTime.

```sql
SELECT strpos('abcdef', 'def');
```

```
+------------------------------------+
| strpos(Utf8("abcdef"),Utf8("def")) |
+------------------------------------+
| 4                                  |
+------------------------------------+
```

***

### **substr**

#### A symbol representing a single specific data value.&#xA;You can refer to [constant](#constant).

```
substr(expr, pos [, len] ) 
```

Example

Example

Syntax

#### +--------------------------------------------+&#xA;| last_val(gauge_agg(air.time,air.pressure)) |&#xA;+--------------------------------------------+&#xA;| 80.0                                       |&#xA;+--------------------------------------------+

```sql
SELECT substr('abcdef', 4, 3);
```

```
+------------------------------------------+
| substr(Utf8("abcdef"),Int64(4),Int64(3)) |
+------------------------------------------+
| def                                      |
+------------------------------------------+
```

***

### **to_hex**

#### **Parameter Type**: STRING or BIGINT

```
to_hex(value)
```

QUERIES(INFORMATION_SCHEMA)

Example

Syntax

#### **Parameter Type**: expr1 and expr2 are numeric expressions with column values

```sql
SELECT to_hex(100);
```

```
+-------------------+
| tohex(Int64(100)) |
+-------------------+
| 64                |
+-------------------+
```

***

### **translate**

#### **Parameter Type**: expr, pad is STRING type, len is BIGINT type.

```
translate(expr, from, to) 
```

Example

Example

Syntax

#### **Parameter Type**: expr type is STRING, pos, len type is BIGINT

```sql
SELECT translate('aaabbb', 'bbb', 'ccc');
```

```
+---------------------------------------------------+
| translate(Utf8("aaabbb"),Utf8("bbb"),Utf8("ccc")) |
+---------------------------------------------------+
| aaaccc                                            |
+---------------------------------------------------+
```

***

### column_key: Any type

### **date_part**

#### **Insert Query Results (INSERT SELECT)**

```
date_part(field, expr) 
```

Example

`INTERVAL '1 MILLISECONDS'` One millisecond

!()

**Notice:**

Syntax

#### +---------------------------------------------+&#xA;| first_val(gauge_agg(air.time,air.pressure)) |&#xA;+---------------------------------------------+&#xA;| 68.0                                        |&#xA;+---------------------------------------------+

```sql
SELECT date_part('hour', TIMESTAMP '2022-11-21T09:18:17');
```

```
+----------------------------------------------------+
| datepart(Utf8("hour"),Utf8("2022-11-21T09:18:17")) |
+----------------------------------------------------+
| 9                                                  |
+----------------------------------------------------+
```

***

### **date_trunc**

#### **Return Type**: INTERVAL 类型

```
date_trunc(field, expr) 
```

Example

Example

**Notice**

#### COUNT(_) and COUNT(literal value) are equivalent, and if the sql projection contains only '_/literal value', the sql is rewritten as COUNT(time).

```sql
SELECT date_trunc('month', TIMESTAMP '2022-11-21T09:18:17');
```

```
+------------------------------------------------------+
| datetrunc(Utf8("month"),Utf8("2022-11-21T09:18:17")) |
+------------------------------------------------------+
| 2022-11-01T00:00:00                                  |
+------------------------------------------------------+
```

***

### **date_bin**

#### **Parameter Type**: Numeric type.

```
date_bin(interval, source, origin)
```

Array Type

Example

**Database**

**Note**: `BETWEEN x AND y` lists the numbers between x and y, including x and y.

Syntax

#### **Parameter Type**:  只能是GROUP BY 子句中的表达式

```sql
SELECT date_bin(INTERVAL '1' DAY, TIMESTAMP '2022-11-21T09:10:24', TIMESTAMP '2022-11-01T00:00:00');
```

```
+------------------------------------------------------------------------------------------------+
| datebin(IntervalDayTime("4294967296"),Utf8("2022-11-21T09:10:24"),Utf8("2022-11-01T00:00:00")) |
+------------------------------------------------------------------------------------------------+
| 2022-11-21T00:00:00                                                                            |
+------------------------------------------------------------------------------------------------+
```

***

### **to_timestamp**

#### **Parameter Type**: Numeric type.

```
to_timestamp(expr) 
```

Example

Example

Syntax

#### +----------------------------------------------+&#xA;| first_time(gauge_agg(air.time,air.pressure)) |&#xA;+----------------------------------------------+&#xA;| 2023-01-14T16:00:00                          |&#xA;+----------------------------------------------+

```sql
SELECT to_timestamp('1970-01-01T00:00:00');
```

```
+------------------------------------------+
| totimestamp(Utf8("1970-01-01T00:00:00")) |
+------------------------------------------+
| 1970-01-01T00:00:00                      |
+------------------------------------------+
```

```sql
SELECT to_timestamp(1);
```

```
+-------------------------------+
| totimestamp(Int64(1))         |
+-------------------------------+
| 1970-01-01T00:00:00.000000001 |
+-------------------------------+
```

***

### **to_timestamp_millis**

#### **Parameter Type**: value: any

```
to_timestamp_millis(expr) 
```

Example

Example

Syntax

#### **Return Type**: Struct as follows.

```sql
SELECT to_timestamp_millis('1970-01-01T00:00:00.00301');
```

```
+------------------------------------------------------+
| totimestampmillis(Utf8("1970-01-01T00:00:00.00301")) |
+------------------------------------------------------+
| 1970-01-01T00:00:00.003                              |
+------------------------------------------------------+
```

```sql
SELECT to_timestamp_millis(1);
```

```
+-----------------------------+
| totimestampmillis(Int64(1)) |
+-----------------------------+
| 1970-01-01T00:00:00.001     |
+-----------------------------+
```

***

### **to_timestamp_micros**

#### **Return Type**: Array of parameter type

```
to_timestamp_micros(expr) 
```

Example

Example

Syntax

#### +---------------------------------------------+&#xA;| last_time(gauge_agg(air.time,air.pressure)) |&#xA;+---------------------------------------------+&#xA;| 2023-03-14T16:00:00                         |&#xA;+---------------------------------------------+

```sql
SELECT to_timestamp_micros(1)
```

```
+-----------------------------+
| totimestampmicros(Int64(1)) |
+-----------------------------+
| 1970-01-01T00:00:00.000001  |
+-----------------------------+
```

***

### **to_timestamp_seconds**

#### **Parameter Type**:VALUE TYPE

```
to_timestamp_seconds(expr) 
```

Example

Example

Syntax

#### `value_expression` can only be an expression whose value can be determined at compile time, such as `constant`, `1 + 2`, `CAST('1999-12-31 00:00:00.000` as timestamp)', and so on.

```
SELECT to_timestamp_seconds(1);
```

```
+------------------------------+
| totimestampseconds(Int64(1)) |
+------------------------------+
| 1970-01-01T00:00:01          |
+------------------------------+
```

***

### **from_unixtime**

#### **Return Type**: StateAggData type

```
from_unixtime(unixTime) 
```

Boolean Type

Number type expressions are subtracted

Example

#### **Return Type**: Consistent with expr.

```
SELECT from_unixtime(1);
```

```
+------------------------+
| fromunixtime(Int64(1)) |
+------------------------+
| 1970-01-01T00:00:01    |
+------------------------+
```

***

### **now**

#### **Return Type**: The type of expr1 or NULL

```
now()
```

Syntax

Syntax

#### **Return Type**: Consistent with expr.

```
SELECT now();
```

```
+----------------------------------+
| now()                            |
+----------------------------------+
| 2022-11-21T04:44:19.742107+00:00 |
+----------------------------------+
```

### **time_window**

#### **Parameter Type**: expr type is any type, number type is BIGINT.

```sql
time_window(time_expr, window_duration [, slide_duration])
```

**Alias**

**Complex Grouping Operation**

**PARTITION BY Clause**

Numeric type

```sql
start, end
time, time_column + window_duration
time - slide_duration, time + window_duration - slide_duration
time - 2 * slide_duration, time + window_duration - 2 * slide_duration
...
time - n * slide_duration, time + window_duration - n * slide_duration
```

Data Type

#### **Return Type**: Consistent with expr.

```sql
CREATE TABLE test(a BIGINT, TAGS(b));
INSERT INTO test(time, a, b) VALUES ('2023-04-23T00:00:00.000000Z', 1, 'b');
SELECT time FROM test;
```

```
+---------------------+
| time                |
+---------------------+
| 2023-04-23T00:00:00 |
+---------------------+
```

```sql
SELECT time_window(time, interval '3 day') FROM test;
```

```
+---------------------------------------------------------------------+
| TIME_WINDOW(test.time,IntervalMonthDayNano("55340232221128654848")) |
+---------------------------------------------------------------------+
| {start: 2023-04-23T00:00:00, end: 2023-04-26T00:00:00}              |
+---------------------------------------------------------------------+
```

```sql
SELECT time_window(time, interval '5 day', interval '3 day') FROM test;
```

```
+------------------------------------------------------------------------------------------------------------------+
| TIME_WINDOW(test.time,IntervalMonthDayNano("92233720368547758080"),IntervalMonthDayNano("55340232221128654848")) |
+------------------------------------------------------------------------------------------------------------------+
| {start: 2023-04-23T00:00:00, end: 2023-04-28T00:00:00}                                                           |
| {start: 2023-04-20T00:00:00, end: 2023-04-25T00:00:00}                                                           |
+------------------------------------------------------------------------------------------------------------------+
```

### Space Functions

**Stream**

#### ST_AsBinary

```
ST_AsBinary(geometry)
```

**UNION Clause**

Syntax

Example

Example

Parameter Description

```sql
SELECT ST_AsBinary('POINT(0 3)');
```

```
+--------------------------------------------+
| st_AsBinary(Utf8("POINT(0 3)"))            |
+--------------------------------------------+
| 010100000000000000000000000000000000000840 |
+--------------------------------------------+
```

#### ST_GeomFromWKB

```
ST_GeomFromWKB(wkb)
```

Syntax

Example

`INTERVAL '1'` One second

Parameters Description

```sql
SELECT ST_GeomFromWKB(ST_AsBinary('POINT(0 3)'))
```

```
+-------------------------------------------------+
| st_GeomFromWKB(st_AsBinary(Utf8("POINT(0 3)"))) |
+-------------------------------------------------+
| POINT(0 3)                                      |
+-------------------------------------------------+
```

#### ST_Distance

```
ST_Distance(geometry1, gemometry2)
```

Syntax

Example

Syntax

Syntax

```sql
SELECT ST_Distance('POINT(0 0)', 'LINESTRING (30 10, 10 30, 40 40)');
```

```
+----------------------------------------------------+
| st_distance(Utf8("POINT(1 0)"),Utf8("POINT(0 0)")) |
+----------------------------------------------------+
| 1.0                                                |
+----------------------------------------------------+
```

**Parameter Type**: expr type is any type.

```sql
SELECT ST_Distance('POINT(0 0)', 'LINESTRING (30 10, 10 30, 40 40)');
```

```
+--------------------------------------------------------------------------+
| st_distance(Utf8("POINT(0 0)"),Utf8("LINESTRING (30 10, 10 30, 40 40)")) |
+--------------------------------------------------------------------------+
| 28.284271247461902                                                       |
+--------------------------------------------------------------------------+
```

**Return Type**: DOUBLE.

```sql
SELECT ST_Distance('POLYGON((0 2,1 1,0 -1,0 2))', 'POLYGON((-1 -3,-2 -1,0 -3,-1 -3))');
```

```
+--------------------------------------------------------------------------------------------+
| st_distance(Utf8("POLYGON((0 2,1 1,0 -1,0 2))"),Utf8("POLYGON((-1 -3,-2 -1,0 -3,-1 -3))")) |
+--------------------------------------------------------------------------------------------+
| 1.4142135623730951                                                                         |
+--------------------------------------------------------------------------------------------+
```

#### ST_Area

```
ST_Area(geometry)
```

SyntaxThe area unit is the same as the unit used to represent input into geometric coordinates.
This function returns 0 for point, line, multi-point and multi-line string.
For geometrical collections, it returns the sum of geometry in the collection.

-ts: Timestamp

Syntax

String type expression concatenation

```sql
SELECT ST_Area('POLYGON ((40 40, 20 45, 45 30, 40 40))');
```

+---------------------------------------------------------+
\| st_Area(Utf8("POLYGON ((40 40, 20 45, 45 30, 40 40))")) |
+---------------------------------------------------------+
\| 87.5 |
+---------------------------------------------------------+

### Data Type

#### **Create Common (TSKV) Table**

```sql
Example
```

#### - (positive), - (negative), + (plus), + (series), - (minus)

#### **Return Type**: BIGINT UNSIGNED

| **Return Type**: TIMESTAMP        |
| --------------------------------- |
| DENSE_RANK   |
| PERCENT_RANK |
| RANK                              |
| ROW_NUMBER   |

**Update Data**

`RANK`, `DENSE_RANK`, `ROW_NUMBER` specifies window_frame that is invalid

#### **Insert One Record**

See[聚合函数](./sql.md#polymer)

#### **Return Type**: Numeric type

| **Return Type**: TIMESTAMP     |
| ------------------------------ |
| CUME_DIST |
| LAG                            |
| LEAD                           |
| NTH_VALUE |

#### Numeric type

Example

#### [Click to jump](#geometry)

**Example**:

#### Data Type

**Return Type**: DOUBLE

**Create Database**

**Example**:

- **Import data**
- **Describe Table**
- **Interpolation Function**
- **Expression**
- **Alias Table**

#### **Parameter Type**: expr type is any type.

- Example
- Example

## Data Type

**Return Type**: BINARY

### **ROW_NUMBER**

#### **Return Type**: TimeVector

```
ROW_NUMBER() OVER([partition_clause] [orderby_clause])
```

Example

Example

Syntax

#### **Return Type**: Consistent with expr.

```sql
SELECT temperature, station, 
       ROW_NUMBER() OVER (PARTITION BY station) 
FROM air;
```

```
+-------------+-------------+--------------+
| temperature | station     | ROW_NUMBER() |
+-------------+-------------+--------------+
| 69          | LianYunGang | 1            |
| 80          | LianYunGang | 2            |
| 74          | LianYunGang | 3            |
| 70          | LianYunGang | 4            |
| 70          | LianYunGang | 5            |
| 70          | LianYunGang | 6            |
| 69          | XiaoMaiDao  | 1            |
| 78          | XiaoMaiDao  | 2            |
| 62          | XiaoMaiDao  | 3            |
| 79          | XiaoMaiDao  | 4            |
| 53          | XiaoMaiDao  | 5            |
| 72          | XiaoMaiDao  | 6            |
| 71          | XiaoMaiDao  | 7            |
+-------------+-------------+--------------+
```

***

### **RANK**

#### **Alter Database Parameters**

```
RANK() OVER([partition_clause] [orderby_clause])
```

Example

Example

Syntax

#### **Return Type**: Consistent with expr.

```sql
SELECT station, temperature, 
       RANK() OVER (PARTITION BY station ORDER BY temperature) 
FROM air;
```

```
+-------------+-------------+--------+
| station     | temperature | RANK() |
+-------------+-------------+--------+
| LianYunGang | 69          | 1      |
| LianYunGang | 70          | 2      |
| LianYunGang | 70          | 2      |
| LianYunGang | 70          | 2      |
| LianYunGang | 74          | 5      |
| LianYunGang | 80          | 6      |
| XiaoMaiDao  | 53          | 1      |
| XiaoMaiDao  | 62          | 2      |
| XiaoMaiDao  | 69          | 3      |
| XiaoMaiDao  | 71          | 4      |
| XiaoMaiDao  | 72          | 5      |
| XiaoMaiDao  | 78          | 6      |
| XiaoMaiDao  | 79          | 7      |
+-------------+-------------+--------+
```

***

### **DENSE_RANK**

#### **Parameter Type**: STRING

```
DENSE_RANK() OVER([partition_clause] [orderby_clause])
```

Example

Example

Syntax

#### operator include `=`, `!=`.

```sql
SELECT station, temperature, 
       DENSE_RANK() OVER (PARTITION BY station ORDER BY temperature) 
FROM air;
```

```
+-------------+-------------+--------------+
| station     | temperature | DENSE_RANK() |
+-------------+-------------+--------------+
| LianYunGang | 69          | 1            |
| LianYunGang | 70          | 2            |
| LianYunGang | 70          | 2            |
| LianYunGang | 70          | 2            |
| LianYunGang | 74          | 3            |
| LianYunGang | 80          | 4            |
| XiaoMaiDao  | 53          | 1            |
| XiaoMaiDao  | 62          | 2            |
| XiaoMaiDao  | 69          | 3            |
| XiaoMaiDao  | 71          | 4            |
| XiaoMaiDao  | 72          | 5            |
| XiaoMaiDao  | 78          | 6            |
| XiaoMaiDao  | 79          | 7            |
+-------------+-------------+--------------+
```

***

### **PERCENT_RANK**

#### **Parameter Type**: STRING

```
PERCENT_RANK() OVER([partition_clause] [orderby_clause])
```

Example

Example

Syntax

#### **Two-stage Aggregation Function**

```sql
 SELECT station, temperature, 
        PERCENT_RANK() OVER (PARTITION BY station ORDER BY temperature) 
 FROM air;
```

```
+-------------+-------------+---------------------+
| station     | temperature | PERCENT_RANK()      |
+-------------+-------------+---------------------+
| LianYunGang | 69          | 0                   |
| LianYunGang | 70          | 0.2                 |
| LianYunGang | 70          | 0.2                 |
| LianYunGang | 70          | 0.2                 |
| LianYunGang | 74          | 0.8                 |
| LianYunGang | 80          | 1                   |
| XiaoMaiDao  | 53          | 0                   |
| XiaoMaiDao  | 62          | 0.16666666666666666 |
| XiaoMaiDao  | 69          | 0.3333333333333333  |
| XiaoMaiDao  | 71          | 0.5                 |
| XiaoMaiDao  | 72          | 0.6666666666666666  |
| XiaoMaiDao  | 78          | 0.8333333333333334  |
| XiaoMaiDao  | 79          | 1                   |
+-------------+-------------+---------------------+
```

***

### **CUME_DIST**

#### **Parameter Type**: STRING

```
CUME_DIST() OVER ([partition_clause] [orderby_clause])
```

Example

Example

Syntax

#### **Update tag column**

```sql
SELECT station, temperature, 
       CUME_DIST() OVER (PARTITION BY station ORDER BY temperature) 
FROM air;
```

```
+-------------+-------------+---------------------+
| station     | temperature | CUME_DIST()         |
+-------------+-------------+---------------------+
| LianYunGang | 69          | 0.16666666666666666 |
| LianYunGang | 70          | 0.6666666666666666  |
| LianYunGang | 70          | 0.6666666666666666  |
| LianYunGang | 70          | 0.6666666666666666  |
| LianYunGang | 74          | 0.8333333333333334  |
| LianYunGang | 80          | 1                   |
| XiaoMaiDao  | 53          | 0.14285714285714285 |
| XiaoMaiDao  | 62          | 0.2857142857142857  |
| XiaoMaiDao  | 69          | 0.42857142857142855 |
| XiaoMaiDao  | 71          | 0.5714285714285714  |
| XiaoMaiDao  | 72          | 0.7142857142857143  |
| XiaoMaiDao  | 78          | 0.8571428571428571  |
| XiaoMaiDao  | 79          | 1                   |
+-------------+-------------+---------------------+
```

[//]: # "----------------"

[//]: #

[//]: # "### **NTILE**"

[//]: #

[//]: # "    ntile(n) over([partition_clause] [order_by_clause])"

[//]: #

[//]: # "Example"

[//]: #

[//]: # "Example"

[//]: #

[//]: # "Syntax"

***

### **LAG**

#### **Parameter Type**: STRING

```
lag( expr [, offset [, default] ] ) OVER([partition_clause] orderby_clause)
```

Example

Example

**Operator Precedence**

**Drop Table**

Example

#### **Approximate Aggregate Functions**

```sql
SELECT station, temperature, 
       LAG(temperature, 2) OVER (PARTITION BY station ORDER BY temperature) 
FROM air;
```

```
+-------------+-------------+-------------------------------+
| station     | temperature | LAG(air.temperature,Int64(2)) |
+-------------+-------------+-------------------------------+
| LianYunGang | 69          |                               |
| LianYunGang | 70          |                               |
| LianYunGang | 70          | 69                            |
| LianYunGang | 70          | 70                            |
| LianYunGang | 74          | 70                            |
| LianYunGang | 80          | 70                            |
| XiaoMaiDao  | 53          |                               |
| XiaoMaiDao  | 62          |                               |
| XiaoMaiDao  | 69          | 53                            |
| XiaoMaiDao  | 71          | 62                            |
| XiaoMaiDao  | 72          | 69                            |
| XiaoMaiDao  | 78          | 71                            |
| XiaoMaiDao  | 79          | 72                            |
+-------------+-------------+-------------------------------+
```

***

### **LEAD**

#### **Parameter Type**: STRING

```
lead(expr [, offset [, default] ] ) OVER ([partition_clause] orderby_clause)
```

Example

Example

**Show All Databases**

**Table**

Example

#### **Update field column**

```sql
SELECT station, temperature, 
       LEAD(temperature, 2) OVER (PARTITION BY station ORDER BY temperature) 
FROM air;
```

```
+-------------+-------------+--------------------------------+
| station     | temperature | LEAD(air.temperature,Int64(2)) |
+-------------+-------------+--------------------------------+
| LianYunGang | 69          | 70                             |
| LianYunGang | 70          | 70                             |
| LianYunGang | 70          | 74                             |
| LianYunGang | 70          | 80                             |
| LianYunGang | 74          |                                |
| LianYunGang | 80          |                                |
| XiaoMaiDao  | 53          | 69                             |
| XiaoMaiDao  | 62          | 71                             |
| XiaoMaiDao  | 69          | 72                             |
| XiaoMaiDao  | 71          | 78                             |
| XiaoMaiDao  | 72          | 79                             |
| XiaoMaiDao  | 78          |                                |
| XiaoMaiDao  | 79          |                                |
+-------------+-------------+--------------------------------+
```

***

### **FIRST_VALUE**

#### **Parameter Type**: STRING

```
FIRST_VALUE(expr) OVER ([partition_clause] [orderby_clause])
```

Example

Example

Example

#### **Create the database**

```sql
SELECT station, temperature, 
       FIRST_VALUE(temperature) OVER (PARTITION BY station ORDER BY temperature) 
FROM air;
```

```
+-------------+-------------+------------------------------+
| station     | temperature | FIRST_VALUE(air.temperature) |
+-------------+-------------+------------------------------+
| LianYunGang | 69          | 69                           |
| LianYunGang | 70          | 69                           |
| LianYunGang | 70          | 69                           |
| LianYunGang | 70          | 69                           |
| LianYunGang | 74          | 69                           |
| LianYunGang | 80          | 69                           |
| XiaoMaiDao  | 53          | 53                           |
| XiaoMaiDao  | 62          | 53                           |
| XiaoMaiDao  | 69          | 53                           |
| XiaoMaiDao  | 71          | 53                           |
| XiaoMaiDao  | 72          | 53                           |
| XiaoMaiDao  | 78          | 53                           |
| XiaoMaiDao  | 79          | 53                           |
+-------------+-------------+------------------------------+
```

***

### **LAST_VALUE**

#### **Parameter Type**: STRING

```
LAST_VALUE(expr) OVER ([partition_clause] [orderby_clause])
```

Example

Example

Example

#### =、\&gt=、<=、<\&gt、!=、\&gt、<（Comparison operator)

```sql
SELECT station, temperature, 
       LAST_VALUE(temperature) OVER (PARTITION BY station ORDER BY temperature) 
FROM air;
```

```
+-------------+-------------+-----------------------------+
| station     | temperature | LAST_VALUE(air.temperature) |
+-------------+-------------+-----------------------------+
| LianYunGang | 69          | 69                          |
| LianYunGang | 70          | 70                          |
| LianYunGang | 70          | 70                          |
| LianYunGang | 70          | 70                          |
| LianYunGang | 74          | 74                          |
| LianYunGang | 80          | 80                          |
| XiaoMaiDao  | 53          | 53                          |
| XiaoMaiDao  | 62          | 62                          |
| XiaoMaiDao  | 69          | 69                          |
| XiaoMaiDao  | 71          | 71                          |
| XiaoMaiDao  | 72          | 72                          |
| XiaoMaiDao  | 78          | 78                          |
| XiaoMaiDao  | 79          | 79                          |
+-------------+-------------+-----------------------------+
```

***

### **NTH_VALUE**

#### **Parameter Type**: STRING

```
NTH_VALUE(expr, number) OVER ([partition_clause] [orderby_clause])
```

Example

Example

Example

#### **Describe Database Parameters**

```sql
SELECT station, temperature, 
       NTH_VALUE(temperature, 2) OVER (PARTITION BY station ORDER BY temperature) 
FROM air;
```

```
+-------------+-------------+-------------------------------------+
| station     | temperature | NTH_VALUE(air.temperature,Int64(2)) |
+-------------+-------------+-------------------------------------+
| LianYunGang | 69          |                                     |
| LianYunGang | 70          | 70                                  |
| LianYunGang | 70          | 70                                  |
| LianYunGang | 70          | 70                                  |
| LianYunGang | 74          | 70                                  |
| LianYunGang | 80          | 70                                  |
| XiaoMaiDao  | 53          |                                     |
| XiaoMaiDao  | 62          | 62                                  |
| XiaoMaiDao  | 69          | 62                                  |
| XiaoMaiDao  | 71          | 62                                  |
| XiaoMaiDao  | 72          | 62                                  |
| XiaoMaiDao  | 78          | 62                                  |
| XiaoMaiDao  | 79          | 62                                  |
+-------------+-------------+-------------------------------------+
```

## Data Type

### Example

In the database, the interpolation is the technology used to process missing values in the data.Syntax

### **time_window_gapfill**

**Join Clause**Example

ExampleData Type

#### **Parameter Type**: STRING

- time_window_gapfill

```sql
time_window_gapfill(<time column>, <window interval>[, <sliding interval>[, <start time>]]): <time window struct>
```

#### Integer type expressions are modulo

- interpolate

ExampleExample

Linear interpolation can be used for estimation of consecutive variables, such as filling missing values in time series or interpolating values in spatial data.However, the accuracy and applicability of linear interpolation values depend on the characteristics and actual circumstances of the data.In some cases, data may have non-linear relationships or other more appropriate interpolation methods.Therefore, before applying linear interpolation, careful consideration needs to be given to the nature of the data and the purpose of the interpolation to ensure that the interpolation results are reasonable and accurate.

```sql
interpolate(<expr>)
```

- locf

Example

SyntaxSpecific treatment as follows:：

1. Data Type
2. **WITH Clause**
3. expr type is TIMESTAMP.
4. **GROUP BY Clause**
5. Example

SyntaxThis method assumes that the data after the missing values are the same or very close to the last observed values.

SyntaxSyntax

```sql
locf(<expr>)
```

#### **Parameter Type**: Binary

```sql
Example
```

```sql
---- interpolate
SELECT
  t0,
  time_window_gapfill(time, interval '10 milliseconds') as minute,
  interpolate(avg(f1))
from gapfill_db.m2
where time between timestamp '1999-12-31T00:00:00.000Z' and timestamp '1999-12-31T00:00:00.055Z'
group by t0, minute;
```

```
+-------+-------------------------+-----------------------+
| t0    | minute                  | AVG(gapfill_db.m2.f1) |
+-------+-------------------------+-----------------------+
| tag11 | 1999-12-31T00:00:00     | 444.0                 |
| tag11 | 1999-12-31T00:00:00.010 | 499.5                 |
| tag11 | 1999-12-31T00:00:00.020 | 555.0                 |
| tag11 | 1999-12-31T00:00:00.030 |                       |
| tag11 | 1999-12-31T00:00:00.040 |                       |
| tag11 | 1999-12-31T00:00:00.050 |                       |
| tag12 | 1999-12-31T00:00:00     | 333.0                 |
| tag12 | 1999-12-31T00:00:00.010 | 388.5                 |
| tag12 | 1999-12-31T00:00:00.020 | 444.0                 |
| tag12 | 1999-12-31T00:00:00.030 |                       |
| tag12 | 1999-12-31T00:00:00.040 |                       |
| tag12 | 1999-12-31T00:00:00.050 |                       |
| tag13 | 1999-12-31T00:00:00     |                       |
| tag13 | 1999-12-31T00:00:00.010 | 222.0                 |
| tag13 | 1999-12-31T00:00:00.020 | 277.5                 |
| tag13 | 1999-12-31T00:00:00.030 | 333.0                 |
| tag13 | 1999-12-31T00:00:00.040 |                       |
| tag13 | 1999-12-31T00:00:00.050 |                       |
| tag14 | 1999-12-31T00:00:00     |                       |
| tag14 | 1999-12-31T00:00:00.010 | 111.0                 |
| tag14 | 1999-12-31T00:00:00.020 | 166.5                 |
| tag14 | 1999-12-31T00:00:00.030 | 222.0                 |
| tag14 | 1999-12-31T00:00:00.040 |                       |
| tag14 | 1999-12-31T00:00:00.050 |                       |
+-------+-------------------------+-----------------------+
```

```sql
---- locf
SELECT
  t0,
  time_window_gapfill(time, interval '10 milliseconds') as minute,
  locf(avg(f1))
from gapfill_db.m2
where time between timestamp '1999-12-31T00:00:00.000Z' and timestamp '1999-12-31T00:00:00.055Z'
group by t0, minute;
```

```
+-------+-------------------------+-----------------------+
| t0    | minute                  | AVG(gapfill_db.m2.f1) |
+-------+-------------------------+-----------------------+
| tag11 | 1999-12-31T00:00:00     | 444.0                 |
| tag11 | 1999-12-31T00:00:00.010 | 444.0                 |
| tag11 | 1999-12-31T00:00:00.020 | 555.0                 |
| tag11 | 1999-12-31T00:00:00.030 | 555.0                 |
| tag11 | 1999-12-31T00:00:00.040 | 555.0                 |
| tag11 | 1999-12-31T00:00:00.050 | 555.0                 |
| tag12 | 1999-12-31T00:00:00     | 333.0                 |
| tag12 | 1999-12-31T00:00:00.010 | 333.0                 |
| tag12 | 1999-12-31T00:00:00.020 | 444.0                 |
| tag12 | 1999-12-31T00:00:00.030 | 444.0                 |
| tag12 | 1999-12-31T00:00:00.040 | 444.0                 |
| tag12 | 1999-12-31T00:00:00.050 | 444.0                 |
| tag13 | 1999-12-31T00:00:00     |                       |
| tag13 | 1999-12-31T00:00:00.010 | 222.0                 |
| tag13 | 1999-12-31T00:00:00.020 | 222.0                 |
| tag13 | 1999-12-31T00:00:00.030 | 333.0                 |
| tag13 | 1999-12-31T00:00:00.040 | 333.0                 |
| tag13 | 1999-12-31T00:00:00.050 | 333.0                 |
| tag14 | 1999-12-31T00:00:00     |                       |
| tag14 | 1999-12-31T00:00:00.010 | 111.0                 |
| tag14 | 1999-12-31T00:00:00.020 | 111.0                 |
| tag14 | 1999-12-31T00:00:00.030 | 222.0                 |
| tag14 | 1999-12-31T00:00:00.040 | 222.0                 |
| tag14 | 1999-12-31T00:00:00.050 | 222.0                 |
+-------+-------------------------+-----------------------+
```

## Data Type

### Example

#### **Parameter Type**: STRING

```
ST_AsBinary( geom)
```

Example

Example

Example

#### **Parameter Type**: Binary

```sql
SELECT ST_AsBinary('POINT(1 2)');
```

```
+--------------------------------------------+
| st_AsBinary(Utf8("POINT(1 2)"))            |
+--------------------------------------------+
| 0101000000000000000000f03f0000000000000040 |
+--------------------------------------------+
```

### **ST_GeomFromWKB**

#### **Parameter Type**: STRING

```
ST_GeomFromWB( wkb)
```

Example

Example

Syntax

#### **Common Aggregate Functions**

```sql
Select ST_GeomFromWB(st_AsBinary('MULTIPOLYGON ((3020, 45 40, 10 40, 30 20)), (155, 40 10, 10 20, 5 10, 15 5)))');
```

```
+-----------------------------------------------------------------------------------------------------------------------+
| st_GeomFromWKB(st_AsBinary(Utf8("MULTIPOLYGON (((30 20, 45 40, 10 40, 30 20)),((15 5, 40 10, 10 20, 5 10, 15 5)))"))) |
+-----------------------------------------------------------------------------------------------------------------------+
| MULTIPOLYGON(((30 20,45 40,10 40,30 20)),((15 5,40 10,10 20,5 10,15 5)))                                              |
+-----------------------------------------------------------------------------------------------------------------------+
```

### Numeric type expressions add

#### **Parameter Type**: STRING

```
ST_Distance ( geom1, geom2)
```

**Function**：calculates the European distance between two collection objects.

Example

Example

#### **Parameter Type**: BIGINT

```sql
Select st_distance('POINT(0 0)', 'POLYGON (3010, 40 40, 20 40, 10 20, 30 10)');
```

```
+---------------------------------------------------------------------------------------+
| st_distance(Utf8("POINT(0 0)"),Utf8("POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))")) |
+---------------------------------------------------------------------------------------+
| 22.360679774997898                                                                    |
+---------------------------------------------------------------------------------------+
```

### Number type expressions multiply

#### **Parameter Type**: STRING

```
ST_Area( geom )
```

Example

Example

Example

#### **Parameter Type**: BIGINT

```sql
Select st_area('POLYGON (0 0,0 1,1 1,00 0))');
```

```
+-------- +
| st_Area(Utf8("POLYGON(0 0,0 1,1,1,1,1 0,0 0,0))")|
+----------+
| 
 |
+-----------
```

> **ORDER BY Clause**
> Returns value to NULL if the parameter content format is invalid.

## Number type expressions divide

**LIMIT Clause**

**Return Type** BIGINT

- CLUSER_SCHEMA on Database Cluster
- Integer

### **CLUSTER_SCHEMA**

Example

**Return Type**: STRING

### **TENANTS**

expr type is TIMESTAMP

#### **Insert Multiple Records**

| **Return Type**: Timestamp          | **Window_frame Clause** | \*（plus）、/（division）、%（modular） |
| ----------------------------------- | -------------------------------------------- | ------------------------------- |
| TENANT_NAME    | STRING                                       | **Return Type**: Timestamp      |
| TENANT_OPTIONS | STRING                                       | **ALL/DISTINCT**                |

#### **Parameter Type**: BIGINT

```sql
SELECT * FROM cluster_schema.tenants;
```

```
+-------------+---------------------------------------------------+
| tenant_name | tenant_options                                    |
+-------------+---------------------------------------------------+
| cnosdb      | {"comment":"system tenant","limiter_config":null} |
+-------------+---------------------------------------------------+
```

### **USERS**

#### **Insert Duplicate Data**

Syntax

| **Parameter Type**: Any type      | **Create External Table** | **Parameter Type**: Geometry     |
| --------------------------------- | ------------------------- | -------------------------------- |
| USER_NAME    | STRING                    | **Parameter Type**: any type     |
| IS_ADMIN     | BOOLEAN                   | **Parameter Type**: Numeric type |
| USER_OPTIONS | STRING                    | **Alter Table**                  |

#### **Parameter Type**: BIGINT

```sql
SELECT * FROM cluster_schema.users;
```

```
+-----------+----------+-------------------------------------------------------------------------------------------------+
| user_name | is_admin | user_options                                                                                    |
+-----------+----------+-------------------------------------------------------------------------------------------------+
| root      | true     | {"password":"*****","must_change_password":true,"rsa_public_key":null,"comment":"system admin"} |
+-----------+----------+-------------------------------------------------------------------------------------------------+
```

### **INFORMATION_SCHEMA**

**Return Type**: INTERVAL

### DATABASES

**Mathematical Functions**

#### **Return Type**: Double

| **Return Type**: BINARY             | **`BETWEEN AND` Expression** | **Parameter Type**: Numeric type             |
| ----------------------------------- | ---------------------------- | -------------------------------------------- |
| TENANT_NAME    | STRING                       | **Return Type**: INTERVAL                    |
| DATABASE_NAME  | STRING                       | **Return Type**: STRING                      |
| TTL                                 | STRING                       | **Return Type**: BINARY                      |
| SHARD                               | BIGINT UNSIGNED              | Number of data fragments                     |
| VNODE_DURATION | STRING                       | **Return Type**: Double                      |
| PREPLICA                            | BIGINT UNSIGNED              | Number of copies of data in cluster          |
| PERCISION                           | STRING                       | Represents the time accuracy of the database |

#### **Parameter Type**: None

```sql
SELECT * FROM information_schema.databases;
```

```
+-------------+---------------+----------+-------+----------------+---------+-----------+
| tenant_name | database_name | ttl      | shard | vnode_duration | replica | percision |
+-------------+---------------+----------+-------+----------------+---------+-----------+
| cnosdb      | public        | 365 Days | 1     | 365 Days       | 1       | NS        |
+-------------+---------------+----------+-------+----------------+---------+-----------+
```

### TABLES

**Return Type**:

#### **Return Type**: Double

| **Return Type**: BINARY             | **Window Functions** | **Parameter Type**: Numeric type    |
| ----------------------------------- | -------------------- | ----------------------------------- |
| TABLE_TENANT   | STRING               | Tenants attached to table           |
| TABLE_DATABASE | STRING               | **Return Type**: Double             |
| TABLE_NAME     | STRING               | **Parameter Type**:Any type         |
| TABLE_TYPE     | STRING               | Whether table is base table or view |
| TABLE_ENGINE   | STRING               | **ORDER BY Clause**                 |
| TABLE_OPTION   | STRING               | Example                             |

#### **Parameter Type**: None

```sql
SELECT * FROM information_schema.tables;
```

```
+--------------+----------------+------------+------------+--------------+---------------+
| table_tenant | table_database | table_name | table_type | table_engine | table_options |
+--------------+----------------+------------+------------+--------------+---------------+
| cnosdb       | public         | wind       | BASE TABLE | TSKV         | TODO          |
| cnosdb       | public         | air        | BASE TABLE | TSKV         | TODO          |
| cnosdb       | public         | sea        | BASE TABLE | TSKV         | TODO          |
+--------------+----------------+------------+------------+--------------+---------------+
```

### COLUMNS

**Return Type**:BIGINT

#### **Return Type**: BIGINT

| **Return Type**: BINARY                | ### **Regexp_Match** | **Parameter Type**: Numeric type |
| -------------------------------------- | ----------------------------------------- | -------------------------------- |
| TABLE_TENANT      | STRING                                    | Tenants attached to table        |
| TABLE_DATABASE    | STRING                                    | **Parameter Type**: Numeric type |
| TABLE_NAME        | STRING                                    | **Parameters Type**:             |
| COLUMN_NAME       | STRING                                    | **Parameter Type**: STRING       |
| ORDINAL_POSITION  | STRING                                    | **Parameter Type**: None         |
| COLUMN_TYPE       | STRING                                    | Example                          |
| IS_NULLABLE       | STRING                                    | Example                          |
| DATA_TYPE         | STRING                                    | **Conditional Functions**        |
| COMPRESSION_CODEC | STRING                                    | **Example**:                     |

#### **Parameter Type**: None

```sql
SELECT * FROM information_schema.columns;
```

```
+-------------+---------------+------------+-------------+-------------+------------------+----------------+-------------+-----------+-------------------+
| tenant_name | database_name | table_name | column_name | column_type | ordinal_position | column_default | is_nullable | data_type | compression_codec |
+-------------+---------------+------------+-------------+-------------+------------------+----------------+-------------+-----------+-------------------+
| cnosdb      | public        | wind       | time        | TIME        | 0                | NULL           | false       | TIMESTAMP | DEFAULT           |
| cnosdb      | public        | wind       | station     | TAG         | 1                | NULL           | true        | STRING    | DEFAULT           |
| cnosdb      | public        | wind       | speed       | FIELD       | 2                | NULL           | true        | DOUBLE    | DEFAULT           |
| cnosdb      | public        | wind       | direction   | FIELD       | 3                | NULL           | true        | DOUBLE    | DEFAULT           |
| cnosdb      | public        | air        | time        | TIME        | 0                | NULL           | false       | TIMESTAMP | DEFAULT           |
| cnosdb      | public        | air        | station     | TAG         | 1                | NULL           | true        | STRING    | DEFAULT           |
| cnosdb      | public        | air        | visibility  | FIELD       | 2                | NULL           | true        | DOUBLE    | DEFAULT           |
| cnosdb      | public        | air        | temperature | FIELD       | 3                | NULL           | true        | DOUBLE    | DEFAULT           |
| cnosdb      | public        | air        | pressure    | FIELD       | 4                | NULL           | true        | DOUBLE    | DEFAULT           |
| cnosdb      | public        | sea        | time        | TIME        | 0                | NULL           | false       | TIMESTAMP | DEFAULT           |
| cnosdb      | public        | sea        | station     | TAG         | 1                | NULL           | true        | STRING    | DEFAULT           |
| cnosdb      | public        | sea        | temperature | FIELD       | 2                | NULL           | true        | DOUBLE    | DEFAULT           |
+-------------+---------------+------------+-------------+-------------+------------------+----------------+-------------+-----------+-------------------+
```

### ENABLED_ROLES

**Parameter Type**: None

#### **Return Type**: BIGINT

| **Return Type**: BIGINT        | **Aggregate Function** | **Parameter Type**: Numeric type |
| ------------------------------ | ---------------------- | -------------------------------- |
| ROLE_NAME | STRING                 | **Parameter Type**: STRING       |

#### **Parameter Type**: None

```sql
SELECT * FROM information_schema.enabled_roles;
```

```
+-----------+
| role_name |
+-----------+
| owner     |
+-----------+
```

### ROLES

**Return Type**: STRING
This view is visible only to the current tenant Owner.

#### **Return Type**: BIGINT

| **Return Type**: BIGINT           | **Window Function List** | **Parameter Type**: Numeric type |
| --------------------------------- | ------------------------ | -------------------------------- |
| ROLE_NAME    | STRING                   | **Parameter Type**:              |
| ROLE_TYPE    | STRING                   | **Delete Data**                  |
| INHERIT_ROLE | STRING                   | **Example**:                     |

#### **Parameter Type**: STRING

```sql
SELECT * FROM information_schema.roles;
```

```
+-----------+-----------+--------------+
| role_name | role_type | inherit_role |
+-----------+-----------+--------------+
| owner     | system    |              |
| member    | system    |              |
+-----------+-----------+--------------+
```

### DATABASE_PRIVILEGES

#### **Return Type**: BIGINT

**Return Type**: STRING
Syntax
**Return Type**: Binary

| **Return Type**: BIGINT             | **`CASE WHEN` Expression** | **Parameter Type**: Numeric type |
| ----------------------------------- | -------------------------- | -------------------------------- |
| TENANT_NAME    | STRING                     | **Return Type**: STRING          |
| DATABASE_NAME  | STRING                     | **Return Type**: STRING          |
| PRIVILEGE_TYPE | STRING                     | Syntax                           |
| ROLE_NAME      | STRING                     | **Return Type**: STRING          |

#### **Parameter Type**: STRING

```sql
CREATE ROLE rrr INHERIT member;
GRANT READ ON DATABASE air TO ROLE rrr;
SELECT * FROM information_schema.database_privileges;
```

```
+-------------+---------------+----------------+-----------+
| tenant_name | database_name | privilege_type | role_name |
+-------------+---------------+----------------+-----------+
| cnosdb      | air           | Read           | rrr       |
+-------------+---------------+----------------+-----------+
```

### MEMBERS

**Return Type**: DOUBLE

**Return Type**: Array

#### **Return Type**: BIGINT

| **Return Type**: BIGINT        | **Alias Column Expression** | **Parameter Type**: Numeric type |
| ------------------------------ | --------------------------- | -------------------------------- |
| USER_NAME | STRING                      | **Parameter Type**:              |
| ROLE_NAME | STRING                      | **Return Type**: STRING          |

#### **Parameter Type**: STRING

```sql
SELECT * FROM information_schema.members;
```

```
+-----------+-----------+
| user_name | role_name |
+-----------+-----------+
| root      | owner     |
+-----------+-----------+
```

### QUERIES

**Return Type**: DOUBLE

**Return Type**: BIGINT

Data Type

#### **Return Type**: BIGINT

| **Return Type**: BIGINT          | **Create Table** | **Parameter Type**: Numeric type |
| -------------------------------- | ---------------- | -------------------------------- |
| QUERY_ID    | STRING           | **Return Type**: STRING          |
| QUERY_TEXT  | STRING           | **Return Type**: DOUBLE          |
| USER_ID     | STRING           | **Function Types**               |
| USER_NAME   | STRING           | **Parameter Type** Geometry      |
| TENANT_ID   | STRING           | **Return Type**: BIGINT          |
| TENANT_NAME | STRING           | **Parameter Type**:              |
| STATE                            | STRING           | Data Type                        |
| DURATION                         | BIGINT UNSIGNED  | **Parameter Type**:              |

#### **Parameter Type**: STRING

```sql
SELECT * FROM information_schema.queries;
```

```
+----------+------------------------------------------------------------------+-----------------------------------------+-----------+----------------------------------------+-------------+------------+--------------+
| query_id | query_text                                                       | user_id                                 | user_name | tenant_id                              | tenant_name | state      | duration     |
+----------+------------------------------------------------------------------+-----------------------------------------+-----------+----------------------------------------+-------------+------------+--------------+
| 36       | select * FROM air join sea ON air.temperature = sea.temperature; | 108709109615072923019194003831375742761 | root      | 13215126763611749424716665303609634152 | cnosdb      | SCHEDULING | 12.693345666 |
+----------+------------------------------------------------------------------+-----------------------------------------+-----------+----------------------------------------+-------------+------------+--------------+
```

#### SHOW QUERIES

Data Type

#### **Parameter Type**: STRING

```sql
SHOW QUERIES;
```

```
+----------+------------------------------------------------------------------+-----------------------------------------+-----------+----------------------------------------+-------------+------------+--------------+
| query_id | query_text                                                       | user_id                                 | user_name | tenant_id                              | tenant_name | state      | duration     |
+----------+------------------------------------------------------------------+-----------------------------------------+-----------+----------------------------------------+-------------+------------+--------------+
| 36       | select * FROM air join sea ON air.temperature = sea.temperature; | 108709109615072923019194003831375742761 | root      | 13215126763611749424716665303609634152 | cnosdb      | SCHEDULING | 12.693345666 |
+----------+------------------------------------------------------------------+-----------------------------------------+-----------+----------------------------------------+-------------+------------+--------------+
```

## **USAGE_SCHEMA**

**Return Type**: DOUBLE

Data Type

Data Type

### VNODE_DISK_STORAGE

Example

#### **Return Type**: BIGINT

| **Return Type**: BIGINT       | **SELECT Limitation** | **Parameter Type**: Numeric type |
| ----------------------------- | --------------------- | -------------------------------- |
| TIME                          | TIMESTAMP             | **Return Type**: BIGINT          |
| DATABASE                      | STRING                | **Return Type**: STRING          |
| NODE_ID  | STRING                | **Return Type**: BIGINT          |
| TENANT                        | STRING                | **Return Type**: STRING          |
| VNODE_ID | STRING                | **Return Type**: STRING          |
| VALUE                         | BIGINT UNSIGNED       | **Return Type**: STRING          |

Syntax

### HTTP_DATA_IN

Syntax

#### **Return Type**: BIGINT

| **Return Type**: BIGINT      | **System Schema** | **Parameter Type**: Numeric type |
| ---------------------------- | ----------------- | -------------------------------- |
| TIME                         | TIMESTAMP         | **Return Type**: BIGINT          |
| DATABASE                     | STRING            | **Return Type**: STRING          |
| NODE_ID | STRING            | **Return Type**: BIGINT          |
| TENANT                       | STRING            | **Return Type**: STRING          |
| USER                         | STRING            | **Parameter Type**: STRING       |
| HOST                         | STRING            | Service Port                     |
| API                          | STRING            | **Return Type**: BIGINT          |
| VALUE                        | BIGINT UNSIGNED   | **SELECT Clause**                |

Syntax

## HTTP_DATA_OUT

Syntax

#### **Return Type**: BIGINT

| **Parameter Type**: Numeric type | **String Functions** | **Parameter Type**: Numeric type |
| -------------------------------- | -------------------- | -------------------------------- |
| TIME                             | TIMESTAMP            | **Parameter Type**: Numeric type |
| DATABASE                         | STRING               | **Return Type**: STRING          |
| NODE_ID     | STRING               | **Return Type**: DOUBLE          |
| TENANT                           | STRING               | **Parameter Type**:              |
| USER                             | STRING               | **Parameter Type**: STRING       |
| API                              | STRING               | **Return Type**: DOUBLE          |
| HOST                             | STRING               | Service Port                     |
| VALUE                            | BIGINT UNSIGNED      | **Use Database**                 |

Syntax

### HTTP_QUERIES

**Parameter Type**:

#### **Return Type**: DOUBLE

| **Parameter Type**: Numeric type | Unsigned Integer | **Parameter Type**: Numeric type |
| -------------------------------- | ---------------- | -------------------------------- |
| TIME                             | TIMESTAMP        | **Parameter Type**: Numeric type |
| DATABASE                         | STRING           | **Return Type**: DOUBLE          |
| NODE_ID     | STRING           | **Return Type**: DOUBLE          |
| TENANT                           | STRING           | **Parameter Type**:              |
| USER                             | STRING           | **Parameter Type**: STRING       |
| API                              | STRING           | **Return Type**: DOUBLE          |
| HOST                             | STRING           | Service Port                     |
| VALUE                            | BIGINT UNSIGNED  | Number of user queries           |

Syntax

### HTTP_WRITES

**Parameter Type**:

Example

#### **Return Type**: DOUBLE

| **Parameter Type**: Numeric type | **SQL Syntax**  | **Parameter Type**: Numeric type |
| -------------------------------- | --------------- | -------------------------------- |
| TIME                             | TIMESTAMP       | **Parameter Type**: Numeric type |
| DATABASE                         | STRING          | **Return Type**: DOUBLE          |
| NODE_ID     | STRING          | **Return Type**: DOUBLE          |
| TENANT                           | STRING          | **Parameter Type**:              |
| USER                             | STRING          | **Parameter Type**: STRING       |
| HOST                             | STRING          | Service Port                     |
| API                              | STRING          | **Return Type**: DOUBLE          |
| VALUE                            | BIGINT UNSIGNED | Number of times the user wrote   |

Syntax

### COORD_DATA_IN

Syntax

#### **Return Type**: DOUBLE

| **Parameter Type**: Numeric type | **Data Query**  | **Parameter Type**: Numeric type |
| -------------------------------- | --------------- | -------------------------------- |
| **Parameter Type**: Numeric type | TIMESTAMP       | **Parameter Type**: Numeric type |
| **Parameter Type**: Numeric type | STRING          | **Return Type**: DOUBLE          |
| **Parameter Type**: STRING       | STRING          | **Return Type**: DOUBLE          |
| **Parameter Type**: Numeric type | STRING          | **Parameter Type**:              |
| **Return Type**: DOUBLE          | BIGINT UNSIGNED | **Return Type**: DOUBLE          |

Syntax

### COORD_DATA_OUT

**Return Type**: DOUBLE

#### **Return Type**: DOUBLE

| **Parameter Type**: Numeric type | Syntax          | **Numeric type**: DOUBLE |
| -------------------------------- | --------------- | ------------------------ |
| **Return Type**: DOUBLE          | TIMESTAMP       | **Return Type**: DOUBLE  |
| **Parameter Type**: STRING       | STRING          | **Return Type**: DOUBLE  |
| **Return Type**: DOUBLE          | STRING          | **Return Type**: DOUBLE  |
| **Parameter Type**:              | STRING          | **Parameter Type**:      |
| **Return Type**: DOUBLE          | BIGINT UNSIGNED | **Return Type**: DOUBLE  |

Syntax

### COORD_QUERIES

记录通过Coordinator的接受数据次数

#### **Return Type**: DOUBLE

| **Return Type**: DOUBLE | Syntax          | **Return Type**: DOUBLE |
| ----------------------- | --------------- | ----------------------- |
| **Return Type**: DOUBLE | TIMESTAMP       | **Return Type**: DOUBLE |
| **Return Type**: DOUBLE | STRING          | **Return Type**: DOUBLE |
| **Return Type**: DOUBLE | STRING          | **Return Type**: DOUBLE |
| **Return Type**: DOUBLE | STRING          | **Return Type**: DOUBLE |
| **Return Type**: DOUBLE | BIGINT UNSIGNED | **Return Type**: DOUBLE |

Syntax

### COORD_WRITES

**Return Type**: DOUBLE

#### **Return Type**: DOUBLE

| **Return Type**: DOUBLE | Syntax          | **Data Types** |
| ----------------------- | --------------- | -------------- |
| Data Type               | TIMESTAMP       | Data Type      |
| Example                 | STRING          | Example        |
| Data Type               | STRING          | Example        |
| Data Type               | STRING          | Example        |
| Example                 | BIGINT UNSIGNED | Syntax         |

Syntax

### Syntax

```sql
SELECT * FROM usage_schema.http_data_in ORDER BY time DESC LIMIT 2;
```

```
+----------------------------+--------------+--------------+---------+--------+------+-------+-----------+
| time                       | api          | host         | node_id | tenant | user | value | database  |
+----------------------------+--------------+--------------+---------+--------+------+-------+-----------+
| 2023-10-18T08:41:09.948999 | api/v1/write | 0.0.0.0:8902 | 1001    | cnosdb | root | 144   | sqlancer2 |
| 2023-10-18T08:41:09.948995 | api/v1/write | 0.0.0.0:8902 | 1001    | cnosdb | root | 251   | sqlancer1 |
+----------------------------+--------------+--------------+---------+--------+------+-------+-----------+
```

## Example

### Example

Example

#### Example

```sql
Example
```

Example

Example

Example

#### Syntax

Example

```sql
CREATE DATABASE oceanic_station;
```

```
\c oceanic_station
```

```
CREATE TABLE air(pressure DOUBLE, temperature DOUBLE, visibility DOUBLE, TAGS(station));
```

Example

```sql
CREATE STREAM TABLE air_stream(time TIMESTAMP, station STRING, pressure DOUBLE, temperature DOUBLE, visibility DOUBLE) 
    WITH (db = 'oceanic_station', table = 'air', event_time_column = 'time')
    engine = tskv;
```

### Remove Stream

> Same as delete normal expression reference to[删除表](#delete table)

### Example

Example

Example

Example

Example

#### Syntax

Syntax

Example

```sql
CREATE TABLE air_down_sampling_1hour(max_pressure DOUBLE, avg_temperature DOUBLE, sum_temperature DOUBLE, count_pressure BIGINT, TAGS(station));
```

Example

```sql
INSERT INTO air_down_sampling_1hour(time, station, max_pressure, avg_temperature, sum_temperature, count_pressure) 
SELECT 
	date_bin(INTERVAL '1' HOUR, time, TIMESTAMP '2023-01-14T16:00:00') time, 
	station, 
	MAX(pressure) max_pressure, 
	AVG(temperature) avg_temperature, 
	SUM(temperature) sum_temperature, 
	COUNT(pressure) count_pressure 
FROM air_stream 
GROUP BY date_bin(INTERVAL '1' HOUR, time, TIMESTAMP '2023-01-14T16:00:00'), station;
```

Example

Syntax

```sql
\w oceanic_station.txt
```

Syntax

```sql
SELECT * FROM air_down_sampling_1hour LIMIT 10;
```

```
+---------------------+------------+--------------+-----------------+-----------------+----------------+
| time                | station    | max_pressure | avg_temperature | sum_temperature | count_pressure |
+---------------------+------------+--------------+-----------------+-----------------+----------------+
| 2023-01-14T16:00:00 | XiaoMaiDao | 80.0         | 68.05           | 1361.0          | 20             |
| 2023-01-14T17:00:00 | XiaoMaiDao | 79.0         | 63.75           | 1275.0          | 20             |
| 2023-01-14T18:00:00 | XiaoMaiDao | 79.0         | 66.35           | 1327.0          | 20             |
| 2023-01-14T19:00:00 | XiaoMaiDao | 78.0         | 68.05           | 1361.0          | 20             |
| 2023-01-14T20:00:00 | XiaoMaiDao | 80.0         | 64.35           | 1287.0          | 20             |
| 2023-01-14T21:00:00 | XiaoMaiDao | 77.0         | 61.05           | 1221.0          | 20             |
| 2023-01-14T22:00:00 | XiaoMaiDao | 80.0         | 64.8            | 1296.0          | 20             |
| 2023-01-14T23:00:00 | XiaoMaiDao | 80.0         | 66.35           | 1327.0          | 20             |
| 2023-01-15T00:00:00 | XiaoMaiDao | 80.0         | 65.15           | 1303.0          | 20             |
| 2023-01-15T01:00:00 | XiaoMaiDao | 80.0         | 69.55           | 1391.0          | 20             |
+---------------------+------------+--------------+-----------------+-----------------+----------------+
```

## **KILL QUERY**

### Example

```sql
KILL [QUERY] query_id;
```

Example

## Syntax

```sql
SHOW QUERIES;
```

```
+----------+------+------------------------------------------------------------------+------------+----------+
| query_id | user | query                                                            | state      | duration |
+----------+------+------------------------------------------------------------------+------------+----------+
| 4        | root | select * from air join sea on air.temperature = sea.temperature; | SCHEDULING | 2703     |
| 5        | root | show queries;                                                    | SCHEDULING | 0        |
+----------+------+------------------------------------------------------------------+------------+----------+
```

```sql
KILL 4;
```

```
Query took 0.016 seconds.
```
