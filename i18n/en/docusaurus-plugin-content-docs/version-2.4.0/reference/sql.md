---
title: This schema is only visible to the Owner of the current tenant.
order: 9
---

# This schema is only visible to the Owner of the current tenant.

## Continue traversing backwards until the next non-missing value is encountered.

### Frame is a subset of the current partition, which further subdivides windows in the partition.

| Therefore, we often use ROLLUP in reports to generate subtotals and totals. The order of columns in ROLLUP is very important. | NAME                                                                                                                            | All records of this schema are visible to the Owner of the current tenant. |
| ----------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------- |
| BIGINT                                                                                                                        | COUNT(field) Returns the number of non-null values.                                                          | 8字节                                                                        |
| BIGINT UNSIGNED                                                                                                               | This schema displays information about the role of the current user under the current tenant.                                   | 8字节                                                                        |
| BOOLEAN                                                                                                                       | Stream QUERY statements are persisted and are cancelled by [KILL QUERY](#kill-query).                                           | 1字节                                                                        |
| TIMESTAMP                                                                                                                     | Status of SQL, including: ACCEPTING,DISPATCHING,ANALYZING,OPTMIZING,SCHEDULING                                                  | 8字节                                                                        |
| STRING                                                                                                                        | This schema allows you to query information about all users in the cluster.                                                     | ***                                                                        |
| DOUBLE                                                                                                                        | The GROUP BY clause must be after the condition of the WHERE clause and before the ORDER BY clause (if any). | 8字节                                                                        |

#### ROLLUP generates all grouping sets that are meaningful in this hierarchy. Whenever the value of column_1 changes，it will generate a subtotal line；

**Function**: Round down.

| Therefore, we often use ROLLUP in reports to generate subtotals and totals. The order of columns in ROLLUP is very important. | NAME                                                                                                                                                                                                                                          | -- station is a Tag column&#xA;SELECT station FROM air;    |
| ----------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------- |
| BINARY                                                                                                                        | The definition of the schema seen by the administrator:                                                                                                                                                                                       | Grammar                                                    |
| INTERVAL                                                                                                                      | The precedence levels of the operators are given in the following table. Operators at higher levels are evaluated before operators at lower levels. In the following table, 1 represents the highest level and 8 represents the lowest level. | Field Name                                                 |
| ARRAY                                                                                                                         | For non-owner elements, only the records for the corresponding role are displayed.                                                                                                                                                            | `INTERVAL '1 YEAR'` One year(12 months) |

#### **Function**：Return the position of a substring in a specified string.

| Therefore, we often use ROLLUP in reports to generate subtotals and totals. The order of columns in ROLLUP is very important. | **Syntax**                                                                                 | Window functions and aggregate functions cannot be nested in window functions.。                                                                |
| ----------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------- |
| BIGINT                                                                                                                        | [{+-}]123                              | For non-owner members, only the SQL submitted by the current member is displayed.                                                              |
| BIGINT UNSIGNED                                                                                                               | [+]123                                 | For non-owner members, only the SQL submitted by the current member is displayed.                                                              |
| DOUBLE                                                                                                                        | 123.45                                                                                     | The database belongs to a tenant. When a tenant is created, the database is automatically created and visible to all members under the tenant. |
| BOOLEAN                                                                                                                       | {true \| false \| t \| f}                                                                  |                                                                                                                                                |
| STRING                                                                                                                        | 'abc'                                                                                      | The CLUSTER_SCHEMA database belongs to the cluster, only the administrator users have the access to the database.         |
| TIMESTAMP                                                                                                                     | TIMESTAMP '1900-01-01T12:00:00Z'                                                           | Join Operation                                                                                                                                 |
| Geometry                                                                                                                      | Name of the system role that the custom role inherits from, or NULL if it is a system role | candlestick_agg gets the open and close price of the stock and the high price.                                            |
| --                                                                                                                            | NULL                                                                                       | This schema stores information about all tables under the tenant.                                                                              |

#### To further study CnosDB, this section will provide sample data for you to download and teach you how to import data into the database. The data sources referenced in the following chapters are all from this sample data.

If the VALUES list requires an expression, please use the [INSERT SELECT](./sql.md#insert-query-results-insert-select) syntax.

This schema records the number of queries to the database.

Stream queries support only `INSERT SELECT` statements, where the FROM clause is the stream table and is inserted into the target table.

Create stream query statement

Time range of data in shard

- The SQL statement above is equivalent to inserting the following k-v pairs into the database.
- Instruction
- Download Data
- You can use the keyword `AS` to alias a column expression or table.
- Get the highest price.
- This schema can be used to query information about all tenants in the cluster.

If dropping database, all table data and metadata of the specified database will be removed.

```sql
SELECT CAST (1 AS TIMESTAMP);
```

```
+-------------------------------+
| Int64(1)                      |
+-------------------------------+
| 1970-01-01T00:00:00.000000001 |
+-------------------------------+
```

#### This schema shows the membership information under the tenant.

#### **Syntax**

1. All records of this schema are visible to the owner of the current tenant.
2. This schema can be used to query information about all tenants in the cluster.
3. Executing the following command in the shell will generate a local data file named oceanic_station in Line Protocol format.
4. algorithm specifies the algorithm for computing hash. Only md5, sha224, sha256, sha384, sha512, blake2s, blake2b, blake3 are supported.
5. CnosDB provides the system to check the status and information of CnosDB clusters. The system schema is a read-only schema. You can query the system schema using the SQL statement.
6. This schema stores tenant database information.
7. This schema stores the definitions of all columns under the tenant.
8. This schema shows all permissions on db that have been granted to the specified role under the tenant.
9. When data is written to the source table, the streaming query is triggered.
10. 8 Bytes
11. Alias
12. Function Names
13. Function Names
14. The return values of functions sha224, sha256, sha384, sha512 belong to this type.

Given a system or a value that switches between discrete states,

For example, you can use the compact_state_agg function to keep track of the system.
User name

#### Geometry

#### WKT

Show all databases or all tables or SQL in progress.
Required by time addition or subtraction and function data_bin's parameters.
Tenant ID

#### **Syntax**

```
Precedence
```

| Record the number of times the output data passes through the Coordinator.                                                                       | Get the duration, the time of the last Gauge minus the time of the first Gauge.      |
| ------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------ |
| This view records the Body size of the HTTP request.                                                                                             | `POINT (<x1> <y1>)`                                                                  |
| **Notice**: Only resources that are delayed deletion and during the delayed deletion period can be recovered by executing the RECOVER statement. | `LINESTRING (<x1> <y1>, <x2> <y2>, ...)`                                             |
| CnosDB supports updating the tag column value to NULL.                                                                                           | `POLYGON ((<x1> <y1>, <x2> <y2>, ...))`                                              |
| 多点                                                                                                                                               | `MULTIPOINT (<x1> <y1>, <x2> <y2>, ...)`                                             |
| Common users can access only the tenant information of the current session.                                                                      | `MULTILINESTRING ((<x1> <y1>, <x2> <y2>, ...), (<x1> <y1>, <x2> <y2>, ...))`         |
| Note that the INSERT statement is recorded in (#ht).                                                                          | `MULTIPOLYGON (((<x1> <y1>, <x2> <y2>, ...)), ((<x1> <y1>, <x2> <y2>, ...)))`        |
| 几何对象几何                                                                                                                                           | `GEOMETRYCOLLECTION (<geometry tag1> <wkt data1>, <geometry tag2> <wkt data2>, ...)` |

#### **Syntax**

| Record the number of times the output data passes through the Coordinator.                                                                       | **Function**: Return the number of rows retrieved in the selected element. | **Syntax**                                                                                                                                                                                                                                 |
| ------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| This view records the Body size of the HTTP request.                                                                                             | ![](/img/sql/SFA_Point.svg.png)                                            | POINT (30 10)                                                                                                                                                                                                           |
| **Notice**: Only resources that are delayed deletion and during the delayed deletion period can be recovered by executing the RECOVER statement. | ![](/img/sql/102px-SFA_LineString.svg.png)                                 | LINESTRING (30 10, 10 30, 40 40)                                                                                                                                                                                        |
| CnosDB supports updating the tag column value to NULL.                                                                                           | ![](/img/sql/SFA_Polygon.svg.png)                                          | POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))                                                                                                                                                        |
|                                                                                                                                                  | ![](/img/sql/SFA_Polygon_with_hole.svg.png)                                | POLYGON ((35 10, 45 45, 15 40, 10 20, 35 10), (20 30, 35 35, 30 20, 20 30))                                                                                                       |
| 多点                                                                                                                                               | ![](/img/sql/SFA_MultiPoint.svg.png)                                       | MULTIPOINT ((10 40), (40 30), (20 20), (30 10))                                                                                             |
|                                                                                                                                                  |                                                                            | MULTIPOINT (10 40, 40 30, 20 20, 30 10)                                                                                                                                                                                 |
| Common users can access only the tenant information of the current session.                                                                      | ![](/img/sql/102px-SFA_MultiLineString.svg.png)                            | MULTILINESTRING ((10 10, 20 20, 10 40), (40 40, 30 30, 40 20, 30 10))                                                                                                             |
| A stream query statement is triggered when data is written.                                                                                      | ![](/img/sql/SFA_MultiPolygon.svg.png)                                     | MULTIPOLYGON (((30 20, 45 40, 10 40, 30 20)), ((15 5, 40 10, 10 20, 5 10, 15 5)))                                                           |
|                                                                                                                                                  | ![](/img/sql/SFA_MultiPolygon_with_hole.svg.png)                           | MULTIPOLYGON (((40 40, 20 45, 45 30, 40 40)), ((20 35, 10 30, 10 10, 30 5, 45 20, 20 35), (30 20, 20 15, 20 25, 30 20))) |
| 几何对集合                                                                                                                                            | ![](/img/sql/SFA_GeometryCollection.svg.png)                               | GEOMETRYCOLLECTION (POINT (40 10), LINESTRING (10 10, 20 20, 10 40), POLYGON ((40 40, 20 45, 45 30, 40 40)))                                |

### The next offset line of the current line in the`offset FOLLOWING` ROWS mode. The next offset value of the current value in the RANGE mode.

#### **Syntax**

```sql
CREATE DATABASE [IF NOT EXISTS] db_name [WITH db_options];

db_options:
    db_option ...

db_option: {
      TTL value
    | SHARD value
    | VNODE_DURATION value
    | REPLICA value
    | PRECISION {'ms' | 'us' | 'ns'}
}
```

#### **Function**：Assign a unique sequence number (starting from 1) to each row according to the row order in the window partition.

1. Get the opening price.
2. User name
3. todo
4. User name
5. Get the total volume.

#### **Syntax**

```sql
> CREATE DATABASE oceanic_station;
Query took 0.062 seconds.
```

### The first offset line of the current line in the offset `offset PRECEDING` ROWS mode. The first offset value of the current value in the RANGE mode.

#### **Syntax**

```sql
SHOW DATABASES;
```

#### **Syntax**

```
+-----------------+
| database_name   |
+-----------------+
| oceanic_station |
| public          |
+-----------------+
```

### The next offset line of the current line in the `offset FOLLOWING` ROWS mode. The next offset value of the current value in the RANGE mode.

Calculate the increment of value in the time series.

Count the duration of a state, or count the duration of a state in a certain period of time.

```sql
\c dbname
```

```
public ❯ \c oceanic_station
oceanic_station ❯
```

### interval_time: This is optional and specifies the duration of the time interval or infinity if not specified.

#### **Syntax**

```sql
DROP DATABASE [IF EXISTS] db_name [AFTER '7d'];
```

The expression of time interval:

**Function**: x returns the approximate percentage (TDigest) of the weighted input value, where w is the weight column expression and p is a floating point 64 between 0 and 1 inclusive.

Common users can access only the tenant information of the current session.延迟删除期间数据库不可见且不可用。

#### **Syntax**

```sql
RECOVER DATABASE [IF EXISTS] db_name;
```

取消延迟删除，数据库恢复正常状态。

Distance between two points.

#### **Syntax**

```sql
Syntax
```

### Overwriting occurs when duplicate k-v pairs occur in the same field.

#### **Syntax**

```sql
ALTER DATABASE db_name [alter_db_options]

alter_db_options:
    SET db_option

db_option: {
      TTL value
    | SHARD value
    | VNODE_DURATION value
    | REPLICA value
}
```

#### **Syntax**

```sql
ALTER DATABASE oceanic_station SET TTL '30d';
```

### When not with AFTER, it will be deleted immediately.

#### **Syntax**

```sql
DESCRIBE DATABASE dbname;
```

#### **Syntax**

```sql
DESCRIBE DATABASE oceanic_station;
```

```
+-----+-------+----------------+---------+-----------+
| ttl | shard | vnode_duration | replica | precision |
+-----+-------+----------------+---------+-----------+
| INF | 1     | 365 Days       | 1       | NS        |
+-----+-------+----------------+---------+-----------+
```

## Copies the value of the non-missing value to the location of the missing value.

### Last Observation Carried Forward (LOCF) is a method for filling in missing values using the most recent observable values. The specific treatment is as follows:

minute

second

### If the next non-missing value is encountered, steps 1 and 2 are repeated to copy the value of that non-missing value to the missing value location.

#### **Syntax**

```sql
CREATE TABLE [IF NOT EXISTS] tb_name
(field_definition [, field_definition ] ... [, TAGS(tg_name [, tg_name] ...)]);

field_definition:
    column_name data_type [field_codec_type]
    
field_codec_type:
    CODEC(code_type)
```

#### **Function**： Return the overall covariance of number pairs in a group.

1. Total read traffic size
2. For more information about the compression algorithm, see the details of the [compression algorithm](./concept_design/compress.md#compression-algorithm).
3. Description
4. Remarks

   - BIGINT/BIGINT UNSIGNED：DELTA，QUANTILE，SDT, DEADBAND,NULL
   - DOUBLE：GORILLA，QUANTILE，SDT, DEADBAND,NULL
   - STRING：SNAPPY，ZSTD，GZIP，BZIP，ZLIB，NULL
   - BOOLEAN：BITPACK，NULL

Role name

#### **Syntax**

```sql
CREATE TABLE air (
   visibility DOUBLE,
   temperature DOUBLE,
   pressure DOUBLE,
   TAGS(station)
);
```

```
Query took 0.033 seconds.
```

### Timestamp, the keyword TIMESTAMP indicates that the following string constant need to be interpreted as TIMESTAMP type.

#### **Syntax**

```sql
Time Stamp
```

#### **Function**： Return the overall covariance of number pairs in a group.

1. PARTITION BY Clause
2. Example：

#### **Function**：Assign a unique sequence number (starting from 1) to each row according to the row order in the window partition.

1. Interpolation Function
2. Tenant ID
3. User name
4. Tenant name
5. millisecond

#### **Syntax**

```sql
CREATE EXTERNAL TABLE cpu (
     cpu_hz  DECIMAL(10,6) NOT NULL,
     temp  DOUBLE NOT NULL,
     version_num  BIGINT NOT NULL,
     is_old  BOOLEAN NOT NULL,
     weight  DECIMAL(12,7) NOT NULL
)
STORED AS CSV
WITH HEADER ROW
LOCATION 'tests/data/csv/cpu.csv';
```

```
Query took 0.031 seconds.
```

### interval_time: This is optional; it specifies the duration of the time interval or infinity if not specified.

#### **Syntax**

```sql
DROP TABLE [ IF EXISTS ] tb_name;
```

#### **Syntax**

```sql
DROP TABLE IF EXISTS air;
```

```
Query took 0.033 seconds.
```

### Calculate the standard deviation of the specified dimension after two-dimensional statistical aggregation, and the method is `sample`.

#### **Syntax**

```sql
SHOW TABLES;
```

#### **Syntax**

```sql
SHOW TABLES;
```

```
+------------+
| table_name |
+------------+
| air        |
| sea        |
| wind       |
+------------+
```

### The CTE defined in the WITH clause can only be used for other CTEs in the same WITH clause defined later.&#xA;Suppose A is the first CTE in the clause and B is the second CTE in the clause:

外部表和普通表的模式都可以使用该语句查看。

#### **Syntax**

```sql
DESCRIBE DATABASE table_name;
```

#### **Syntax**

```sql
DESCRIBE TABLE air;
```

```
+-------------+-----------------------+-------------+-------------------+
| column_name | data_type             | column_type | compression_codec |
+-------------+-----------------------+-------------+-------------------+
| time        | TIMESTAMP(NANOSECOND) | TIME        | DEFAULT           |
| station     | STRING                | TAG         | DEFAULT           |
| pressure    | DOUBLE                | FIELD       | DEFAULT           |
| temperature | DOUBLE                | FIELD       | DEFAULT           |
| visibility  | DOUBLE                | FIELD       | DEFAULT           |
+-------------+-----------------------+-------------+-------------------+
```

### At present, the compression algorithms supported by various types are as follows. The first one of each type is the default specified algorithm. NULL means no compression algorithm is used.

WHERE sets conditions on the selected column before the GROUP BY clause, while HAVING clause sets conditions on the group generated by the GROUP BY clause.

If a complex expression has more than one operator, operator precedence determines the sequence of operations. The order of execution may have a noticeable effect on the resulting value.

1. 1 Byte
2. Common users can access only the tenant information of the current session.
3. +08:00 represents the East 8th District

#### **Syntax**

```sql
Show the result
```

> 不支持修改 `time` 列名。
> Description

#### **Syntax**

```sql
ALTER TABLE air ADD TAG height;
ALTER TABLE air ADD FIELD humidity DOUBLE CODEC(DEFAULT);
ALTER TABLE air ALTER humidity SET CODEC(QUANTILE);
ALTER TABLE air DROP humidity;
ALTER TABLE air RENAME COLUMN height to height_v2;
```

## The last row of partition in `UNBOUND FOLLOWING` ROWS mode.The last value of ORDER BY expression in RANGE mode.

Count the duration of the 'running' state starting 2020-01-01 11:00:00.

Calculate the average of the specified dimensions after the aggregation of 2-D statistics.

### **INSERT**

#### **Syntax**

```sql
INSERT [INTO] tb_name [ ( column_name [, ...] ) ] VALUES (  const [, ...] ) [, ...] | query; 
```

WHERE sets conditions on the selected column before the GROUP BY clause, while HAVING clause sets conditions on the group generated by the GROUP BY clause.

User name
Instructions

The CTE defined in the WITH clause can only be used for other CTEs in the same WITH clause defined later. Suppose A is the first CTE in the clause and B is the second CTE in the clause：

Operator Precedence

common users:

The time stamp is based on RCF3339 standard.

### If the compression algorithm is not specified when creating a table, the system default compression algorithm is used.

Nmuber of shards

#### **Syntax**

```sql
CREATE TABLE air (
    visibility DOUBLE,
    temperature DOUBLE,
    pressure DOUBLE,
    TAGS(station)
);
```

```
Query took 0.027 seconds.
```

```sql
INSERT INTO air (TIME, station, visibility, temperature, pressure) VALUES
                (1666165200290401000, 'XiaoMaiDao', 56, 69, 77);
```

```
+------+
| rows |
+------+
| 1    |
+------+
Query took 0.044 seconds.
```

```sql
INSERT INTO air (TIME, station, visibility, temperature, pressure) VALUES
                ('2022-10-19 06:40:00', 'XiaoMaiDao', 55, 68, 76);
```

```
+------+
| rows |
+------+
| 1    |
+------+
Query took 0.032 seconds.
```

```sql
SELECT * FROM air;
```

```
+----------------------------+------------+------------+-------------+-----------+
| time                       | station    | visibility | temperature | pressure |
+----------------------------+------------+------------+-------------+-----------+
| 2022-10-18 22:40:00        | XiaoMaiDao | 55         | 68          | 76        |
| 2022-10-19 07:40:00.290401 | XiaoMaiDao | 56         | 69          | 77        |
+----------------------------+------------+------------+-------------+-----------+
```

The CTE defined in the WITH clause can only be used for other CTEs in the same WITH clause defined later. Suppose A is the first CTE in the clause and B is the second CTE in the clause：

User name

### If RANGE is specified, the ORDER BY clause must be specified. The window calculates the offset in the unit of the value of the ORDER BY expression.

Whether administrator

#### The keyword `FULL JOIN` or `FULL OUTER JOIN` defines a full connection, which is actually the union of LEFT OUTER JOIN and RIGHT OUTER JOIN. It will display all the rows on the left and right of the join, and will generate null values where either side of the join does not match.

```sql
INSERT INTO air (TIME, station, visibility, temperature, pressure) VALUES
                ('2022-10-19 05:40:00', 'XiaoMaiDao', 55, 68, 76), 
                ('2022-10-19 04:40:00', 'XiaoMaiDao', 55, 68, 76);
```

```
+------+
| rows |
+------+
| 2    |
+------+
Query took 0.037 seconds.
```

```sql
SELECT * FROM air;
```

```
+----------------------------+------------+------------+-------------+-----------+
| time                       | station    | visibility | temperature | pressure |
+----------------------------+------------+------------+-------------+-----------+
| 2022-10-18 20:40:00        | XiaoMaiDao | 55         | 68          | 76        |
| 2022-10-18 21:40:00        | XiaoMaiDao | 55         | 68          | 76        |
| 2022-10-18 22:40:00        | XiaoMaiDao | 55         | 68          | 76        |
| 2022-10-19 07:40:00.290401 | XiaoMaiDao | 56         | 69          | 77        |
+----------------------------+------------+------------+-------------+-----------+
```

### Multi-polygon

Number of replica

#### **Syntax**

```sql
8 Bytes
```

```
Query took 0.027 seconds.
```

```sql
Policy
```

```
+------+
| rows |
+------+
| 4    |
+------+
Query took 0.045 seconds.
```

```sql
SELECT * FROM air_visibility;
```

```
+----------------------------+------------+------------+
| time                       | station    | visibility |
+----------------------------+------------+------------+
| 2022-10-18 20:40:00        | XiaoMaiDao | 55         |
| 2022-10-18 21:40:00        | XiaoMaiDao | 55         |
| 2022-10-18 22:40:00        | XiaoMaiDao | 55         |
| 2022-10-19 07:40:00.290401 | XiaoMaiDao | 56         |
+----------------------------+------------+------------+
```

### If ROWS is specified, the window will calculate the offset in row units.

[//]: # "2.3"

Instructions

```
CREATE TABLE air (
    visibility DOUBLE,
    temperature DOUBLE,
    pressure DOUBLE,
    TAGS(station)
);
INSERT INTO air (TIME, station, visibility, temperature) VALUES
(1666165200290401000, 'XiaoMaiDao', 56, 69);
```

Geometry-collection

| key                                                    | visibility-value | temperature-value | pressure-value |
| ------------------------------------------------------ | ---------------- | ----------------- | -------------- |
| (1666165200290401000, 'XiaoMaiDao') | 56               |                   |                |
| (1666165200290401000, 'XiaoMaiDao') |                  | 69                |                |

CnosDB supports updating single or multiple field column values separately. It does not support updating tag column and field column at the same time.

```
select * from air;
----
+----------------------------+------------+------------+-------------+----------+
| time                       | station    | visibility | temperature | pressure |
+----------------------------+------------+------------+-------------+----------+
| 2022-10-19T07:40:00.290401 | XiaoMaiDao | 56.0       | 69.0        |          |
+----------------------------+------------+------------+-------------+----------+
```

Instructions

```sql
INSERT INTO air (TIME, station, visibility) VALUES
(1666165200290401000, 'XiaoMaiDao', 66);
```

相当于插入

| key                                                    | visibility-value | temperature-value | pressure-value |
| ------------------------------------------------------ | ---------------- | ----------------- | -------------- |
| (1666165200290401000, 'XiaoMaiDao') | 66               |                   |                |

Tenant name

```
select * from air;
----
+----------------------------+------------+------------+-------------+----------+
| time                       | station    | visibility | temperature | pressure |
+----------------------------+------------+------------+-------------+----------+
| 2022-10-19T07:40:00.290401 | XiaoMaiDao | 66.0       | 69.0        |          |
+----------------------------+------------+------------+-------------+----------+
```

```sql
INSERT INTO air (TIME, station, pressure) VALUES
(1666165200290401000, 'XiaoMaiDao', 77);
```

相当于插入

| key                                                    | visibility-value | temperature-value | pressure-value |
| ------------------------------------------------------ | ---------------- | ----------------- | -------------- |
| (1666165200290401000, 'XiaoMaiDao') |                  |                   | 77             |

```
select * from air;
----
+----------------------------+------------+------------+-------------+----------+
| time                       | station    | visibility | temperature | pressure |
+----------------------------+------------+------------+-------------+----------+
| 2022-10-19T07:40:00.290401 | XiaoMaiDao | 66.0       | 69.0        | 77.0     |
+----------------------------+------------+------------+-------------+----------+
```

## In the SELECT query, the HAVING clause must follow the GROUP BY clause and appear before the ORDER BY clause (if there is one).

### Contain the DISTINCT keyword, which counts the results after deduplication.

#### **Syntax**

```
Size
```

#### **Function**： Return the overall covariance of number pairs in a group.

1. Explanation
2. Calculate the variance of the specified dimension after aggregating the two-dimensional statistics, and the method is `sample`.
3. geometry object
4. `where_clause` 中不能包含 field 列或 time 列，且不能为空，如果想更新表中所有数据，需要使用 'where true'，这代表你接受在表数据量比较大时带来的性能问题。
5. volume: Double
6. Description

#### **Syntax**

```sql
update air set station = 'ShangHai' where station = 'LianYunGang';
```

### This view records the number of times the user writes to the DB over HTTP.

#### **Syntax**

```sql
UPDATE table_name SET ( assignment_clause [, ...] ) where_clause

assignment clause :
    field_name = value_expression
```

#### **Function**： Return the overall covariance of number pairs in a group.

1. Instructions

#### **Syntax**

```sql
update air set pressure = pressure + 100 where pressure = 68 and time < '2023-01-14T16:03:00';
```

## **Query data**

Get the time of the opening price.

**Note**：In order to query more efficiently, the order of each row may not be the same for queries without specified sorting

### `1997-01-31 09:26:56`     # Close to RCF3339, replace T by space, and no time zone is specified

**Conditional Functions**后面章节中引用的数据源都来自此示例数据。

### Download Data

Rank Functions

**COUNT**

```shell
curl -o oceanic_station.txt https://dl.cnosdb.com/sample/oceanic_station.txt
```

### In the SELECT query, the HAVING clause must follow the GROUP BY clause and appear before the ORDER BY clause (if any).

- Determines whether the left expression matches the pattern of the right expression
  ```shell
      cnosdb-cli
  ```
- The next offset line of the current line in the`offset FOLLOWING` ROWS mode. The next offset value of the current value in the RANGE mode.
  ```shell
  create database oceanic_station;
  ```
- When len is a negative number, len represents 0. When len is too large, function execution fails.
  ```shell
  \c oceanic_station
  ```
- Timestamp, the keyword TIMESTAMP indicates that the following string constant need to be interpreted as TIMESTAMP type.

  Number type expressions multiply

  ```shell
  \w oceanic_station.txt
  ```

## Common users can access only the tenant information of the current session.

#### **Syntax**

```sql
[ WITH with_query [, ...] ]
SELECT [ ALL | DISTINCT ] select_expression [, ...]
    [ FROM from_item [, ...] ]
    [ WHERE condition ]
    [ GROUP BY [ ALL | DISTINCT ] grouping_element [, ...] ]
    [ HAVING condition ]
    [ { UNION | INTERSECT | EXCEPT } [ ALL | DISTINCT ] select ]
    [ ORDER BY expression [ ASC | DESC ] [, ...] ]
    [ OFFSET count ]
    [ LIMIT { count | ALL } ];

-- from_item
-- 1.
    tb_name [ [ AS ] alias [ ( column_alias [, ...] ) ] ]
-- 2.
    from_item join_type from_item
    { ON join_condition | USING ( join_column [, ...] ) }

-- join_type
    [ INNER ] JOIN
    LEFT [ OUTER ] JOIN
    RIGHT [ OUTER ] JOIN
    FULL [ OUTER ] JOIN
    CROSS JOIN

-- grouping_element
    ()
```

### Common users can access only the tenant information of the current session.

### SELECT \*

`slide_duration` is a STRING, which is resolved as an interval and specifies the sliding size of the time window. If this parameter is not specified, slide_duration is the sliding size of the time window and becomes a rolling window.

#### **Syntax**

```
SELECT * FROM air;
```

```
+---------------------+-------------+------------+-------------+----------+
| time                | station     | visibility | temperature | pressure |
+---------------------+-------------+------------+-------------+----------+
| 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       |
| 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       |
| 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       |
| 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       |
| 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       |
| 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       |
| 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       |
| 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       |
| 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       |
| 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       |
| 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       |
| 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       |
| 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       |
+---------------------+-------------+------------+-------------+----------+
```

### Return the series in the specified table.

#### **Syntax**

```sql
SELECT [ ALL | DISTINCT ] select_expression [, ...];
```

After the keyword `SELECT`, you can use `DISTINCT`to remove duplicate fields and return only the values after duplicate removal. Using ALL returns all duplicate values in the field. When this option is not specified, the default value is `ALL`。
System Schema不指定此选项时，默认值为`ALL`。

#### **Syntax**

```sql
SELECT DISTINCT station, visibility FROM air;
```

```
+-------------+------------+
| station     | visibility |
+-------------+------------+
| XiaoMaiDao  | 56         |
| XiaoMaiDao  | 50         |
| XiaoMaiDao  | 67         |
| XiaoMaiDao  | 65         |
| XiaoMaiDao  | 53         |
| XiaoMaiDao  | 74         |
| XiaoMaiDao  | 71         |
| LianYunGang | 78         |
| LianYunGang | 79         |
| LianYunGang | 59         |
| LianYunGang | 67         |
| LianYunGang | 80         |
+-------------+------------+
```

```sql
SELECT station, visibility FROM air;
```

```
+-------------+------------+
| station     | visibility |
+-------------+------------+
| XiaoMaiDao  | 56         |
| XiaoMaiDao  | 50         |
| XiaoMaiDao  | 67         |
| XiaoMaiDao  | 65         |
| XiaoMaiDao  | 53         |
| XiaoMaiDao  | 74         |
| XiaoMaiDao  | 71         |
| LianYunGang | 78         |
| LianYunGang | 79         |
| LianYunGang | 59         |
| LianYunGang | 67         |
| LianYunGang | 80         |
| LianYunGang | 59         |
+-------------+------------+
```

### Determines whether the left expression matches the pattern of the right expression

Total read traffic size

### 为列表达式取别名

#### **Syntax**

```sql
expression [ [ AS ] column_alias ]
```

#### **Syntax**

```sql
SELECT station s, visibility AS v FROM air;
```

```
+-------------+----+
| s           | v  |
+-------------+----+
| XiaoMaiDao  | 56 |
| XiaoMaiDao  | 50 |
| XiaoMaiDao  | 67 |
| XiaoMaiDao  | 65 |
| XiaoMaiDao  | 53 |
| XiaoMaiDao  | 74 |
| XiaoMaiDao  | 71 |
| LianYunGang | 78 |
| LianYunGang | 79 |
| LianYunGang | 59 |
| LianYunGang | 67 |
| LianYunGang | 80 |
| LianYunGang | 59 |
+-------------+----+
```

### The first offset line of the current line in the offset`offset PRECEDING` ROWS mode. The first offset value of the current value in the RANGE mode.

Stream

#### **Syntax**

```sql
FROM tb_name [AS] alias_name
```

#### **Syntax**

```sql
SELECT a.visibility, s.temperature
FROM air AS a JOIN sea s ON a.temperature = s.temperature limit 10;
```

```
+------------+-------------+
| visibility | temperature |
+------------+-------------+
| 67         | 62          |
| 50         | 78          |
| 50         | 78          |
| 65         | 79          |
+------------+-------------+
```

### Binary operators and two expressions are combined to form a new expression.

- Type

  #### **Syntax**

  ```sql
  -- station is a Tag column，temperature is a Field column.
  SELECT station, temperature FROM air;
  ```

  ```
  +-------------+-------------+
  | station     | temperature |
  +-------------+-------------+
  | XiaoMaiDao  | 69          |
  | XiaoMaiDao  | 78          |
  | XiaoMaiDao  | 62          |
  | XiaoMaiDao  | 79          |
  | XiaoMaiDao  | 53          |
  | XiaoMaiDao  | 72          |
  | XiaoMaiDao  | 71          |
  | LianYunGang | 69          |
  | LianYunGang | 80          |
  | LianYunGang | 74          |
  | LianYunGang | 70          |
  | LianYunGang | 70          |
  | LianYunGang | 70          |
  +-------------+-------------+
  ```

  ```sql
  Tenant name
  ```

  ```
  +-------------+
  | station     |
  +-------------+
  | XiaoMaiDao  |
  | LianYunGang |
  +-------------+ 
  ```

### External tables do not exist in the database, but an operating system file is accessed as a common database table.

#### **Syntax**

```sql
LIMIT n
```

Limit the number of rows returned from the result set to n, and n must be non-negative.

#### **Syntax**

```sql
SELECT *
FROM air LIMIT 10;
```

```
+---------------------+-------------+------------+-------------+----------+
| time                | station     | visibility | temperature | pressure |
+---------------------+-------------+------------+-------------+----------+
| 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       |
| 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       |
| 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       |
| 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       |
| 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       |
| 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       |
| 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       |
| 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       |
| 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       |
| 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       |
+---------------------+-------------+------------+-------------+----------+
```

### **OFFSET Clause**

#### **Syntax**

```sql
OFFSET m
```

The returned result set skips m records. default m=0.
**Example**

#### **Syntax**

```sql
SELECT *
FROM air OFFSET 10;
```

```
+---------------------+-------------+------------+-------------+----------+
| time                | station     | visibility | temperature | pressure |
+---------------------+-------------+------------+-------------+----------+
| 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       |
| 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       |
| 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       |
+---------------------+-------------+------------+-------------+----------+
```

`OFFSET`can be used with the`LIMIT`statement to specify the number of lines to skip.The format is `LIMIT n OFFSET m`，or it can be abbreviated as LIMIT n, m. LIMIT n controls the output of n rows of data, and OFFSET m indicates the number of rows skipped before starting to return data. OFFSET 0 has the same effect as omitting the OFFSET clause.
Role name under the tenant
OFFSET 0与省略OFFSET子句效果相同。

#### **Syntax**

```sql
SELECT *
FROM air LIMIT 3 OFFSET 3;
```

```
+---------------------+------------+------------+-------------+----------+
| time                | station    | visibility | temperature | pressure |
+---------------------+------------+------------+-------------+----------+
| 2022-01-28 13:30:00 | XiaoMaiDao | 65         | 79          | 77       |
| 2022-01-28 13:33:00 | XiaoMaiDao | 53         | 53          | 68       |
| 2022-01-28 13:36:00 | XiaoMaiDao | 74         | 72          | 68       |
+---------------------+------------+------------+-------------+----------+
```

### Alias

#### **Syntax**

```sql
WITH cte AS cte_query_definiton [, ...] query
```

可选。Optional. The WITH clause contains one or more commonly used expressions CTE (Common Table Expression). CTE acts as a temporary table in the current running environment, which you can refer to in subsequent queries.The rules for using CTE are as follows：
\*\*Notice:\*\*CTE使用规则如下：

- In databases, interpolation is a technique used to deal with missing values in data. When there are missing values in the data, these techniques can help us estimate or speculate on those missing values, thus filling in the gaps in the data.
- The CTE defined in the WITH clause can only be used for other CTEs in the same WITH clause defined later. Suppose A is the first CTE in the clause and B is the second CTE in the clause：
  假设A是子句中的第一个CTE，B是子句中的第二个CTE：

#### **Syntax**

```sql
SELECT station, avg 
FROM (  SELECT station, AVG(visibility) AS avg 
        FROM air 
        GROUP BY station) AS x;
```

```
+-------------+--------------------+
| station     | avg                |
+-------------+--------------------+
| XiaoMaiDao  | 62.285714285714285 |
| LianYunGang | 70.33333333333333  |
+-------------+--------------------+
```

```sql
WITH x AS 
    (SELECT station, AVG(visibility) AS avg FROM air GROUP BY station)
SELECT station, avg
FROM x;
```

```
+-------------+--------------------+
| station     | avg                |
+-------------+--------------------+
| XiaoMaiDao  | 62.285714285714285 |
| LianYunGang | 70.33333333333333  |
+-------------+--------------------+
```

### **UNION Clause**

administrator:

#### **Syntax**

```
select_clause_set_left
[ UNION | UNION ALL| EXCEPT | INTERSECT]
select_clause_set_right
[sort_list_columns] [limit_clause]
```

`UNION` 会对合并的结果集去重。
Type
User name under tenant
Role name

The CTE defined in the WITH clause can only be used for other CTEs in the same WITH clause defined later. Suppose A is the first CTE in the clause and B is the second CTE in the clause：

The definition of the schema seen by the administrator:

#### **Syntax**

- **UNION ALL**

  ```sql
  SELECT visibility FROM air WHERE temperature < 60
  UNION ALL
  SELECT visibility FROM air WHERE temperature > 50 LIMIT 10;
  ```

  ```
  +------------+
  | visibility |
  +------------+
  | 53         |
  | 56         |
  | 50         |
  | 67         |
  | 65         |
  | 53         |
  | 74         |
  | 71         |
  | 78         |
  | 79         |
  +------------+
  ```

- **UNION**

  ```sql
  SELECT visibility FROM air WHERE temperature < 60
  UNION
  SELECT visibility FROM air WHERE temperature > 50 LIMIT 10;
  ```

  ```
  +------------+
  | visibility |
  +------------+
  | 53         |
  | 56         |
  | 50         |
  | 67         |
  | 65         |
  | 74         |
  | 71         |
  | 78         |
  | 79         |
  | 59         |
  +------------+
  ```

- **EXCEPT**

  ```sql
  SELECT visibility FROM air
  EXCEPT
  SELECT visibility FROM air WHERE temperature < 50 LIMIT 10;
  ```

  ```
  +------------+
  | visibility |
  +------------+
  | 56         |
  | 50         |
  | 67         |
  | 65         |
  | 53         |
  | 74         |
  | 71         |
  | 78         |
  | 79         |
  | 59         |
  +------------+
  ```

- **INTERSECT**

  ```sql
  SELECT visibility FROM air
  INTERSECT
  SELECT visibility FROM air WHERE temperature > 50 LIMIT 10;
  ```

  ```
  +------------+
  | visibility |
  +------------+
  | 56         |
  | 50         |
  | 67         |
  | 65         |
  | 53         |
  | 74         |
  | 71         |
  | 78         |
  | 79         |
  | 59         |
  +------------+
  ```

### Data Type

按引用的表达式对结果进行排序。默认情况使用升序 (ASC)。common user:

#### **Syntax**

```sql
SELECT * FROM air ORDER BY temperature;
```

```
+---------------------+-------------+------------+-------------+----------+
| time                | station     | visibility | temperature | pressure |
+---------------------+-------------+------------+-------------+----------+
| 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       |
| 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       |
| 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       |
| 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       |
| 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       |
| 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       |
| 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       |
| 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       |
| 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       |
| 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       |
| 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       |
| 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       |
| 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       |
+---------------------+-------------+------------+-------------+----------+
```

```sql
SELECT * FROM air ORDER BY temperature DESC;
```

```
+---------------------+-------------+------------+-------------+----------+
| time                | station     | visibility | temperature | pressure |
+---------------------+-------------+------------+-------------+----------+
| 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       |
| 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       |
| 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       |
| 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       |
| 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       |
| 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       |
| 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       |
| 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       |
| 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       |
| 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       |
| 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       |
| 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       |
| 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       |
+---------------------+-------------+------------+-------------+----------+
```

```sql
SELECT * FROM air ORDER BY station, temperature;
```

```
+---------------------+-------------+------------+-------------+----------+
| time                | station     | visibility | temperature | pressure |
+---------------------+-------------+------------+-------------+----------+
| 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       |
| 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       |
| 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       |
| 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       |
| 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       |
| 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       |
| 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       |
| 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       |
| 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       |
| 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       |
| 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       |
| 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       |
| 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       |
+---------------------+-------------+------------+-------------+----------+
```

## Drop Column: drop the field column. When dropping a column results in dropping the last field value of a row, we think that this row has no value, and this row will not be showed in SELECT.

todo
简单表达式可以是一个常量、变量、列或标量函数。
可以用运算符将两个或更多的简单表达式联接起来组成复杂表达式。

#### **Syntax**

```sql
<expresion> :: = { 
    constant 
    | [ table_name. ] column   
    | scalar_function 
    | ( expression ) 
    | expression { binary_operator } expression   
    | case_when_expression
    | window_function | aggregate_function  
}
```

#### **Function**：Return the position of a substring in a specified string.

The time_window_gapfill must be used as a top-level expression in a query or subquery. For example, you cannot nest time_window_gapfill in another function, such as sum(time_window_gapfill(xxx)).
详细内容请阅览[常量](#常量)。

#### **Syntax**

```sql
select 1;
```

```
+----------+
| Int64(1) |
+----------+
| 1        |
+----------+
```

#### CnosDB supports two data inserting methods: one is to use the`INSERT INTO`statement, and the other is to use the HTTP API [write](./rest_api.md) interface to insert Line Protocol format data.

Currently, only common tables can be source tables. Field names and field types defined in flow table fields must belong to the source table and be the same as those defined in the source table.

#### `event_time_column` Specifies the event time column. The data type of this column must be TIMESTAMP.

| WITH HEADER ROW：Effective only in csv file format, representing with csv header. | Window functions and aggregate functions cannot be nested in window functions.。 |
| -------------------------------------------------------------------------------- | ------------------------------------------------------------------------------- |
| NOT                                                                              | **Function**： Calculate the standard deviation of the sample.                   |
| IS NULL                                                                          | Sample Data                                                                     |
| IS NOT NULL                                                                      | CLUSTER_SCHEMA : The information of the cluster.           |

#### CREATE STREAM TABLE [IF NOT EXISTS] table_name(field_definition [, field_definition] ...)&#xA;WITH (db = 'db_name', table = 'table_name', event_time_column = 'time_column')&#xA;engine = tskv;&#xA;field_definition:&#xA;column_name data_type

If you use the database through [HTTP API](./rest_api.md), you can specify the parameter db=database_ name in the url to use the database.

Describe the parameters of the database and the pattern of the table.

| WITH HEADER ROW：Effective only in csv file format, representing with csv header. | Window functions and aggregate functions cannot be nested in window functions.。                                                     |
| -------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------- |
| -                                                                                | For system administrators, the entire table in USAGE_SCHEMA is visible.                                        |
| *                                                                                | `EXPLAIN` is only used to display the execution plan of a query, and does not execute the query.                                    |
| -                                                                                | **Function**： Starting from the origin, the bucket is split by interval, and the bucket timestamp of the source is returned.        |
| /                                                                                | This schema shows a real-time snapshot of SQL statements, which is used to monitor SQL jobs in real time.                           |
| %                                                                                | If the SELECT clause contains only the Tag column, it is equivalent to the SELECT DISTINCT Tag column.                             |
| \|\&#124                                                                         | INFORMATION_SCHEMA : The information of the tenant.                                                            |
| =                                                                                | There is no need to create a timestamp column when creating a table. The system automatically adds a timestamp column named "time". |
| !=、 <\&gt                                                                        | **Function**： Return the maximum value in the selected element.                                                                     |
| <                                                                                | Column type, unique to the tskv table, supports TIME, TAG, FIELD, and usually Field                                                 |
| <=                                                                               | **Start the CLI**                                                                                                                   |
| &gt;                                                                        | **Function**：Convert to a microsecond-level timestamp.                                                                              |
| > =                                                                              | `1997-01-31T09:26:56.123Z` # Standard RCF3339, UTC time zone                                                                        |
| AND                                                                              | CnosDB provides `ROLLUP`，`CUBE`and other complex grouping operations, enabling you to operate query results in different ways.      |
| OR                                                                               | LIMIT Clause                                                                                                                        |
| LIKE                                                                             | day                                                                                                                                 |

### candlestick_agg generates intermediate aggregate data CandleStackData from raw quote data,

#### **Syntax**

```sql
expr BETWEEN expr AND expr
```

#### **Syntax**

```sql
SELECT DISTINCT PRESSURE FROM AIR WHERE PRESSURE BETWEEN 50 AND 60;
```

```
+----------+
| pressure |
+----------+
| 52       |
| 54       |
| 57       |
| 50       |
| 60       |
| 51       |
| 56       |
| 58       |
| 59       |
| 53       |
| 55       |
+----------+
```

**Drop Database**

### Filter and delete data by tag and time columns.

as follows：

#### **Syntax**

```sql
SELECT station, temperature, visibility FROM air WHERE temperature  IN (68, 69);
```

```
+-------------+-------------+------------+
| station     | temperature | visibility |
+-------------+-------------+------------+
| XiaoMaiDao  | 69          | 56         |
| LianYunGang | 69          | 78         |
+-------------+-------------+------------+
```

Name of the database to which the permission was granted

Operator

### Find the most recent non-missing value before the missing value.

Total write traffic size

#### **Syntax**

```sql
CASE
    ( WHEN expression THEN result1 [, ...] )
    ELSE result
END;
```

#### **Syntax**

```sql
SELECT DISTINCT 
    CASE WHEN PRESSURE >= 60 THEN 50 
         ELSE PRESSURE 
    END PRESSURE 
FROM AIR;
```

```
+----------+
| pressure |
+----------+
| 52       |
| 54       |
| 57       |
| 50       |
| 51       |
| 56       |
| 58       |
| 59       |
| 53       |
| 55       |
+----------+
```

### You can also use `INSERT SELECT` to insert query data into the table.

Size 执行顺序可能对结果值有明显的影响。

运算符的优先级别如下表中所示。 在较低级别的运算符之前先对较高级别的运算符进行求值。 The time_window_gapfill is similar to time_window, but has the ability to fill in missing data. Interpolate and locf must be used in conjunction with time_window_gapfill, which controls how missing values are treated.

| 级别 | WITH HEADER ROW：Effective only in csv file format, representing with csv header.                                                |
| -- | ------------------------------------------------------------------------------------------------------------------------------- |
| 2  | You can also see the executing SQL statements using the 'SHOW QUERIES' statement, which is a wrapper around the QUERIES schema. |
| 3  | The definition of the schema seen by the administrator:                                                                         |
| 4  | The tenant of the database                                                                                                      |
| 10 | NOT                                                                                                                             |
| 9  | AND                                                                                                                             |
| 5  | BETWEEN、IN、LIKE、OR                                                                                                              |

### **SHOW**

#### **Syntax**

```sql
In the streaming down-sampling scenario, the source table interval is one minute, and the down-sampling interval is one hour
```

Double Precision Floating Point

#### **Syntax**

```sql
SHOW DATABASES;
```

```
+---------------+
| database_name |
+---------------+
| public        |
+---------------+
```

```sql
SHOW TABLES;
```

```
+------------+
| table_name |
+------------+
| air        |
| sea        |
| wind       |
+------------+
```

```sql
SHOW QUERIES;
```

```
+----------+------------------------------------------------------------------+-----------------------------------------+-----------+----------------------------------------+-------------+------------+--------------+
| query_id | query_text                                                       | user_id                                 | user_name | tenant_id                              | tenant_name | state      | duration     |
+----------+------------------------------------------------------------------+-----------------------------------------+-----------+----------------------------------------+-------------+------------+--------------+
| 36       | select * FROM air join sea ON air.temperature = sea.temperature; | 108709109615072923019194003831375742761 | root      | 13215126763611749424716665303609634152 | cnosdb      | SCHEDULING | 12.693345666 |
+----------+------------------------------------------------------------------+-----------------------------------------+-----------+----------------------------------------+-------------+------------+--------------+
```

common user:

#### SHOW SERIES

hour

#### **Syntax**

```sql
SHOW SERIES [ON database_name] FROM table_name [WHERE expr] [order_by_clause] [limit_clause] 
```

#### **Syntax**

```sql
SHOW SERIES FROM air WHERE station = 'XiaoMaiDao' ORDER BY key LIMIT 1;
```

```
+------------------------+
| key                    |
+------------------------+
| air,station=XiaoMaiDao |
+------------------------+
```

The CTE defined in the WITH clause can only be used for other CTEs in the same WITH clause defined later. Suppose A is the first CTE in the clause and B is the second CTE in the clause：

x: double

#### SHOW TAG VALUES

#### **Syntax**

```sql
SHOW TAG VALUES [ON database_name] FROM table_name WITH KEY [<operator> "<tag_key>" | [[NOT] IN ("<tag_key1>", ..)]] [WHERE expr] [order_by_clause] [limit_clause];
```

Time of record

#### **Syntax**

```sql
SHOW TAG VALUES FROM air WITH KEY = "station" WHERE station = 'XiaoMaiDao' ORDER BY key, value LIMIT 1;
```

```
+---------+------------+
| key     | value      |
+---------+------------+
| station | XiaoMaiDao |
+---------+------------+
```

```sql
SHOW TAG VALUES FROM air WITH KEY NOT IN ("station1");
```

```
+---------+-------------+
| key     | value       |
+---------+-------------+
| station | XiaoMaiDao  |
| station | LianYunGang |
+---------+-------------+
```

### **EXPLAIN**

#### **Syntax**

```sql
EXPLAIN [ ANALYZE ] [ VERBOSE ] <statement>;
```

WHERE sets conditions on the selected column before the GROUP BY clause, while HAVING clause sets conditions on the group generated by the GROUP BY clause.

Constant

Constant

Equivalent to

#### **Syntax**

```sql
EXPLAIN SELECT station, temperature, visibility FROM air;
```

```
+---------------+-----------------------------------------------------------------------------------------------------------------------------+
| plan_type     | plan                                                                                                                        |
+---------------+-----------------------------------------------------------------------------------------------------------------------------+
| logical_plan  | Projection: #air.station, #air.temperature, #air.visibility                                                                 |
|               |   TableScan: air projection=[station, visibility, temperature]                                                              |
| physical_plan | ProjectionExec: expr=[station@0 as station, temperature@2 as temperature, visibility@1 as visibility]                       |
|               |   TskvExec: limit=None, predicate=ColumnDomains { column_to_domain: Some({}) }, projection=[station,visibility,temperature] |
|               |                                                                                                                             |
+---------------+-----------------------------------------------------------------------------------------------------------------------------+
```

```sql
EXPLAIN ANALYZE SELECT station, temperature, visibility FROM air;
```

```
+-------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| plan_type         | plan                                                                                                                                                                                                                                                                                                                                    |
+-------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Plan with Metrics | ProjectionExec: expr=[station@0 as station, temperature@2 as temperature, visibility@1 as visibility], metrics=[output_rows=13, elapsed_compute=20.375µs, spill_count=0, spilled_bytes=0, mem_used=0]                                                                                                                                   |
|                   |   TskvExec: limit=None, predicate=ColumnDomains { column_to_domain: Some({}) }, projection=[station,visibility,temperature], metrics=[output_rows=13, elapsed_compute=15.929624ms, spill_count=0, spilled_bytes=0, mem_used=0, elapsed_series_scan=1.698791ms, elapsed_point_to_record_batch=4.572954ms, elapsed_field_scan=5.119076ms] |
|                   |                                                                                                                                                                                                                                                                                                                                         |
+-------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
```

```sql
EXPLAIN ANALYZE SELECT station, temperature, visibility FROM air;
```

```
+-------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| plan_type         | plan                                                                                                                                                                                                                                                                                                                                    |
+-------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Plan with Metrics | ProjectionExec: expr=[station@0 as station, temperature@2 as temperature, visibility@1 as visibility], metrics=[output_rows=13, elapsed_compute=20.375µs, spill_count=0, spilled_bytes=0, mem_used=0]                                                                                                                                   |
|                   |   TskvExec: limit=None, predicate=ColumnDomains { column_to_domain: Some({}) }, projection=[station,visibility,temperature], metrics=[output_rows=13, elapsed_compute=15.929624ms, spill_count=0, spilled_bytes=0, mem_used=0, elapsed_series_scan=1.698791ms, elapsed_point_to_record_batch=4.572954ms, elapsed_field_scan=5.119076ms] |
|                   |                                                                                                                                                                                                                                                                                                                                         |
+-------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
```

```sql
EXPLAIN ANALYZE VERBOSE SELECT station, temperature, visibility FROM air;
```

```
+------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| plan_type              | plan                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
+------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Plan with Metrics      | ProjectionExec: expr=[station@0 as station, temperature@2 as temperature, visibility@1 as visibility], metrics=[output_rows=13, elapsed_compute=26.75µs, spill_count=0, spilled_bytes=0, mem_used=0]                                                                                                                                                                                                                                                                                                                                                                    |
|                        |   TskvExec: limit=None, predicate=ColumnDomains { column_to_domain: Some({}) }, projection=[station,visibility,temperature], metrics=[output_rows=13, elapsed_compute=13.225875ms, spill_count=0, spilled_bytes=0, mem_used=0, elapsed_point_to_record_batch=3.918163ms, elapsed_field_scan=3.992161ms, elapsed_series_scan=1.657416ms]                                                                                                                                                                                                                                 |
|                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Plan with Full Metrics | ProjectionExec: expr=[station@0 as station, temperature@2 as temperature, visibility@1 as visibility], metrics=[start_timestamp{partition=0}=2022-10-25 03:00:14.865034 UTC, end_timestamp{partition=0}=2022-10-25 03:00:14.879596 UTC, elapsed_compute{partition=0}=26.75µs, spill_count{partition=0}=0, spilled_bytes{partition=0}=0, mem_used{partition=0}=0, output_rows{partition=0}=13]                                                                                                                                                                           |
|                        |   TskvExec: limit=None, predicate=ColumnDomains { column_to_domain: Some({}) }, projection=[station,visibility,temperature], metrics=[start_timestamp{partition=0}=2022-10-25 03:00:14.864225 UTC, end_timestamp{partition=0}=2022-10-25 03:00:14.879596 UTC, elapsed_compute{partition=0}=13.225875ms, spill_count{partition=0}=0, spilled_bytes{partition=0}=0, mem_used{partition=0}=0, output_rows{partition=0}=13, elapsed_point_to_record_batch{partition=0}=3.918163ms, elapsed_field_scan{partition=0}=3.992161ms, elapsed_series_scan{partition=0}=1.657416ms] |
|                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Output Rows            | 13                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Duration               | 13.307708ms                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
+------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
```

### **DESCRIBE**

#### **Syntax**

```sql
DESCRIBE {DATABASE db_name | TABLE tb_name};
```

`1997-01-31 09:26:56.123+08:00` # Close to RCF3339, just replace T by space

#### **Syntax**

```sql
DESCRIBE TABLE air;
```

```
+-------------+-----------------------+-------------+-------------------+
| column_name | data_type             | column_type | compression_codec |
+-------------+-----------------------+-------------+-------------------+
| time        | TIMESTAMP(NANOSECOND) | TIME        | DEFAULT           |
| station     | STRING                | TAG         | DEFAULT           |
| pressure    | DOUBLE                | FIELD       | DEFAULT           |
| temperature | DOUBLE                | FIELD       | DEFAULT           |
| visibility  | DOUBLE                | FIELD       | DEFAULT           |
+-------------+-----------------------+-------------+-------------------+
```

```sql
DESCRIBE DATABASE public;
```

```
+-----+-------+----------------+---------+-----------+
| ttl | shard | vnode_duration | replica | precision |
+-----+-------+----------------+---------+-----------+
| INF | 1     | 365 Days       | 1       | NS        |
+-----+-------+----------------+---------+-----------+
```

[//]: # "## **EXISTS**"

[//]: # "EXISTS 条件测试子查询中是否存在行，并在子查询返回至少一个行时返回 true。如果指定 NOT，此条件将在子查询未返回任何行时返回 true。"

[//]: # "The wildcard * can be used to refer to all columns."

[//]: # "```sql"

[//]: # "SELECT id  FROM date"

[//]: # "WHERE EXISTS (SELECT 1 FROM shop"

[//]: # "WHERE date.id = shop.id)"

[//]: # "ORDER BY id;"

[//]: # "```"

[//]: # "# **DCL (无)**"

[//]: # "```sql"

[//]: # "DESCRIBE table_name"

[//]: # "```"

[//]: # "TODO SHOW"

[//]: # "# **SHOW**"

[//]: # "## **SHOW VARIABLE**"

[//]: # "```sql"

[//]: # "-- only support show tables"

[//]: # "-- SHOW TABLES is not supported unless information_schema is enabled"

[//]: # "SHOW TABLES"

[//]: # "```"

[//]: # "## **SHOW COLUMNS**"

[//]: #

[//]: # "```sql"

[//]: # "-- SHOW COLUMNS with WHERE or LIKE is not supported"

[//]: # "-- SHOW COLUMNS is not supported unless information_schema is enabled"

[//]: # "-- treat both FULL and EXTENDED as the same"

[//]: # "SHOW [ EXTENDED ] [ FULL ]"

[//]: # "{ COLUMNS | FIELDS }"

[//]: # "{ FROM | IN }"

[//]: # "table_name"

[//]: # "```"

[//]: # "## **SHOW CREATE TABLE**"

[//]: # "```sql"

[//]: # "SHOW CREATE TABLE table_name"

[//]: # "```"

### The db and table arguments specify the source table.

Remarks

The WKT format is a text format used to describe the spatial characteristics of 2D and 3D geometric objects.
WKT stands for "Well-Known Text" and is an open international standard.
The WKT format includes some basic geometric objects, such as points, lines, polygons and circles, and some composite objects, such as collections of polygons and collections of geometric objects.

### INNER JOIN

Get the closing price.

#### **Syntax**

```sql
SELECT * FROM air INNER JOIN sea ON air.temperature = sea.temperature;
```

```
+---------------------+------------+------------+-------------+----------+---------------------+-------------+-------------+
| time                | station    | visibility | temperature | pressure | time                | station     | temperature |
+---------------------+------------+------------+-------------+----------+---------------------+-------------+-------------+
| 2022-01-28 13:27:00 | XiaoMaiDao | 67         | 62          | 59       | 2022-01-28 13:18:00 | LianYunGang | 62          |
| 2022-01-28 13:24:00 | XiaoMaiDao | 50         | 78          | 66       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |
| 2022-01-28 13:24:00 | XiaoMaiDao | 50         | 78          | 66       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |
| 2022-01-28 13:30:00 | XiaoMaiDao | 65         | 79          | 77       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |
+---------------------+------------+------------+-------------+----------+---------------------+-------------+-------------+
```

### LEFT JOIN

Z represents zero time zone**Function**： Calculate the variance of population.

#### **Syntax**

```sql
SELECT * FROM air LEFT JOIN sea ON air.temperature = sea.temperature;
```

```
+---------------------+-------------+------------+-------------+----------+---------------------+-------------+-------------+
| time                | station     | visibility | temperature | pressure | time                | station     | temperature |
+---------------------+-------------+------------+-------------+----------+---------------------+-------------+-------------+
| 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:18:00 | LianYunGang | 62          |
| 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |
| 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |
| 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |
| 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       |                     |             |             |
| 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       |                     |             |             |
| 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       |                     |             |             |
| 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       |                     |             |             |
| 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       |                     |             |             |
| 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       |                     |             |             |
| 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       |                     |             |             |
| 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       |                     |             |             |
| 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       |                     |             |             |
| 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       |                     |             |             |
+---------------------+-------------+------------+-------------+----------+---------------------+-------------+-------------+
```

### RIGHT JOIN

8 BytesType

#### **Syntax**

```sql
SELECT * FROM air RIGHT JOIN sea ON air.temperature = sea.temperature;
```

```
+---------------------+------------+------------+-------------+----------+---------------------+-------------+-------------+
| time                | station    | visibility | temperature | pressure | time                | station     | temperature |
+---------------------+------------+------------+-------------+----------+---------------------+-------------+-------------+
| 2022-01-28 13:27:00 | XiaoMaiDao | 67         | 62          | 59       | 2022-01-28 13:18:00 | LianYunGang | 62          |
|                     |            |            |             |          | 2022-01-28 13:21:00 | LianYunGang | 63          |
|                     |            |            |             |          | 2022-01-28 13:24:00 | LianYunGang | 77          |
|                     |            |            |             |          | 2022-01-28 13:27:00 | LianYunGang | 54          |
|                     |            |            |             |          | 2022-01-28 13:30:00 | LianYunGang | 55          |
|                     |            |            |             |          | 2022-01-28 13:33:00 | LianYunGang | 64          |
|                     |            |            |             |          | 2022-01-28 13:36:00 | LianYunGang | 56          |
|                     |            |            |             |          | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |
|                     |            |            |             |          | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |
|                     |            |            |             |          | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |
| 2022-01-28 13:24:00 | XiaoMaiDao | 50         | 78          | 66       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |
| 2022-01-28 13:24:00 | XiaoMaiDao | 50         | 78          | 66       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |
|                     |            |            |             |          | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |
| 2022-01-28 13:30:00 | XiaoMaiDao | 65         | 79          | 77       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |
+---------------------+------------+------------+-------------+----------+---------------------+-------------+-------------+
```

### FULL JOIN

[Data Source](#sample-data)
它会显示连接左侧和右侧的所有行，并将在连接的任一侧不匹配的地方产生空值。

#### **Syntax**

```sql
SELECT * FROM air FULL JOIN sea ON air.temperature = sea.temperature;
```

```
+---------------------+-------------+------------+-------------+----------+---------------------+-------------+-------------+
| time                | station     | visibility | temperature | pressure | time                | station     | temperature |
+---------------------+-------------+------------+-------------+----------+---------------------+-------------+-------------+
| 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:18:00 | LianYunGang | 62          |
|                     |             |            |             |          | 2022-01-28 13:21:00 | LianYunGang | 63          |
|                     |             |            |             |          | 2022-01-28 13:24:00 | LianYunGang | 77          |
|                     |             |            |             |          | 2022-01-28 13:27:00 | LianYunGang | 54          |
|                     |             |            |             |          | 2022-01-28 13:30:00 | LianYunGang | 55          |
|                     |             |            |             |          | 2022-01-28 13:33:00 | LianYunGang | 64          |
|                     |             |            |             |          | 2022-01-28 13:36:00 | LianYunGang | 56          |
|                     |             |            |             |          | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |
|                     |             |            |             |          | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |
|                     |             |            |             |          | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |
| 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |
| 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |
|                     |             |            |             |          | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |
| 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |
| 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       |                     |             |             |
| 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       |                     |             |             |
| 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       |                     |             |             |
| 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       |                     |             |             |
| 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       |                     |             |             |
| 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       |                     |             |             |
| 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       |                     |             |             |
| 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       |                     |             |             |
| 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       |                     |             |             |
| 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       |                     |             |             |
+---------------------+-------------+------------+-------------+----------+---------------------+-------------+-------------+
```

[//]: # "### CROSS JOIN"

[//]: #

[//]: # "交叉连接产生一个笛卡尔积，它将连接左侧的每一行与连接右侧的每一行相匹配。"

[//]: #

[//]: # "```sql"

[//]: # "SELECT * FROM air CROSS JOIN sea;"

[//]: # "```"

[//]: # "    +---------------------+-------------+------------+-------------+----------+---------------------+-------------+-------------+"

[//]: # "    | time                | station     | visibility | temperature | pressure | time                | station     | temperature |"

[//]: # "    +---------------------+-------------+------------+-------------+----------+---------------------+-------------+-------------+"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:21:00 | XiaoMaiDao  | 56         | 69          | 77       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:24:00 | XiaoMaiDao  | 50         | 78          | 66       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:27:00 | XiaoMaiDao  | 67         | 62          | 59       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:30:00 | XiaoMaiDao  | 65         | 79          | 77       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:33:00 | XiaoMaiDao  | 53         | 53          | 68       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:36:00 | XiaoMaiDao  | 74         | 72          | 68       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:39:00 | XiaoMaiDao  | 71         | 71          | 80       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:21:00 | LianYunGang | 78         | 69          | 71       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:24:00 | LianYunGang | 79         | 80          | 51       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:27:00 | LianYunGang | 59         | 74          | 59       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:30:00 | LianYunGang | 67         | 70          | 72       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:33:00 | LianYunGang | 80         | 70          | 68       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:18:00 | LianYunGang | 62          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:21:00 | LianYunGang | 63          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:24:00 | LianYunGang | 77          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:27:00 | LianYunGang | 54          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:30:00 | LianYunGang | 55          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:33:00 | LianYunGang | 64          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:36:00 | LianYunGang | 56          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:21:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:24:00 | XiaoMaiDao  | 64          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:27:00 | XiaoMaiDao  | 51          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:30:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:33:00 | XiaoMaiDao  | 78          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:36:00 | XiaoMaiDao  | 57          |"

[//]: # "    | 2022-01-28 13:36:00 | LianYunGang | 59         | 70          | 54       | 2022-01-28 13:39:00 | XiaoMaiDao  | 79          |"

[//]: # "    +---------------------+-------------+------------+-------------+----------+---------------------+-------------+-------------+"

### Struct {&#xA;time: List[Timestamp], -- ms&#xA;value: List[Double],&#xA;resolution: Int Unsigned,&#xA;}

**Function**：Return unixTime.

#### **Syntax**

```sql
SELECT station, AVG(temperature) 
FROM air 
GROUP BY station;
```

```
+-------------+----------------------+
| station     | AVG(air.temperature) |
+-------------+----------------------+
| XiaoMaiDao  | 69.14285714285714    |
| LianYunGang | 72.16666666666667    |
+-------------+----------------------+
```

### When the time unit is ns, the ratio unit is /ns,

#### **Syntax**

```sql
group_by_clause 
[ HAVING condition ];
```

**Note**：

8 Bytes

Numerical type, scientific notation is not supported at present.

Time of writes

#### **Syntax**

```sql
SELECT station, AVG(temperature)  AS avg_t 
FROM air 
GROUP BY station 
HAVING avg_t > 70;
```

```
+-------------+-------------------+
| station     | avg_t             |
+-------------+-------------------+
| LianYunGang | 72.16666666666667 |
+-------------+-------------------+
```

### Please note that data in the TIME column can be represented by either a time string or a numeric timestamp.

Numerical type, scientific notation is not supported at present.

[//]: # "### **GROUPING SETS**"

[//]: # "GROUPING SETS 是可以将行分组在一起的一组或一组列。"

[//]: # "您可以简单地使用 GROUPING SETS，而不是编写多个查询并将结果与 UNION 组合。"

[//]: # "CnosDB 中的 GROUPING SETS 可以被认为是 GROUP BY 子句的扩展。 它允许您在同一查询中定义多个分组集。"

[//]: # "让我们看看如下用例，看它如何等同于具有多个 UNION ALL 子句的 GROUP BY。"

[//]: # "```sql"

[//]: # "SELECT * FROM shipping;"

[//]: # "--  origin_state | origin_zip | destination_state | destination_zip | package_weight"

[//]: # "-- --------------+------------+-------------------+-----------------+----------------"

[//]: # "--  California   |      94131 | New Jersey        |            8648 |             13"

[//]: # "--  California   |      94131 | New Jersey        |            8540 |             42"

[//]: # "--  New Jersey   |       7081 | Connecticut       |            6708 |            225"

[//]: # "--  California   |      90210 | Connecticut       |            6927 |           1337"

[//]: # "--  California   |      94131 | Colorado          |           80302 |              5"

[//]: # "--  New York     |      10002 | New Jersey        |            8540 |              3"

[//]: # "-- (6 rows)"

[//]: # "```"

[//]: # "如下查询演示了GROUPING SETS的语义"

[//]: # "```sql"

[//]: # "SELECT origin_state, origin_zip, destination_state, sum(package_weight)"

[//]: # "FROM shipping"

[//]: # "GROUP BY GROUPING SETS ( (origin_state),"

[//]: # "(origin_state, origin_zip),"

[//]: # "(destination_state));"

[//]: # "--  origin_state | origin_zip | destination_state | _col0"

[//]: # "--  --------------+------------+-------------------+-------"

[//]: # "--   New Jersey   | NULL       | NULL              |   225"

[//]: # "--   California   | NULL       | NULL              |  1397"

[//]: # "--   New York     | NULL       | NULL              |     3"

[//]: # "--   California   |      90210 | NULL              |  1337"

[//]: # "--   California   |      94131 | NULL              |    60"

[//]: # "--   New Jersey   |       7081 | NULL              |   225"

[//]: # "--   New York     |      10002 | NULL              |     3"

[//]: # "--   NULL         | NULL       | Colorado          |     5"

[//]: # "--   NULL         | NULL       | New Jersey        |    58"

[//]: # "--   NULL         | NULL       | Connecticut       |  1562"

[//]: # "--  (10 rows)"

[//]: # "```"

[//]: # "上述查询等价于"

[//]: # "```sql"

[//]: # "SELECT origin_state, NULL, NULL, sum(package_weight)"

[//]: # "FROM shipping GROUP BY origin_state"

[//]: # "UNION ALL"

[//]: # "SELECT origin_state, origin_zip, NULL, sum(package_weight)"

[//]: # "FROM shipping GROUP BY origin_state, origin_zip"

[//]: # "UNION ALL"

[//]: # "SELECT NULL, NULL, destination_state, sum(package_weight)"

[//]: # "FROM shipping GROUP BY destination_state;"

[//]: # "```"

### **ROLLUP**

[//]: # "与 GROUPING SETS 类似，"

Description

**Note**

如果你的group by 子句是：

#### **Syntax**

```sql
SELECT ...
FROM ...
GROUP BY ROLLUP(column_1,column_2);
```

Total write traffic size

#### **Syntax**

```sql
SELECT ...
FROM ...


UNION ALL

SELECT ...
FROM ...
GROUP BY
column_1

UNION ALL

SELECT ...
FROM ...
GROUP BY
column_1, column2;
```

[//]: # "GROUP BY GROUPING SETS("

[//]: # "    (column_1, column_2),"

[//]: # "    (column_1),"

[//]: # "    ()"

[//]: # ")"

User writes times User name under tenant

**OFFSET Clause** ROLLUP 中列的顺序非常重要。

#### **Syntax**

```sql
SELECT station, visibility, avg(temperature) 
FROM air 
GROUP BY ROLLUP (station, visibility);
```

```
+-------------+------------+----------------------+
| station     | visibility | AVG(air.temperature) |
+-------------+------------+----------------------+
|             |            | 70.53846153846153    |
| XiaoMaiDao  |            | 69.14285714285714    |
| LianYunGang |            | 72.16666666666667    |
| XiaoMaiDao  | 56         | 69                   |
| XiaoMaiDao  | 50         | 78                   |
| XiaoMaiDao  | 67         | 62                   |
| XiaoMaiDao  | 65         | 79                   |
| XiaoMaiDao  | 53         | 53                   |
| XiaoMaiDao  | 74         | 72                   |
| XiaoMaiDao  | 71         | 71                   |
| LianYunGang | 78         | 69                   |
| LianYunGang | 79         | 80                   |
| LianYunGang | 59         | 72                   |
| LianYunGang | 67         | 70                   |
| LianYunGang | 80         | 70                   |
+-------------+------------+----------------------+
```

### **CUBE**

与 ROLLUP 类似，CUBE 是 GROUP BY 子句的扩展。 Time of writes

[//]: # "CUBE 就像结合了 GROUPING SETS 和 ROLLUP。"

User name首先会对(A、B、C)进行group by，

`CROSS JOIN`is not supported currently.

```sql
SELECT ... 
FROM ...
GROUP BY CUBE (column1, column2);
```

**Note**：The aggregate function result cannot be returned in CSV format

```sql
SELECT ...
FROM ...
GROUP BY column1

UNION ALL

SELECT ...
FROM ...
GROUP BY column2

UNION ALL

SELECT ...
FROM ...
GROUP BY column1, column2

UNION ALL

SELECT ...
FROM ...
;
```

#### **Syntax**

```sql
SELECT station, visibility, avg(temperature) 
FROM air 
GROUP BY CUBE (station, visibility);
```

```
+-------------+------------+----------------------+
| station     | visibility | AVG(air.temperature) |
+-------------+------------+----------------------+
| XiaoMaiDao  | 56         | 69                   |
| XiaoMaiDao  | 50         | 78                   |
| XiaoMaiDao  | 67         | 62                   |
| XiaoMaiDao  | 65         | 79                   |
| XiaoMaiDao  | 53         | 53                   |
| XiaoMaiDao  | 74         | 72                   |
| XiaoMaiDao  | 71         | 71                   |
| LianYunGang | 78         | 69                   |
| LianYunGang | 79         | 80                   |
| LianYunGang | 59         | 72                   |
| LianYunGang | 67         | 70                   |
| LianYunGang | 80         | 70                   |
|             | 56         | 69                   |
|             | 50         | 78                   |
|             | 67         | 66                   |
|             | 65         | 79                   |
|             | 53         | 53                   |
|             | 74         | 72                   |
|             | 71         | 71                   |
|             | 78         | 69                   |
|             | 79         | 80                   |
|             | 59         | 72                   |
|             | 80         | 70                   |
| XiaoMaiDao  |            | 69.14285714285714    |
| LianYunGang |            | 72.16666666666667    |
|             |            | 70.53846153846153    |
+-------------+------------+----------------------+
```

[//]: # "### **GROUPING**"

[//]: # "    GROUPING(column_expression)"

[//]: # "Time of record"

[//]: # "当指定`GROUP BY`时，只能在 SELECT 列表、HAVING 和 ORDER BY 子句中使用 GROUPING。"

[//]: # "Time of record"

[//]: # "```sql"

[//]: # "SELECT origin_state,"

[//]: # "origin_zip,"

[//]: # "destination_state,"

[//]: # "sum(package_weight),"

[//]: # "grouping(origin_state, origin_zip, destination_state)"

[//]: # "FROM shipping"

[//]: # "GROUP BY GROUPING SETS ("

[//]: # "    (origin_state),"

[//]: # "    (origin_state, origin_zip),"

[//]: # "    (destination_state)"

[//]: # ");"

[//]: # "-- origin_state | origin_zip | destination_state | _col3 | _col4"

[//]: # "-- --------------+------------+-------------------+-------+-------"

[//]: # "-- California   | NULL       | NULL              |  1397 |     3"

[//]: # "-- New Jersey   | NULL       | NULL              |   225 |     3"

[//]: # "-- New York     | NULL       | NULL              |     3 |     3"

[//]: # "-- California   |      94131 | NULL              |    60 |     1"

[//]: # "-- New Jersey   |       7081 | NULL              |   225 |     1"

[//]: # "-- California   |      90210 | NULL              |  1337 |     1"

[//]: # "-- New York     |      10002 | NULL              |     3 |     1"

[//]: # "-- NULL         | NULL       | New Jersey        |    58 |     6"

[//]: # "-- NULL         | NULL       | Connecticut       |  1562 |     6"

[//]: # "-- NULL         | NULL       | Colorado          |     5 |     6"

[//]: # "-- (10 rows)"

[//]: # "```"

[//]: # "tenant name"

[//]: # "作为 ROLLUP、CUBE 或 GROUPING SETS 操作的结果返回的 NULL 是 NULL 的一种特殊用途。"

[//]: # "这充当结果集中的列占位符，表示全部。"

## You can also see the executing SQL statements using the `SHOW QUERIES` statement, which is a wrapper around the QUERIES schema.

### The storage engine of CnosDB can be regarded as a KV storage, in which Timestamp and Tags constitute the KEY, and Fields constitute a series of values.

### **Function**：Return expr cast to a timestamp in a optional format.

#### **Syntax**

```
COUNT(x)
```

image

User name

> Role name

> 8 Bytes

> Schema Definition

```
返回与正则表达式匹配的项
```

**Syntax**

#### **Syntax**

```sql
SELECT COUNT(*) FROM air;
```

```
+-----------------+
| COUNT(UInt8(1)) |
+-----------------+
| 13              |
+-----------------+
```

```sql
SELECT COUNT(temperature) FROM air;
```

```
+------------------------+
| COUNT(air.temperature) |
+------------------------+
| 13                     |
+------------------------+
```

```sql
SELECT COUNT(DISTINCT temperature) FROM air;
```

```
+---------------------------------+
| COUNT(DISTINCT air.temperature) |
+---------------------------------+
| 10                              |
+---------------------------------+
```

***

### **Return Type**：Consistent with parameter type.

#### **Syntax**

```
SUM(NUMERICS)
```

Time of record

ORDER BY Clause

User queries times

#### **Syntax**

```sql
SELECT SUM(temperature) FROM air;
```

```
+----------------------+
| SUM(air.temperature) |
+----------------------+
| 917                  |
+----------------------+
```

***

### **Function**： x returns the approximate percentage (TDigest) of the weighted input value, where w is the weight column expression and p is a floating point 64 between 0 and 1 inclusive.

#### **Syntax**

```
MIN(STRING | NUMERICS | TIMESTAMP)
```

Time of record

The database to which the vnode belongs

User queries times

#### **Syntax**

```sql
 SELECT MIN(time), MIN(station), MIN(temperature) FROM air;
```

```
+---------------------+------------------+----------------------+
| MIN(air.time)       | MIN(air.station) | MIN(air.temperature) |
+---------------------+------------------+----------------------+
| 2022-01-28T13:21:00 | LianYunGang      | 53                   |
+---------------------+------------------+----------------------+
```

***

### **Function**：Return an inverted string or an array containing elements in reverse order.

#### **Syntax**

```
MAX(STRINGS | NUMERICS | TIMESTAMPS)
```

Time of record

The database to which the vnode belongs

User queries times

#### **Syntax**

```sql
SELECT MAX(time), MAX(station), MAX(temperature) FROM air;
```

```
+---------------------+------------------+----------------------+
| MAX(air.time)       | MAX(air.station) | MAX(air.temperature) |
+---------------------+------------------+----------------------+
| 2022-01-28T13:39:00 | XiaoMaiDao       | 80                   |
+---------------------+------------------+----------------------+
```

***

### AVG

#### **Syntax**

```
AVG(NUMERICS)
```

CTE in the same WITH clause must have a unique name.

ORDER BY Clause

GROUP BY Clause

#### **Syntax**

```sql
SELECT AVG(temperature) FROM air;
```

```
+----------------------+
| AVG(air.temperature) |
+----------------------+
| 70.53846153846153    |
+----------------------+
```

***

### TTL： represents the saving time of the data file, defaults to 365 days, expressed in data with units. It supports day（d），hour（h），minute（m），such as TTL 10d，TTL 50h，TTL 100m.When no unit, the default is day, such as TTL 30.

#### **Syntax**

```
ARRAY_AGG(expr)
```

ID of user which commit the SQL

Evaluate the left expression first, and if it's true, evaluate the right expression, both true and true

DROP STREAM TABLE

#### **Syntax**

```sql
SELECT ARRAY_AGG(temperature) from air;
```

```
+------------------------------------------------------+
| ARRAYAGG(air.temperature)                            |
+------------------------------------------------------+
| [69, 78, 62, 79, 53, 72, 71, 69, 80, 74, 70, 70, 70] |
+------------------------------------------------------+
```

Description

### FIRST

```
first(time,  value)
```

Description

If the subexpression is true, the whole expression is false, and if the whole expression is false, the whole expression is true

- time: Timestamp

- value: any

Name of user which commit the SQL

#### **Syntax**

```sql
select first(time, pressure) from air;
```

```
+------------------------------+
| first(air.time,air.pressure) |
+------------------------------+
| 63.0                         |
+------------------------------+
```

### LAST

```
last(time,  value)
```

Description

If the subexpression is true, the whole expression is false, and if the whole expression is false, the whole expression is true

- time: Timestamp

- value: any

Name of user which commit the SQL

#### **Syntax**

```sql
select last(time, pressure) from air;
```

```
+-----------------------------+
| last(air.time,air.pressure) |
+-----------------------------+
| 55.0                        |
+-----------------------------+
```

### MODE

```
mode(value)
```

计算一列的众数。

Order of the column in table

Name of user which commit the SQL

#### **Syntax**

```sql
select mode(pressure) from air;
```

```
+--------------------+
| mode(air.pressure) |
+--------------------+
| 69.0               |
+--------------------+
```

### INCREASE

```
increase(time, value order by time)
```

**Return Type**: any, the same type as the state of compact_state_agg.

The UNION clause is used to combine the analysis results of multiple SELECT statements.

Name of user which commit the SQL

The database to which the vnode belongs

```sql
CREATE DATABASE IF NOT EXISTS TEST_INCREASE;
ALTER DATABASE TEST_INCREASE SET TTL '100000D';
CREATE TABLE IF NOT EXISTS test_increase.test_increase(f0 BIGINT, TAGS(t0));
INSERT INTO test_increase.test_increase(time, t0, f0)
VALUES
    ('1999-12-31 00:00:00.000', 'a', 1),
    ('1999-12-31 00:00:00.005', 'a', 2),
    ('1999-12-31 00:00:00.010', 'a', 3),
    ('1999-12-31 00:00:00.015', 'a', 4),
    ('1999-12-31 00:00:00.020', 'a', 5),
    ('1999-12-31 00:00:00.025', 'a', 6),
    ('1999-12-31 00:00:00.030', 'a', 7),
    ('1999-12-31 00:00:00.035', 'a', 8),
    ('1999-12-31 00:00:00.000', 'b', 1),
    ('1999-12-31 00:00:00.005', 'b', 2),
    ('1999-12-31 00:00:00.010', 'b', 3),
    ('1999-12-31 00:00:00.015', 'b', 4),
    ('1999-12-31 00:00:00.020', 'b', 1),
    ('1999-12-31 00:00:00.025', 'b', 2),
    ('1999-12-31 00:00:00.030', 'b', 3),
    ('1999-12-31 00:00:00.035', 'b', 4);
SELECT t0, INCREASE(time, f0 ORDER BY time) AS increase
FROM test_increase.test_increase GROUP BY t0 ORDER BY t0;
```

```
+----+----------+
| t0 | increase |
+----+----------+
| a  | 7        |
| b  | 7        |
+----+----------+
```

### `INTERVAL '1 YEAR 1 DAY 1 HOUR 1 MINUTE'` One year, one day, one hour, one minute

### The double quotation mark format is not supported. Two consecutive '' in

#### **Syntax**

```
VAR(NUMERICS)
```

Field Name

SELECT Limitation

**Syntax**

#### **Syntax**

```sql
SELECT VAR(temperature) FROM air;
```

```
+---------------------------+
| VARIANCE(air.temperature) |
+---------------------------+
| 51.43589743589741         |
+---------------------------+
```

***

### An expression is a kind of combination of symbols and operators that CnosDB will process to obtain a single data value.&#xA;A simple expression can be a constant, variable, column, or scalar function.&#xA;Complex expressions can be formed by concatenating two or more simple expressions with operators.

#### **Syntax**

```
VAR_POP(NUMERICS)
```

We can get the `query_id` through [`SHOW QUERIES`](#show-queries).

ORDER BY Clause

**Syntax**

#### **Syntax**

```
SELECT VAR_POP(temperature) FROM air;
```

```
+------------------------------+
| VARIANCEPOP(air.temperature) |
+------------------------------+
| 47.47928994082838            |
+------------------------------+
```

***

### Role type, custom role or system role

```
STDDEV(NUMERICS)
```

Field Name

SELECT Limitation

**Syntax**

#### **Syntax**

```sql
SELECT STDDEV(temperature) FROM air;
```

```
+-------------------------+
| STDDEV(air.temperature) |
+-------------------------+
| 7.1718824192744135      |
+-------------------------+
```

***

### **Function**： Return approximations of different input values (HyperLogLog).

#### **Syntax**

```
STDDEV_POP(NUMERICS)
```

Field Name

ORDER BY Clause

**Syntax**

#### **Syntax**

```sql
SELECT STDDEV_POP(temperature) FROM air;
```

```
+----------------------------+
| STDDEVPOP(air.temperature) |
+----------------------------+
| 6.890521746633442          |
+----------------------------+
```

***

### COVAR | COVAR_SAMP

#### **Syntax**

```
COVAR(NUMERICS, NUMERICS)
```

Field Name

ORDER BY Clause

**Syntax**

#### **Syntax**

```sql
SELECT COVAR(temperature, pressure) FROM air;
```

```
+------------------------------------------+
| COVARIANCE(air.temperature,air.pressure) |
+------------------------------------------+
| -5.121794871794841                       |
+------------------------------------------+
```

***

### COVAR_POP

#### **Syntax**

```
COVAR_POP(NUMERICS, NUMERICS)
```

Field Name

ORDER BY Clause

**Syntax**

#### **Syntax**

```sql
SELECT COVAR_POP(temperature, pressure) FROM air;
```

```
+---------------------------------------------+
| COVARIANCEPOP(air.temperature,air.pressure) |
+---------------------------------------------+
| -4.727810650887546                          |
+---------------------------------------------+
```

***

### CORR

#### **Syntax**

```
CORR**(NUMERICS, NUMERICS)
```

Percision of database

ORDER BY Clause

**Syntax**

#### **Syntax**

```sql
SELECT CORR(temperature, pressure) FROM air;
```

```
+-------------------------------------------+
| CORRELATION(air.temperature,air.pressure) |
+-------------------------------------------+
| -0.07955796767766017                      |
+-------------------------------------------+
```

### offset type is BIGINT. When offset is negative, the values are returned from the first offset lines, defaults to 1.

### APPROX_DISTINCT

#### **Syntax**

```
APPROX_DISTINCT(x)
```

Field Name

**Function**:  Return the sine of x.

**Syntax**

#### **Syntax**

```sql
SELECT APPROX_DISTINCT(station) FROM air;
```

```
+-----------------------------+
| APPROXDISTINCT(air.station) |
+-----------------------------+
| 2                           |
+-----------------------------+
```

***

### APPROX_PERCENTILE_CONT

#### **Syntax**

```
APPROX_PERCENTILE_CONT(x, p)  
```

Configure of users in json

Field Name

**Syntax**

#### **Syntax**

```sql
SELECT APPROX_PERCENTILE_CONT(temperature, 0.1) FROM air;
```

```
+----------------------------------------------------+
| APPROXPERCENTILECONT(air.temperature,Float64(0.1)) |
+----------------------------------------------------+
| 60.4                                               |
+----------------------------------------------------+
```

***

### APPROX_PERCENTILE_CONT_WITH_WEIGHT

#### **Syntax**

```
APPROX_PERCENTILE_CONT_WITH_WEIGHT(x, w, p)  
```

Field Name

ID of SQL

Field Name

**Syntax**

#### **Syntax**

```sql
SELECT APPROX_PERCENTILE_CONT_WITH_WEIGHT(temperature,2, 0.1) FROM air;
```

```
+-----------------------------------------------------------------------+
| APPROXPERCENTILECONTWITHWEIGHT(air.temperature,Int64(2),Float64(0.1)) |
+-----------------------------------------------------------------------+
| 54.35                                                                 |
+-----------------------------------------------------------------------+
```

***

### APPROX_MEDIAN(NUMERICS)

#### **Syntax**

```
APPROX_MEDIAN(NUMERICS)
```

Database name of the table

SELECT Limitation

**Syntax**

#### **Syntax**

```sql
SELECT APPROX_MEDIAN(temperature) FROM air;
```

```
+-------------------------------+
| APPROXMEDIAN(air.temperature) |
+-------------------------------+
| 70                            |
+-------------------------------+
```

[//]: # "----------------"

[//]: # "### **GROUPING**(x)"

[//]: # "    GROUPING(x)"

[//]: # "Note"

[//]: # "SELECT Limitation"

[//]: # "Z represents zero time zone"

### SAMPLE

#### **Syntax**

```
SAMPLE(<column_key>, <N>)
```

It is equivalent to the following statement:

**Function**: x to the y power.

- `INTERVAL '0.5 MINUTE'` Half a minute

- Window functions can only appear in SELECT statements.

Import Data

#### **Syntax**

```sql
select sample(visibility, 5) from air;
```

```
+--------------------------------------+
| sample(air.visibility,Int64(5))      |
+--------------------------------------+
| [65.0, 74.0, 76.0, 77.0, 72.0, 77.0] |
+--------------------------------------+
```

### ASAP_SMOOTH

```
asap_smooth(time, value, resolution order by time)
```

You can refer to [function](#functions).
Table name

The type of default should be the consistent with that of expr, defaults to NULL.

- time: Timestamp

- value: Double

- Field Name

The following data types can't be stored directly, but can appear in SQL expressions.

```
Example
```

#### **Syntax**

```sql
select asap_smooth(time, pressure, 10) from air group by date_trunc('month', time);
```

```
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| asap_smooth(air.time,air.pressure,Int64(10))                                                                                                                                                                                                                                                                                                                                                                                                   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| {time: [2023-01-14T16:00:00, 2023-01-16T14:13:00, 2023-01-18T12:26:00, 2023-01-20T10:39:00, 2023-01-22T08:52:00, 2023-01-24T07:05:00, 2023-01-26T05:18:00, 2023-01-28T03:31:00, 2023-01-30T01:44:00, 2023-01-31T23:57:00], value: [64.79507211538461, 65.31009615384616, 65.25841346153847, 64.8485576923077, 65.09495192307692, 65.02524038461539, 64.8389423076923, 65.2421875, 65.02103365384616, 65.1141826923077], resolution: 10}        |
| {time: [2023-02-01T00:00:00, 2023-02-04T02:39:40, 2023-02-07T05:19:20, 2023-02-10T07:59:00, 2023-02-13T10:38:40, 2023-02-16T13:18:20, 2023-02-19T15:58:00, 2023-02-22T18:37:40, 2023-02-25T21:17:20, 2023-02-28T23:57:00], value: [65.20982142857143, 64.90625, 64.94828869047619, 64.97916666666667, 64.88504464285714, 64.8203125, 64.64434523809524, 64.88802083333333, 65.0, 64.76004464285714], resolution: 10}                           |
| {time: [2023-03-01T00:00:00, 2023-03-02T12:26:40, 2023-03-04T00:53:20, 2023-03-05T13:20:00, 2023-03-07T01:46:40, 2023-03-08T14:13:20, 2023-03-10T02:40:00, 2023-03-11T15:06:40, 2023-03-13T03:33:20, 2023-03-14T16:00:00], value: [65.29115853658537, 64.58307926829268, 64.7530487804878, 64.76753048780488, 65.14405487804878, 65.4298780487805, 65.1920731707317, 65.10365853658537, 64.86356707317073, 64.83841463414635], resolution: 10} |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
```

## The result of the query is as follows:

### stats_agg

对二维数据执行线性回归分析，例如计算相关系数和协方差。
并且还可以分别计算每个维度的常见统计数据，例如平均值和标准差。
`INTERVAL '1 MILLISECONDS'` One millisecond

Operator

#### stats_agg

```
stats_agg(y, x)
```

offset type is BIGINT. When offset is negative, the values are returned from the last offset lines, defaults to 1.

**Function**: x to the y power.

- APPROX_PERCENTILE_CONT(x, p) is equivalent to APPROX_PERCENTILE_CONT_WITH_WEIGHT(x, 1, p)
- The expression column in the WEHER clause can only be the tag column or the time column, and the expression in the ORDER BY clause can only be the key.

Constant

```
{ 
  n: bigint,   -- count 
  sx: double,  -- sum(x)- sum(x)
  sx2: double, -- sum((x-sx/n)^2) (sum of squares)
  sx3: double, -- sum((x-sx/n)^3)
  sx4: double, -- sum((x-sx/n)^4)
  sy: double,  -- sum(y)
  sy2: double, -- sum((y-sy/n)^2) (sum of squares)
  sy3: double, -- sum((y-sy/n)^3)
  sy4: double, -- sum((y-sy/n)^4)
  sxy: double, -- sum((x-sx/n)*(y-sy/n)) (sum of products) 
}
```

#### **Syntax**

```sql
create table if not exists test_stats(x bigint, y bigint);
alter database public set ttl '1000000d';
insert into test_stats(time, x, y) values
(1, 1, 1),
(2, 1, 2),
(3, 1, 3),
(4, 1, 4),
(5, 1, 5),
(6, 2, 1),
(7, 2, 2),
(8, 2, 3),
(9, 2, 4),
(10, 2, 5);
```

```sql
select stats_agg(y, x) from test_stats;
```

```
+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| stats_agg(test_stats.y,test_stats.x)                                                                                                                       |
+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| {n: 10, sx: 15.0, sx2: 2.5, sx3: -2.7755575615628914e-16, sx4: 0.6249999999999999, sy: 30.0, sy2: 20.0, sy3: -1.7763568394002505e-15, sy4: 68.0, sxy: 0.0} |
+------------------------------------------------------------------------------------------------------------------------------------------------------------+
```

#### num_vals

`INTERVAL '1 HOUR'` One hour

Rank Functions

```sql
select num_vals(stats_agg(y, x)) from test_stats;
```

```
+------------------------------------------------+
| num_vals(stats_agg(test_stats.y,test_stats.x)) |
+------------------------------------------------+
| 10                                             |
+------------------------------------------------+
```

#### average_y, average_x

Description

**Syntax**

```sql
select average_x(stats_agg(y, x)) from test_stats;
```

```
+-------------------------------------------------+
| average_x(stats_agg(test_stats.y,test_stats.x)) |
+-------------------------------------------------+
| 1.5                                             |
+-------------------------------------------------+
```

#### sum_y, sum_x

This page only shows `INSERT` related syntax.

**Syntax**

```sql
select sum_x(stats_agg(y, x)) from test_stats;
```

```
+---------------------------------------------+
| sum_x(stats_agg(test_stats.y,test_stats.x)) |
+---------------------------------------------+
| 15.0                                        |
+---------------------------------------------+
```

#### stddev_samp_y, stddev_samp_x

`time_column` is Timestamp.

**Syntax**

```sql
select stddev_samp_x(stats_agg(y, x)) from test_stats;
```

```
+-----------------------------------------------------+
| stddev_samp_x(stats_agg(test_stats.y,test_stats.x)) |
+-----------------------------------------------------+
| 0.5270462766947299                                  |
+-----------------------------------------------------+
```

#### stddev_pop_y, stddev_pop_x

**OFFSET Clause**

**Syntax**

```sql
select stddev_pop_x(stats_agg(y, x)) from test_stats;
```

```
+----------------------------------------------------+
| stddev_pop_x(stats_agg(test_stats.y,test_stats.x)) |
+----------------------------------------------------+
| 0.5                                                |
+----------------------------------------------------+
```

#### var_samp_y, var_samp_x

Description

**Syntax**

```sql
select var_samp_x(stats_agg(y, x)) from test_stats;
```

```
+--------------------------------------------------+
| var_samp_x(stats_agg(test_stats.y,test_stats.x)) |
+--------------------------------------------------+
| 0.2777777777777778                               |
+--------------------------------------------------+
```

#### var_pop_y, var_pop_x

UTF-8 Encoded String

**Syntax**

```sql
select var_pop_x(stats_agg(y, x)) from test_stats;
```

```
+-------------------------------------------------+
| var_pop_x(stats_agg(test_stats.y,test_stats.x)) |
+-------------------------------------------------+
| 0.25                                            |
+-------------------------------------------------+
```

#### skewness_samp_y, skewness_samp_x

Description

**Syntax**

```sql
select skewness_samp_x(stats_agg(y, x)) from test_stats;
```

```
+-------------------------------------------------------+
| skewness_samp_x(stats_agg(test_stats.y,test_stats.x)) |
+-------------------------------------------------------+
| -2.1065000811460203e-16                               |
+-------------------------------------------------------+
```

#### skewness_pop_y, skewness_pop_x

Description

**Syntax**

```sql
select skewness_pop_x(stats_agg(y, x)) from test_stats;
```

```
+------------------------------------------------------+
| skewness_pop_x(stats_agg(test_stats.y,test_stats.x)) |
+------------------------------------------------------+
| -2.220446049250313e-16                               |
+------------------------------------------------------+
```

#### kurtosis_samp_y, kurtosis_samp_x

**`IN` Expression**

**Syntax**

```sql
select kurtosis_samp_x(stats_agg(y, x)) from test_stats;
```

```
+-------------------------------------------------------+
| kurtosis_samp_x(stats_agg(test_stats.y,test_stats.x)) |
+-------------------------------------------------------+
| 0.8999999999999998                                    |
+-------------------------------------------------------+
```

#### kurtosis_pop_y, kurtosis_pop_x

计算二维统计聚合后指定维度的峰度值，方式为 population。

**Syntax**

```sql
select kurtosis_pop_x(stats_agg(y, x)) from test_stats;
```

```
+------------------------------------------------------+
| kurtosis_pop_x(stats_agg(test_stats.y,test_stats.x)) |
+------------------------------------------------------+
| 0.9999999999999998                                   |
+------------------------------------------------------+
```

#### correlation

`EXPLAIN` is only used to display the execution plan of a query, and does not execute the query.

**Syntax**

```sql
select correlation(stats_agg(y, x)) from test_stats;
```

```
+---------------------------------------------------+
| correlation(stats_agg(test_stats.y,test_stats.x)) |
+---------------------------------------------------+
| 0.0                                               |
+---------------------------------------------------+
```

#### covariance_samp, covariance_pop

计算二维统计聚合后的协方差。

**Syntax**

```sql
select covariance_samp(stats_agg(y, x)) from test_stats;
```

```
+-------------------------------------------------------+
| covariance_samp(stats_agg(test_stats.y,test_stats.x)) |
+-------------------------------------------------------+
| 0.0                                                   |
+-------------------------------------------------------+
```

```sql
select covariance_pop(stats_agg(y, x)) from test_stats;
```

```
+------------------------------------------------------+
| covariance_pop(stats_agg(test_stats.y,test_stats.x)) |
+------------------------------------------------------+
| 0.0                                                  |
+------------------------------------------------------+
```

#### determination_coeff

`OFFSET` can be used with the `LIMIT` statement to specify the number of lines to skip. The format is `LIMIT n OFFSET m`.
`LIMIT n` controls the output of n rows of data, and `OFFSET m` indicates the number of rows skipped before starting to return data. OFFSET 0 has the same effect as omitting the OFFSET clause.

**Syntax**

```sql
select determination_coeff(stats_agg(y, x)) from test_stats;
```

```
+-----------------------------------------------------------+
| determination_coeff(stats_agg(test_stats.y,test_stats.x)) |
+-----------------------------------------------------------+
| 0.0                                                       |
+-----------------------------------------------------------+
```

#### slope

**Return Type**: Timestamp

**Syntax**

```sql
select slope(stats_agg(y, x)) from test_stats;
```

```
+---------------------------------------------+
| slope(stats_agg(test_stats.y,test_stats.x)) |
+---------------------------------------------+
| 0.0                                         |
+---------------------------------------------+
```

#### intercept

**Parameter Type**: expr type is any type, ignore_ nulls type is BOOLEAN, defaults to false.

**Syntax**

```sql
select intercept(stats_agg(y, x)) from test_stats;
```

```
+-------------------------------------------------+
| intercept(stats_agg(test_stats.y,test_stats.x)) |
+-------------------------------------------------+
| 3.0                                             |
+-------------------------------------------------+
```

#### x_intercept

Optional. The WITH clause contains one or more commonly used expressions CTE (Common Table Expression).
CTE acts as a temporary table in the current running environment, which you can refer to in subsequent queries.The rules for using CTE are as follows:

**Syntax**

```sql
select x_intercept(stats_agg(y, x)) from test_stats;
```

```
+---------------------------------------------------+
| x_intercept(stats_agg(test_stats.y,test_stats.x)) |
+---------------------------------------------------+
| -inf                                              |
+---------------------------------------------------+
```

### gauge_agg

分析Gauge数据。与Counter不同，Gauge可以减少也可以增加。

#### gauge_agg

```
gauge_agg(time, value)
```

这是分析 Gauge 数据的第一步。Description

Type of permission granted, READ/WRITE/ALL

- time: Timestamp

- value: DOUBLE

`DENSE_RANK` | `RANK` | `PERCENT_RANK` need ORDER BY Clause.

```
Struct {
  first: Struct { 
    ts: Timestamp,
    value: Double
  },
  second: Struct { 
    ts: Timestamp,
    value: Double
  }, 
  penultimate: Struct {
    ts: Timestamp, 
    val: Double
  }, 
  last: Struct {
    ts: Timestamp, 
    val: Double
  }, 
  num_elements: Bigint Unsingned 
}
```

#### The wildcard \* can be used to refer to all columns.

```sql
select gauge_agg(time, pressure) from air group by date_trunc('month', time);
```

```
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| gauge_agg(air.time,air.pressure)                                                                                                                                                                                |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| {first: {ts: 2023-03-01T00:00:00, val: 54.0}, second: {ts: 2023-03-01T00:00:00, val: 59.0}, penultimate: {ts: 2023-03-14T16:00:00, val: 55.0}, last: {ts: 2023-03-14T16:00:00, val: 80.0}, num_elements: 13122} |
| {first: {ts: 2023-01-14T16:00:00, val: 63.0}, second: {ts: 2023-01-14T16:00:00, val: 68.0}, penultimate: {ts: 2023-01-31T23:57:00, val: 77.0}, last: {ts: 2023-01-31T23:57:00, val: 54.0}, num_elements: 16640} |
| {first: {ts: 2023-02-01T00:00:00, val: 54.0}, second: {ts: 2023-02-01T00:00:00, val: 60.0}, penultimate: {ts: 2023-02-28T23:57:00, val: 74.0}, last: {ts: 2023-02-28T23:57:00, val: 59.0}, num_elements: 26880} |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
```

#### delta

获取一段时间内Gauge的变化。column_key: Any type

source and origin type are TIMESTAMP.

```sql
select delta(gauge_agg(time, pressure)) from air group by date_trunc('month', time);
```

```
+-----------------------------------------+
| delta(gauge_agg(air.time,air.pressure)) |
+-----------------------------------------+
| 26.0                                    |
| -9.0                                    |
| 5.0                                     |
+-----------------------------------------+
```

#### time_delta

获取持续时间，最后一个Gauge的时间减去第一个Gauge的时间。

state: any is the same type as the state of compact_state_agg.

```sql
select time_delta(gauge_agg(time, pressure)) from air group by date_trunc('month', time);
```

```
+----------------------------------------------------------+
| time_delta(gauge_agg(air.time,air.pressure))             |
+----------------------------------------------------------+
| 0 years 0 mons 13 days 16 hours 0 mins 0.000000000 secs  |
| 0 years 0 mons 17 days 7 hours 57 mins 0.000000000 secs  |
| 0 years 0 mons 27 days 23 hours 57 mins 0.000000000 secs |
+----------------------------------------------------------+
```

#### rate

**Return Type**: BOOLEAN

You can use `DESCRIBE TABLE` to view the table structure.

```
返回与正则表达式匹配的项
```

Create source table

Create source table

Table type

```sql
select rate(gauge_agg(time, pressure)) from air group by date_trunc('month', time);
```

```
+----------------------------------------+
| rate(gauge_agg(air.time,air.pressure)) |
+----------------------------------------+
| 2.2018970189701897e-14                 |
| 9.349414325974008e-15                  |
| -4.133905465849807e-16                 |
+----------------------------------------+
```

### compact_state_agg

**Advanced Functions**

Database name

`INTERVAL '1 SECONDE'` One second

**Return Type**: Struct as follows.

`INTERVAL '1 DAY 1'` One day and one second它可能在行之间状态过多的数据集上表现不佳。

Field Name

Field Name

#### compact_state_agg

```
compact_state_agg(ts, state)
```

**Function**: Square root of x.

Database name

Binary Operator

```
Example
```

#### The wildcard \* can be used to refer to all columns.

```sql
alter database public set ttl '1000000d';

create table if not exists states(state STRING);

insert into states values
('2020-01-01 10:00:00', 'starting'),
('2020-01-01 10:30:00', 'running'),
('2020-01-03 16:00:00', 'error'),
('2020-01-03 18:30:00', 'starting'),
('2020-01-03 19:30:00', 'running'),
('2020-01-05 12:00:00', 'stopping');
```

```sql
select compact_state_agg(time, state) from states;
```

```
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| compact_state_agg(states.time,states.state)                                                                                                                                                                                                                                                                                                                                          |
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| {state_duration: [{state: running, duration: 0 years 0 mons 3 days 22 hours 0 mins 0.000000000 secs}, {state: error, duration: 0 years 0 mons 0 days 2 hours 30 mins 0.000000000 secs}, {state: starting, duration: 0 years 0 mons 0 days 1 hours 30 mins 0.000000000 secs}, {state: stopping, duration: 0 years 0 mons 0 days 0 hours 0 mins 0.000000000 secs}], state_periods: []} |
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
```

#### duration_in

```
duration_in(state_agg_data, state [,begin_time, interval_time]) 
```

Multi-linestring

Type of permission granted, READ/WRITE/ALL

state_agg_data: StateAggData

Field Name

Total write traffic size

Example

Polygon

#### The wildcard \* can be used to refer to all columns.

```sql
select duration_in(compact_state_agg(time, state), 'running') from states;
```

```
+--------------------------------------------------------------------------+
| duration_in(compact_state_agg(states.time,states.state),Utf8("running")) |
+--------------------------------------------------------------------------+
| 0 years 0 mons 3 days 22 hours 0 mins 0.000000000 secs                   |
+--------------------------------------------------------------------------+
```

### state_agg

Description

#### state_agg

```
state_agg(ts, state)
```

**HAVING Clause**

```sql
alter database public set ttl '1000000d';

create table if not exists states(state STRING);

insert into states values
('2020-01-01 10:00:00', 'starting'),
('2020-01-01 10:30:00', 'running'),
('2020-01-03 16:00:00', 'error'),
('2020-01-03 18:30:00', 'starting'),
('2020-01-03 19:30:00', 'running'),
('2020-01-05 12:00:00', 'stopping');
```

```sql
select state_agg(time, state) from states;
```

```
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| state_agg(states.time,states.state)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| {state_duration: [{state: starting, duration: 0 years 0 mons 0 days 1 hours 30 mins 0.000000000 secs}, {state: running, duration: 0 years 0 mons 3 days 22 hours 0 mins 0.000000000 secs}, {state: stopping, duration: 0 years 0 mons 0 days 0 hours 0 mins 0.000000000 secs}, {state: error, duration: 0 years 0 mons 0 days 2 hours 30 mins 0.000000000 secs}], state_periods: [{state: starting, periods: [{start_time: 2020-01-01T10:00:00, end_time: 2020-01-01T10:30:00}, {start_time: 2020-01-03T18:30:00, end_time: 2020-01-03T19:30:00}]}, {state: error, periods: [{start_time: 2020-01-03T16:00:00, end_time: 2020-01-03T18:30:00}]}, {state: running, periods: [{start_time: 2020-01-01T10:30:00, end_time: 2020-01-03T16:00:00}, {start_time: 2020-01-03T19:30:00, end_time: 2020-01-05T12:00:00}]}]} |
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
```

#### duration_in

```
duration_in(state_agg_data, state [,begin_time, interval_time]) 
```

Multi-linestring

Type of permission granted, READ/WRITE/ALL

state_agg_data: StateAggData

Field Name

Total write traffic size

Example

Polygon

#### The wildcard \* can be used to refer to all columns.

**Parameter Type**: expr type is any type, ignore_ nulls type is BOOLEAN, defaults to false.

```sql
select duration_in(state_agg(time, state), 'running') from states;
```

```
+------------------------------------------------------------------+
| duration_in(state_agg(states.time,states.state),Utf8("running")) |
+------------------------------------------------------------------+
| 0 years 0 mons 3 days 22 hours 0 mins 0.000000000 secs           |
+------------------------------------------------------------------+
```

Polygon

```sql
select duration_in(state_agg(time, state), 'running', Timestamp '2020-01-01 11:00:00') 
from states;
```

```
+----------------------------------------------------------------------------------------------+
| duration_in(state_agg(states.time,states.state),Utf8("running"),Utf8("2020-01-01 11:00:00")) |
+----------------------------------------------------------------------------------------------+
| 0 years 0 mons 3 days 21 hours 30 mins 0.000000000 secs                                      |
+----------------------------------------------------------------------------------------------+
```

**Return Type**: Double

```sql
select duration_in(state_agg(time, state), 'running', Timestamp '2020-01-01 11:00:00', interval '4 day')
from states;
```

```
+-------------------------------------------------------------------------------------------------------------------------------------------+
| duration_in(state_agg(states.time,states.state),Utf8("running"),Utf8("2020-01-01 11:00:00"),IntervalMonthDayNano("73786976294838206464")) |
+-------------------------------------------------------------------------------------------------------------------------------------------+
| 0 years 0 mons 3 days 20 hours 30 mins 0.000000000 secs                                                                                   |
+-------------------------------------------------------------------------------------------------------------------------------------------+
```

#### state_at

```
state_at(state_agg_data, ts)
```

**Function**: Convert the first character in str to its ASCII code and return it.

Type of permission granted, READ/WRITE/ALL

- state_agg_data: StateAggData

- ts: Timestamp

Field Name

```sql
select state_at(state_agg(time, state), Timestamp '2020-01-01 10:30:00') from states;
```

```
+---------------------------------------------------------------------------+
| state_at(state_agg(states.time,states.state),Utf8("2020-01-01 10:30:00")) |
+---------------------------------------------------------------------------+
| running                                                                   |
+---------------------------------------------------------------------------+
```

### candlestick_agg

进行金融资产数据分析。Null Value

Multi-linestring

Field Name

**Notice:**

#### candlestick_agg

```
candlestick_agg(time, price, volume)
```

Description

The type of default should be the consistent with that of expr, defaults to NULL.

- time: Timestamp

- +---------------------------------------------------------+
  \| st_Area(Utf8("POLYGON ((40 40, 20 45, 45 30, 40 40))")) |
  +---------------------------------------------------------+
  \| 87.5 |
  +---------------------------------------------------------+

- The type of default should be the consistent with that of expr, defaults to NULL.

example

```
Struct {
  open: Struct {
    ts:  Timestamp,
    val: Double, 
  },
  close: Struct {
    ts: Timestamp,
    val: Double,
  },   
  high: Struct {
    ts: Timestamp,
    val: Double,
  },
  low: Struct {
    ts: Timestamp,
    val: Double
  },
  volume: Struct {
    vol: Double,
    vwap: Double,
  }
}
```

#### **Syntax**

```sql
alter database public set ttl '1000000d';
create table if not exists tick(price bigint ,volume bigint);
insert tick(time, price, volume)
values
    ('1999-12-31 00:00:00.000', 111, 444),
    ('1999-12-31 00:00:00.005', 222, 444),
    ('1999-12-31 00:00:00.010', 333, 222),
    ('1999-12-31 00:00:10.015', 444, 111),
    ('1999-12-31 00:00:10.020', 222, 555),
    ('1999-12-31 00:10:00.025', 333, 555),
    ('1999-12-31 00:10:00.030', 444, 333),
    ('1999-12-31 01:00:00.035', 555, 222);
```

```sql
select candlestick_agg(time, price, volume) from tick;
```

```
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| candlestick_agg(tick.time,tick.price,tick.volume)                                                                                                                                                                                   |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| {open: {ts: 1999-12-31T00:00:00, val: 111.0}, close: {ts: 1999-12-31T01:00:00.035, val: 555.0}, low: {ts: 1999-12-31T00:00:00, val: 111.0}, high: {ts: 1999-12-31T01:00:00.035, val: 555.0}, volume: {vol: 2886.0, vwap: 850149.0}} |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
```

#### close

```
close(candlestick_agg_data)
```

获取收盘价。

Syntax

#### **Syntax**

```sql
select close(candlestick_agg(time, price, volume)) from tick;
```

```
+----------------------------------------------------------+
| close(candlestick_agg(tick.time,tick.price,tick.volume)) |
+----------------------------------------------------------+
| 555.0                                                    |
+----------------------------------------------------------+
```

#### close_time

```
close_time(candlestick_agg_data)
```

获取收盘时间。

Field Name

#### **Syntax**

```sql
select close_time(candlestick_agg(time, price, volume)) from tick;
```

```
+---------------------------------------------------------------+
| close_time(candlestick_agg(tick.time,tick.price,tick.volume)) |
+---------------------------------------------------------------+
| 1999-12-31T01:00:00.035                                       |
+---------------------------------------------------------------+
```

#### high

```
high(candlestick_agg_data)
```

state: any The same type of state as in compact_state_agg.

Syntax

#### **Syntax**

```
select high(candlestick_agg(time, price, volume)) from tick;
```

```
+---------------------------------------------------------+
| high(candlestick_agg(tick.time,tick.price,tick.volume)) |
+---------------------------------------------------------+
| 555.0                                                   |
+---------------------------------------------------------+
```

#### high_time

```
high_time(candlestick_agg_data)
```

**Return Type**: Geometry

Syntax

#### **Syntax**

```sql
select high_time(candlestick_agg(time, price, volume)) from tick;
```

```
+--------------------------------------------------------------+
| high_time(candlestick_agg(tick.time,tick.price,tick.volume)) |
+--------------------------------------------------------------+
| 1999-12-31T01:00:00.035                                      |
+--------------------------------------------------------------+
```

#### low

```
low(candlestick_agg_data)
```

IN only supports a list of constants, not a list of expressions.

Syntax

#### **Syntax**

```sql
select low(candlestick_agg(time, price, volume)) from tick;
```

```
+--------------------------------------------------------+
| low(candlestick_agg(tick.time,tick.price,tick.volume)) |
+--------------------------------------------------------+
| 111.0                                                  |
+--------------------------------------------------------+
```

#### low_time

```
low_time(candlestick_agg_data)
```

**Return Type**: First non null parameter type

Field Name

#### **Syntax**

```sql
select low_time(candlestick_agg(time, price, volume)) from tick;
```

```
+-------------------------------------------------------------+
| low_time(candlestick_agg(tick.time,tick.price,tick.volume)) |
+-------------------------------------------------------------+
| 1999-12-31T00:00:00                                         |
+-------------------------------------------------------------+
```

#### open

```
open(candlestick_agg_data)
```

IN only supports a list of constants, not a list of expressions.

Syntax

#### **Syntax**

```sql
select open(candlestick_agg(time, price, volume)) from tick;
```

```
+---------------------------------------------------------+
| open(candlestick_agg(tick.time,tick.price,tick.volume)) |
+---------------------------------------------------------+
| 111.0                                                   |
+---------------------------------------------------------+
```

#### open_time

```
open_time(candlestick_agg_data)
```

**Return Type**: First non null parameter type

Field Name

#### **Syntax**

```sql
select open_time(candlestick_agg(time, price, volume)) from tick;
```

```
+--------------------------------------------------------------+
| open_time(candlestick_agg(tick.time,tick.price,tick.volume)) |
+--------------------------------------------------------------+
| 1999-12-31T00:00:00                                          |
+--------------------------------------------------------------+
```

#### volume

```
volume(candlestick_agg_data)
```

获取总共交易量。

Syntax

#### **Syntax**

```sql
select volume(candlestick_agg(time, price, volume)) from tick;
```

```
+-----------------------------------------------------------+
| volume(candlestick_agg(tick.time,tick.price,tick.volume)) |
+-----------------------------------------------------------+
| 2886.0                                                    |
+-----------------------------------------------------------+
```

#### vwap

```
vwap(candlestick_agg_data)
```

**Parameter Type**: None

Syntax

#### **Syntax**

```sql
select vwap(candlestick_agg(time, price, volume)) from tick;
```

```
+---------------------------------------------------------+
| vwap(candlestick_agg(tick.time,tick.price,tick.volume)) |
+---------------------------------------------------------+
| 294.5769230769231                                       |
+---------------------------------------------------------+
```

## **Return Type**： Microsecond-level TIMESTAMP

### Insert Query Results (INSERT SELECT)

### **abs(x)**

Database name

SELECT Limitation

Description

#### **Syntax**

```sql
SELECT abs(-1);
```

```
+----------------+
| abs(Int64(-1)) |
+----------------+
| 1              |
+----------------+
```

***

### **acos(x)**

Database name of the table

SELECT Limitation

**Syntax**

#### **Syntax**

```sql
SELECT acos(3);
```

```
+----------------+
| acos(Int64(3)) |
+----------------+
| NaN            |
+----------------+
```

```sql
SELECT acos(0.5);
```

```
+--------------------+
| acos(Float64(0.5)) |
+--------------------+
| 1.0471975511965976 |
+--------------------+
```

***

### **asin(x)**

Database name

SELECT Limitation

**Syntax**

#### **Syntax**

```sql
SELECT asin(0.5);
```

```
+--------------------+
| asin(Float64(0.5)) |
+--------------------+
| 0.5235987755982988 |
+--------------------+
```

```sql
SELECT asin(5);
```

```
+----------------+
| asin(Int64(5)) |
+----------------+
| NaN            |
+----------------+
```

***

### **atan(x)**

Database name

SELECT Limitation

**Syntax**

#### **Syntax**

```sql
SELECT atan(5);
```

```
+-------------------+
| atan(Int64(5))    |
+-------------------+
| 1.373400766945016 |
+-------------------+
```

***

### **atan2(y,x)**

Column name

SELECT Limitation

**Syntax**

#### **Syntax**

```sql
SELECT atan2(10, 2);
```

```
+---------------------------+
| atan2(Int64(10),Int64(2)) |
+---------------------------+
| 1.3734008                 |
+---------------------------+
```

***

### **ceil(x)**

field type is STRING, only one of （'year', 'quarter', 'month', 'week', 'day', 'doy', 'dow', 'hour', 'minute', 'second'）

SELECT Limitation

**Syntax**

#### **Syntax**

```sql
SELECT ceil(1.6);
```

```
+--------------------+
| ceil(Float64(1.6)) |
+--------------------+
| 2                  |
+--------------------+
```

***

### **floor(x)**

COUNT(tag) and COUNT(DISTINCT tag) are equivalent.

SELECT Limitation

**Syntax**

#### **Syntax**

```sql
SELECT floor(-3.1);
```

```
+----------------------+
| floor(Float64(-3.1)) |
+----------------------+
| -4                   |
+----------------------+
```

***

### **cos(x)**

Example

SELECT Limitation

**Syntax**

#### **Syntax**

```sql
SELECT cos(1);
```

```
+--------------------+
| cos(Int64(1))      |
+--------------------+
| 0.5403023058681398 |
+--------------------+
```

***

### **sin(x)**

API of HTTP

SELECT Limitation

**Syntax**

#### **Syntax**

```sql
SELECT sin(5);
```

```
+---------------------+
| sin(Int64(5))       |
+---------------------+
| -0.9589242746631385 |
+---------------------+
```

***

### **exp(x)**

Example

SELECT Limitation

**Syntax**

#### **Syntax**

```sql
SELECT exp(1);
```

```
+-------------------+
| exp(Int64(1))     |
+-------------------+
| 2.718281828459045 |
+-------------------+
```

***

### **ln(x)**

API of HTTP

SELECT Limitation

**Syntax**

#### **Syntax**

```sql
SELECT ln(2.718281828459045);
```

```
+--------------------------------+
| ln(Float64(2.718281828459045)) |
+--------------------------------+
| 1                              |
+--------------------------------+
```

***

### **log(x) | log10(x)**

Description

SELECT Limitation

**Syntax**

#### **Syntax**

```sql
SELECT log(10);
```

```
+----------------+
| log(Int64(10)) |
+----------------+
| 1              |
+----------------+
```

```sql
SELECT log10(10);
```

```
+----------------+
| log(Int64(10)) |
+----------------+
| 1              |
+----------------+
```

***

### **log2(x)**

Description

SELECT Limitation

**Syntax**

#### **Syntax**

```sql
SELECT log2(4);
```

```
+----------------+
| log2(Int64(4)) |
+----------------+
| 2              |
+----------------+
```

***

### **power(x,y) | pow(x,y)**

Example

SELECT Limitation

**Syntax**

#### **Syntax**

```sql
SELECT power(2, 3);
```

```
+--------------------------+
| power(Int64(2),Int64(3)) |
+--------------------------+
| 8                        |
+--------------------------+
```

***

### **round(x)**

Schema Definition

SELECT Limitation

**Syntax**

#### **Syntax**

```sql
SELECT round(3.5);
```

```
+---------------------+
| round(Float64(3.5)) |
+---------------------+
| 4                   |
+---------------------+
```

***

### **signum(x)**

Example

SELECT Limitation

**Syntax**

#### **Syntax**

```sql
SELECT signum(-3);
```

```
+-------------------+
| signum(Int64(-3)) |
+-------------------+
| -1                |
+-------------------+
```

***

### **sqrt(x)**

Array Type

SELECT Limitation

Description

#### **Syntax**

```sql
SELECT sqrt(4);
```

```
+----------------+
| sqrt(Int64(4)) |
+----------------+
| 2              |
+----------------+
```

***

### **tan(x)**

Example

SELECT Limitation

**Syntax**

#### **Syntax**

```sql
SELECT tan(1);
```

```
+-------------------+
| tan(Int64(1))     |
+-------------------+
| 1.557407724654902 |
+-------------------+
```

***

### **trunc(x)**

Data type of the column

SELECT Limitation

**Syntax**

#### **Syntax**

```sql
SELECT trunc(-3.9);
```

```
+----------------------+
| trunc(Float64(-3.9)) |
+----------------------+
| -3                   |
+----------------------+
```

***

### **struct**

#### **Syntax**

```
struct(expr1 [, ...] ) 
```

Binary Operator

SELECT Limitation

Other Data Types

***

### Type of permission granted, READ/WRITE/ALL

### **coalesce**

#### **Syntax**

```
coalesce(expr[,...exp])
```

Table typeDescription当检索数据以进行显示时，它通常用于将默认值替换为空值。

```
返回与正则表达式匹配的项
```

Description

#### **Syntax**

```sql
SELECT coalesce(temperature, null, station) FROM air;
```

```
+--------------------------------------------+
| coalesce(air.temperature,NULL,air.station) |
+--------------------------------------------+
| 69.0                                       |
| 78.0                                       |
| 62.0                                       |
| 79.0                                       |
| 53.0                                       |
| 72.0                                       |
| 71.0                                       |
| 69.0                                       |
| 80.0                                       |
| 74.0                                       |
| 70.0                                       |
| 70.0                                       |
| 70.0                                       |
+--------------------------------------------+
```

***

### **nullif**

#### **Syntax**

```
nullif(expr1, expr2) 
```

Schema Definition

Schema Definition

Schema Definition

#### **Syntax**

```sql
SELECT nullif(temperature, 70) FROM air;
```

```
+-----------------------------------+
| nullif(air.temperature,Int64(70)) |
+-----------------------------------+
| 69                                |
| 78                                |
| 62                                |
| 79                                |
| 53                                |
| 72                                |
| 71                                |
| 69                                |
| 80                                |
| 74                                |
|                                   |
|                                   |
|                                   |
+-----------------------------------+
```

***

### `INTERVAL '1 HOUR'` One hour

[//]: # "### **Array**"

[//]: # "    创建数组"

### **ascii**

#### **Syntax**

```
ascii(str) 
```

Describe Table

**Function**:  Return the sine of x.

**Syntax**

#### **Syntax**

```sql
SELECT ascii('abc');
```

```
+------------------+
| ascii(Utf8("a")) |
+------------------+
| 97               |
+------------------+
```

```sql
SELECT ascii('a');
```

```
+------------------+
| ascii(Utf8("a")) |
+------------------+
| 97               |
+------------------+
```

***

### **bit_length**

#### **Syntax**

```
bit_length(str) 
```

Schema Definition

**Function**:  Return the sine of x.

**Syntax**

#### **Syntax**

```sql
SELECT bit_length('abc');
```

```
+------------------------+
| bitlength(Utf8("abc")) |
+------------------------+
| 24                     |
+------------------------+
```

***

### **btrim**

#### **Syntax**

```
btrim(string [, matching_string ] ) 
```

Example

**Function**:  Return the sine of x.

Description

#### **Syntax**

```sql
SELECT btrim('     abc                  ');
```

```
+-------------------------------------------+
| btrim(Utf8("     abc                  ")) |
+-------------------------------------------+
| abc                                       |
+-------------------------------------------+
```

```sql
SELECT btrim('111abc111','1');
```

```
+------------------------------------+
| btrim(Utf8("111abc111"),Utf8("1")) |
+------------------------------------+
| abc                                |
+------------------------------------+
```

***

### **trim**

#### **Syntax**

```
trim(str) 
```

Example

**Function**:  Return the sine of x.

**Function**:  Square root of x.

***

### **char_length | character_length**

#### **Syntax**

```
char_length(expr) 
```

Example

**Function**:  Return the sine of x.

**Syntax**

#### **Syntax**

```sql
SELECT char_length('你好');
```

```
+-------------------------------+
| characterlength(Utf8("你好"))  |
+-------------------------------+
| 2                             |
+-------------------------------+
```

***

### **chr**

#### **Syntax**

```
chr(expr) 
```

Schema definition

Example

Description

#### **Syntax**

```sql
SELECT chr(20005);
```

```
+-------------------+
| chr(Int64(20005)) |
+-------------------+
| 严                |
+-------------------+
```

***

### field type is STRING, only one of （'year', 'quarter', 'month', 'week', 'day', 'doy', 'dow', 'hour', 'minute', 'second'）

#### **Syntax**

```
concat(expr1, expr2 [, ...exp] ) 
```

Schema definition

**Function**:  Return the sine of x.

Description

#### **Syntax**

```sql
SELECT concat('a', 'b', 'c');
```

```
+---------------------------------------+
| concat(Utf8("a"),Utf8("b"),Utf8("c")) |
+---------------------------------------+
| abc                                   |
+---------------------------------------+
```

***

### **concat_ws**

#### **Syntax**

```
concat_ws(sep , expr1 [, ...] ) 
```

Example

**Function**:  Return the sine of x.

**Function**:  Square root of x.

#### **Syntax**

```sql
SELECT concat_ws(' ', 'a', 'b', 'c');
```

```
+--------------------------------------------------------------+
| concatwithseparator(Utf8(" "),Utf8("a"),Utf8("b"),Utf8("c")) |
+--------------------------------------------------------------+
| a b c                                                        |
+--------------------------------------------------------------+
```

***

### **initcap**

#### **Syntax**

```
initcap(expr) 
```

Data Type

**Function**:  Return the sine of x.

**Syntax**

#### **Syntax**

```sql
SELECT initcap('hello world');
```

```
+------------------------------+
| initcap(Utf8("hello world")) |
+------------------------------+
| Hello World                  |
+------------------------------+
```

***

### **left**

#### **Syntax**

```
left(str, len) 
```

Schema Definition

Description

**Function**:  Square root of x.

#### **Syntax**

```sql
SELECT left('abcde', 3);
```

```
+------------------------------+
| left(Utf8("abcde"),Int64(3)) |
+------------------------------+
| abc                          |
+------------------------------+
```

***

### **lpad**

#### **Syntax**

```
lpad(expr, len [, pad] ) 
```

Schema Definition

Description

**Syntax**

Format

#### **Syntax**

```sql
SELECT lpad('abc', 10, '1');
```

```
+---------------------------------------+
| lpad(Utf8("abc"),Int64(10),Utf8("1")) |
+---------------------------------------+
| 1111111abc                            |
+---------------------------------------+
```

***

### **rpad**

#### **Syntax**

```
rpad(expr, len [, pad] ) 
```

Schema Definition

Description

**Function**:  Square root of x.

#### **Syntax**

```sql
SELECT rpad('aaa', 10, 'b');
```

```
+---------------------------------------+
| rpad(Utf8("aaa"),Int64(10),Utf8("b")) |
+---------------------------------------+
| aaabbbbbbb                            |
+---------------------------------------+
```

***

### **lower**

#### **Syntax**

```
lower(expr) 
```

Schema Definition

**Function**:  Return the sine of x.

**Function**:  Square root of x.

#### **Syntax**

```sql
SELECT lower('ABC');
```

```
+--------------------+
| lower(Utf8("ABC")) |
+--------------------+
| abc                |
+--------------------+
```

***

### **upper**

#### **Syntax**

```
upper(expr)
```

Description

**Function**:  Return the sine of x.

**Function**:  Square root of x.

***

### **ltrim**

#### **Syntax**

```
ltrim(str[, trimstr] ) 
```

Description默认trimestr为空白符

**Function**:  Return the sine of x.

**Function**:  Square root of x.

#### **Syntax**

```sql
SELECT ltrim('   abc');
```

```
+-----------------------+
| ltrim(Utf8("   abc")) |
+-----------------------+
| abc                   |
+-----------------------+
```

***

### **md5**

#### **Syntax**

```
md5(expr) 
```

Description

**Function**:  Return the sine of x.

**Function**:  Square root of x.

#### **Syntax**

```sql
SELECT md5('abc');
```

```
+----------------------------------+
| md5(Utf8("abc"))                 |
+----------------------------------+
| 900150983cd24fb0d6963f7d28e17f72 |
+----------------------------------+
```

***

### **octet_length**

#### **Syntax**

```
octet_length(expr) 
```

Boolean Type

**Function**:  Return the sine of x.

**Syntax**

#### **Syntax**

```sql
SELECT octet_length('你好');
```

```
+---------------------------+
| octetlength(Utf8("你好")) |
+---------------------------+
| 6                         |
+---------------------------+
```

***

### **random**

#### **Syntax**

```
random( [seed] ) 
```

Data Types

**Syntax**

**Syntax**

#### **Syntax**

```sql
SELECT random();
```

```
+---------------------+
| random()            |
+---------------------+
| 0.37577771377596325 |
+---------------------+
```

[//]: # "### **Regexp_Replace**"

[//]: # "    regexp_replace(str, regexp, rep [, position] ) "

[//]: # "Data Type"

[//]: # "**Function**:  Return the sine of x."

[//]: # "**Syntax**"

***

### **repeat**

#### **Syntax**

```
repeat(expr, n) 
```

Data Type

!()

**Syntax**

#### **Syntax**

```sql
SELECT repeat('a', 5);
```

```
+----------------------------+
| repeat(Utf8("a"),Int64(5)) |
+----------------------------+
| aaaaa                      |
+----------------------------+
```

***

### **replace**

#### **Syntax**

```
replace(str, search, replace ) 
```

Numeric type

**Function**:  Return the sine of x.

**Syntax**

#### **Syntax**

```sql
SELECT replace('aaa', 'a', 'b');
```

```
+------------------------------------------+
| replace(Utf8("aaa"),Utf8("a"),Utf8("b")) |
+------------------------------------------+
| bbb                                      |
+------------------------------------------+
```

***

### **reverse**

#### **Syntax**

```
reverse(expr) 
```

Data Type

**Function**:  Return the sine of x.

**Syntax**

#### **Syntax**

```sql
SELECT reverse('你好');
```

```
+-----------------------+
| reverse(Utf8("你好")) |
+-----------------------+
| 好你                  |
+-----------------------+
```

***

### **right**

#### **Syntax**

```
right(str, len) 
```

Data Type

**Function**:  Return the sine of x.

**Syntax**

#### **Syntax**

```sql
 SELECT right('aaabbb', 3);
```

```
+--------------------------------+
| right(Utf8("aaabbb"),Int64(3)) |
+--------------------------------+
| bbb                            |
+--------------------------------+
```

***

### **digest**

#### **Syntax**

```
digest(expr, algorithm)
```

Data Type

**con\`\`cat**

**VAR_POP**

**Note**：Function struct is not perfect at present.

#### **Syntax**

```sql
SELECT digest('abc', 'md5');
```

```
+----------------------------------+
| digest(Utf8("abc"),Utf8("md5"))  |
+----------------------------------+
| 900150983cd24fb0d6963f7d28e17f72 |
+----------------------------------+
```

***

### **rtrim**

#### **Syntax**

```
rtrim( str [, trimstr] ) 
```

Data Type

**Function**:  Return the sine of x.

**Function**:  Square root of x.

#### **Syntax**

```sql
SELECT rtrim('aaabbb', 'b');
```

```
+---------------------------------+
| rtrim(Utf8("aaabbb"),Utf8("b")) |
+---------------------------------+
| aaa                             |
+---------------------------------+
```

***

### **sha224**

#### **Syntax**

```
sha224(str)
```

Data Type

**Note**：Function struct is not perfect at present.

**Function**:  Return the sine of x.

#### **Syntax**

```sql
 SELECT sha224('abc');
```

```
+----------------------------------------------------------+
| sha224(Utf8("abc"))                                      |
+----------------------------------------------------------+
| 23097d223405d8228642a477bda255b32aadbce4bda0b3f7e36c9da7 |
+----------------------------------------------------------+
```

***

### **sha256**

#### **Syntax**

```
sha256(str)
```

Example

**Note**：Function struct is not perfect at present.

**Function**:  Return the sine of x.

#### **Syntax**

```sql
SELECT sha256('abc');
```

```
+------------------------------------------------------------------+
| sha256(Utf8("abc"))                                              |
+------------------------------------------------------------------+
| ba7816bf8f01cfea414140de5dae2223b00361a396177a9cb410ff61f20015ad |
+------------------------------------------------------------------+
```

***

### **sha384**

#### **Syntax**

```
sha384(str)
```

Example

**Note**：Function struct is not perfect at present.

**Function**:  Return the sine of x.

#### **Syntax**

```sql
SELECT sha384('abc');
```

```
+--------------------------------------------------------------------------------------------------+
| sha384(Utf8("abc"))                                                                              |
+--------------------------------------------------------------------------------------------------+
| cb00753f45a35e8bb5a03d699ac65007272c32ab0eded1631a8b605a43ff5bed8086072ba1e7cc2358baeca134c825a7 |
+--------------------------------------------------------------------------------------------------+
```

***

### **sha512**

#### **Syntax**

```
sha512(str)
```

Example

**Note**：Function struct is not perfect at present.

**Function**:  Return the sine of x.

***

### **split_part**

#### **Syntax**

```
split_part(str, delim, n) 
```

Example

**MIN**

**Function**:  Square root of x.

#### **Syntax**

```sql
SELECT split_part('abc|def|ghi', '|', 2);
```

```
+---------------------------------------------------+
| splitpart(Utf8("abc|def|ghi"),Utf8("|"),Int64(2)) |
+---------------------------------------------------+
| def                                               |
+---------------------------------------------------+
```

***

### **starts_with**

#### **Syntax**

```
starts_with(expr, startExpr) 
```

Example

**Function**:  Return the sine of x.

**Function**：Capitalize the first letter of each word in the parameter.

#### **Syntax**

```sql
SELECT starts_with('abcdefg', 'abc');
```

```
+-----------------------------------------+
| startswith(Utf8("abcdefg"),Utf8("abc")) |
+-----------------------------------------+
| true                                    |
+-----------------------------------------+
```

***

### **strpos**

#### **Syntax**

```
strpos(str, substr ) 
```

Data Type

**Function**:  Return the sine of x.

**Syntax**

#### **Syntax**

```sql
SELECT strpos('abcdef', 'def');
```

```
+------------------------------------+
| strpos(Utf8("abcdef"),Utf8("def")) |
+------------------------------------+
| 4                                  |
+------------------------------------+
```

***

### **substr**

#### **Syntax**

```
substr(expr, pos [, len] ) 
```

Example

**ARRAY_AGG**

**Function**:  Square root of x.

#### **Syntax**

```sql
SELECT substr('abcdef', 4, 3);
```

```
+------------------------------------------+
| substr(Utf8("abcdef"),Int64(4),Int64(3)) |
+------------------------------------------+
| def                                      |
+------------------------------------------+
```

***

### **to_hex**

#### **Syntax**

```
to_hex(value)
```

Parameter Description

**Syntax**

**Function**:  Square root of x.

#### **Syntax**

```sql
SELECT to_hex(100);
```

```
+-------------------+
| tohex(Int64(100)) |
+-------------------+
| 64                |
+-------------------+
```

***

### **translate**

#### **Syntax**

```
translate(expr, from, to) 
```

Example

**Function**:  Return the sine of x.

**Function**:  Square root of x.

#### **Syntax**

```sql
SELECT translate('aaabbb', 'bbb', 'ccc');
```

```
+---------------------------------------------------+
| translate(Utf8("aaabbb"),Utf8("bbb"),Utf8("ccc")) |
+---------------------------------------------------+
| aaaccc                                            |
+---------------------------------------------------+
```

***

### Example

### **date_part**

#### **Syntax**

```
date_part(field, expr) 
```

**VAR | VAR_SAMP**

**Function**: x to the y power.

**Common Aggregate Functions**

**Note：**

**Syntax**

#### **Syntax**

```sql
SELECT date_part('hour', TIMESTAMP '2022-11-21T09:18:17');
```

```
+----------------------------------------------------+
| datepart(Utf8("hour"),Utf8("2022-11-21T09:18:17")) |
+----------------------------------------------------+
| 9                                                  |
+----------------------------------------------------+
```

***

### **date_trunc**

#### **Syntax**

```
date_trunc(field, expr) 
```

**DESCRIBE**

**Complex Grouping Operation**

**Drop Table**

#### **Syntax**

```sql
SELECT date_trunc('month', TIMESTAMP '2022-11-21T09:18:17');
```

```
+------------------------------------------------------+
| datetrunc(Utf8("month"),Utf8("2022-11-21T09:18:17")) |
+------------------------------------------------------+
| 2022-11-01T00:00:00                                  |
+------------------------------------------------------+
```

***

### **date_bin**

#### **Syntax**

```
date_bin(interval, source, origin)
```

**功能**：从origin开始，按interval切分bucket，返回source所在的bucket timestamp

**Function**: x to the y power.

**Create the database**

**Approximate Aggregate Functions**

**Alter Database Parameters**

#### **Syntax**

```sql
SELECT date_bin(INTERVAL '1' DAY, TIMESTAMP '2022-11-21T09:10:24', TIMESTAMP '2022-11-01T00:00:00');
```

```
+------------------------------------------------------------------------------------------------+
| datebin(IntervalDayTime("4294967296"),Utf8("2022-11-21T09:10:24"),Utf8("2022-11-01T00:00:00")) |
+------------------------------------------------------------------------------------------------+
| 2022-11-21T00:00:00                                                                            |
+------------------------------------------------------------------------------------------------+
```

***

### **to_timestamp**

#### **Syntax**

```
to_timestamp(expr) 
```

**STDDEV | STDDEV_SAMP**

**Function**:  Return the cosine of x.

**Join Clause**

#### **Syntax**

```sql
SELECT to_timestamp('1970-01-01T00:00:00');
```

```
+------------------------------------------+
| totimestamp(Utf8("1970-01-01T00:00:00")) |
+------------------------------------------+
| 1970-01-01T00:00:00                      |
+------------------------------------------+
```

```sql
SELECT to_timestamp(1);
```

```
+-------------------------------+
| totimestamp(Int64(1))         |
+-------------------------------+
| 1970-01-01T00:00:00.000000001 |
+-------------------------------+
```

***

### **to_timestamp_millis**

#### **Syntax**

```
to_timestamp_millis(expr) 
```

### **Regexp_Match**

**SUM**

**WITH Clause**

#### **Syntax**

```sql
SELECT to_timestamp_millis('1970-01-01T00:00:00.00301');
```

```
+------------------------------------------------------+
| totimestampmillis(Utf8("1970-01-01T00:00:00.00301")) |
+------------------------------------------------------+
| 1970-01-01T00:00:00.003                              |
+------------------------------------------------------+
```

```sql
SELECT to_timestamp_millis(1);
```

```
+-----------------------------+
| totimestampmillis(Int64(1)) |
+-----------------------------+
| 1970-01-01T00:00:00.001     |
+-----------------------------+
```

***

### **to_timestamp_micros**

#### **Syntax**

```
to_timestamp_micros(expr) 
```

**EXPLAIN**

**Use Database**

**UNION Clause**

#### **Syntax**

```sql
SELECT to_timestamp_micros(1)
```

```
+-----------------------------+
| totimestampmicros(Int64(1)) |
+-----------------------------+
| 1970-01-01T00:00:00.000001  |
+-----------------------------+
```

***

### **to_timestamp_seconds**

#### **Syntax**

```
to_timestamp_seconds(expr) 
```

**Parameter Type**：expr type is any type, number type is BIGINT.

**Use Database**

**Note**

#### **Syntax**

```
SELECT to_timestamp_seconds(1);
```

```
+------------------------------+
| totimestampseconds(Int64(1)) |
+------------------------------+
| 1970-01-01T00:00:01          |
+------------------------------+
```

***

### **from_unixtime**

#### **Syntax**

```
from_unixtime(unixTime) 
```

**Describe Database Parameters**

**Return Type**：Consistent with expr.

**Statistical Aggregate Functions**

#### **Syntax**

```
SELECT from_unixtime(1);
```

```
+------------------------+
| fromunixtime(Int64(1)) |
+------------------------+
| 1970-01-01T00:00:01    |
+------------------------+
```

***

### **now**

#### **Syntax**

```
now()
```

**Parameter Type**：expr type is any type.

**Alter Database Parameters**

#### **Syntax**

```
SELECT now();
```

```
+----------------------------------+
| now()                            |
+----------------------------------+
| 2022-11-21T04:44:19.742107+00:00 |
+----------------------------------+
```

### **time_window**

#### **Syntax**

```sql
time_window(time_expr, window_duration [, slide_duration])
```

**SHOW**

**Show All Databases**

**PARTITION BY Clause**

**Return Type** BIGINT

```sql
start, end
time, time_column + window_duration
time - slide_duration, time + window_duration - slide_duration
time - 2 * slide_duration, time + window_duration - 2 * slide_duration
...
time - n * slide_duration, time + window_duration - n * slide_duration
```

**Return Type：**：Numeric type

#### **Syntax**

```sql
CREATE TABLE test(a BIGINT, TAGS(b));
INSERT INTO test(time, a, b) VALUES ('2023-04-23T00:00:00.000000Z', 1, 'b');
SELECT time FROM test;
```

```
+---------------------+
| time                |
+---------------------+
| 2023-04-23T00:00:00 |
+---------------------+
```

```sql
SELECT time_window(time, interval '3 day') FROM test;
```

```
+---------------------------------------------------------------------+
| TIME_WINDOW(test.time,IntervalMonthDayNano("55340232221128654848")) |
+---------------------------------------------------------------------+
| {start: 2023-04-23T00:00:00, end: 2023-04-26T00:00:00}              |
+---------------------------------------------------------------------+
```

```sql
SELECT time_window(time, interval '5 day', interval '3 day') FROM test;
```

```
+------------------------------------------------------------------------------------------------------------------+
| TIME_WINDOW(test.time,IntervalMonthDayNano("92233720368547758080"),IntervalMonthDayNano("55340232221128654848")) |
+------------------------------------------------------------------------------------------------------------------+
| {start: 2023-04-23T00:00:00, end: 2023-04-28T00:00:00}                                                           |
| {start: 2023-04-20T00:00:00, end: 2023-04-25T00:00:00}                                                           |
+------------------------------------------------------------------------------------------------------------------+
```

### 空间函数

CnosDB 提供了 ST_Geometry SQL 系列的空间函数，关于Geometry类型，请查看[Geometry](#geometry)数据类型一节

#### ST_AsBinary

```
ST_AsBinary(geometry)
```

把Geometry类型转为WKB格式二进制

**Parameter Type**：expr type is any type.

Example

Example

Parameters Description

```sql
SELECT ST_AsBinary('POINT(0 3)');
```

```
+--------------------------------------------+
| st_AsBinary(Utf8("POINT(0 3)"))            |
+--------------------------------------------+
| 010100000000000000000000000000000000000840 |
+--------------------------------------------+
```

#### ST_GeomFromWKB

```
ST_GeomFromWKB(wkb)
```

Syntax

Example

`INTERVAL '1'` One second

The database to which the vnode belongs

```sql
SELECT ST_GeomFromWKB(ST_AsBinary('POINT(0 3)'))
```

```
+-------------------------------------------------+
| st_GeomFromWKB(st_AsBinary(Utf8("POINT(0 3)"))) |
+-------------------------------------------------+
| POINT(0 3)                                      |
+-------------------------------------------------+
```

#### ST_Distance

```
ST_Distance(geometry1, gemometry2)
```

Syntax

Example

Syntax

**示例**：
两点间距离

```sql
SELECT ST_Distance('POINT(0 0)', 'LINESTRING (30 10, 10 30, 40 40)');
```

```
+----------------------------------------------------+
| st_distance(Utf8("POINT(1 0)"),Utf8("POINT(0 0)")) |
+----------------------------------------------------+
| 1.0                                                |
+----------------------------------------------------+
```

expr type is TIMESTAMP.

```sql
SELECT ST_Distance('POINT(0 0)', 'LINESTRING (30 10, 10 30, 40 40)');
```

```
+--------------------------------------------------------------------------+
| st_distance(Utf8("POINT(0 0)"),Utf8("LINESTRING (30 10, 10 30, 40 40)")) |
+--------------------------------------------------------------------------+
| 28.284271247461902                                                       |
+--------------------------------------------------------------------------+
```

**Return Type**: Timestamp

```sql
SELECT ST_Distance('POLYGON((0 2,1 1,0 -1,0 2))', 'POLYGON((-1 -3,-2 -1,0 -3,-1 -3))');
```

```
+--------------------------------------------------------------------------------------------+
| st_distance(Utf8("POLYGON((0 2,1 1,0 -1,0 2))"),Utf8("POLYGON((-1 -3,-2 -1,0 -3,-1 -3))")) |
+--------------------------------------------------------------------------------------------+
| 1.4142135623730951                                                                         |
+--------------------------------------------------------------------------------------------+
```

#### ST_Area

```
ST_Area(geometry)
```

Syntax面积单位与用于表示输入几何体坐标的单位相同。
对于点、线串、多点和多线串，此函数返回 0。
对于几何体集合，它返回集合中几何体的面积之和。

-ts: Timestamp

Syntax

The database to which the vnode belongs

```sql
SELECT ST_Area('POLYGON ((40 40, 20 45, 45 30, 40 40))');
```

+---------------------------------------------------------+
\| st_Area(Utf8("POLYGON ((40 40, 20 45, 45 30, 40 40))")) |
+---------------------------------------------------------+
\| 87.5 |
+---------------------------------------------------------+

### Data Type

#### **Syntax**

```sql
**Examples：**
```

#### Example

#### **Return Type**： DOUBLE

| **Return Type**：TIMESTAMP         |
| --------------------------------- |
| DENSE_RANK   |
| PERCENT_RANK |
| RANK                              |
| ROW_NUMBER   |

**Parameter Type**：Numeric type

其中 `RANK`, `DENSE_RANK`, `ROW_NUMBER` 指定window_frame 无效

#### **Return Type**：BINARY

详见[聚合函数](./sql.md#聚合函数)

#### **Return Type**：BINARY

| **Return Type**：TIMESTAMP      |
| ------------------------------ |
| CUME_DIST |
| LAG                            |
| LEAD                           |
| NTH_VALUE |

#### Data Type

**Return Type**：BOOLEAN

#### Data Type

**Examples**

#### Data Type

**Return Type**：DOUBLE

**Example**

**Example：**

- **Example**
- **Syntax**
- **Syntax**
- **Syntax**
- **Example**

#### **Parameter Type**：Any type

- **Return Type**：BINARY
- **Return type**：ARRAY

## Data Type

**Return Type**：BINARY

### **ROW_NUMBER**

#### **Syntax**

```
ROW_NUMBER() OVER([partition_clause] [orderby_clause])
```

**Return Type**：BINARY

**Syntax**

**Syntax**

#### **Syntax**

```sql
SELECT temperature, station, 
       ROW_NUMBER() OVER (PARTITION BY station) 
FROM air;
```

```
+-------------+-------------+--------------+
| temperature | station     | ROW_NUMBER() |
+-------------+-------------+--------------+
| 69          | LianYunGang | 1            |
| 80          | LianYunGang | 2            |
| 74          | LianYunGang | 3            |
| 70          | LianYunGang | 4            |
| 70          | LianYunGang | 5            |
| 70          | LianYunGang | 6            |
| 69          | XiaoMaiDao  | 1            |
| 78          | XiaoMaiDao  | 2            |
| 62          | XiaoMaiDao  | 3            |
| 79          | XiaoMaiDao  | 4            |
| 53          | XiaoMaiDao  | 5            |
| 72          | XiaoMaiDao  | 6            |
| 71          | XiaoMaiDao  | 7            |
+-------------+-------------+--------------+
```

***

### **RANK**

#### **Syntax**

```
RANK() OVER([partition_clause] [orderby_clause])
```

**Example**

**Syntax**

**Syntax**

#### **Syntax**

```sql
SELECT station, temperature, 
       RANK() OVER (PARTITION BY station ORDER BY temperature) 
FROM air;
```

```
+-------------+-------------+--------+
| station     | temperature | RANK() |
+-------------+-------------+--------+
| LianYunGang | 69          | 1      |
| LianYunGang | 70          | 2      |
| LianYunGang | 70          | 2      |
| LianYunGang | 70          | 2      |
| LianYunGang | 74          | 5      |
| LianYunGang | 80          | 6      |
| XiaoMaiDao  | 53          | 1      |
| XiaoMaiDao  | 62          | 2      |
| XiaoMaiDao  | 69          | 3      |
| XiaoMaiDao  | 71          | 4      |
| XiaoMaiDao  | 72          | 5      |
| XiaoMaiDao  | 78          | 6      |
| XiaoMaiDao  | 79          | 7      |
+-------------+-------------+--------+
```

***

### **DENSE_RANK**

#### **Syntax**

```
DENSE_RANK() OVER([partition_clause] [orderby_clause])
```

**Syntax**

**Syntax**

**Syntax**

#### **Syntax**

```sql
SELECT station, temperature, 
       DENSE_RANK() OVER (PARTITION BY station ORDER BY temperature) 
FROM air;
```

```
+-------------+-------------+--------------+
| station     | temperature | DENSE_RANK() |
+-------------+-------------+--------------+
| LianYunGang | 69          | 1            |
| LianYunGang | 70          | 2            |
| LianYunGang | 70          | 2            |
| LianYunGang | 70          | 2            |
| LianYunGang | 74          | 3            |
| LianYunGang | 80          | 4            |
| XiaoMaiDao  | 53          | 1            |
| XiaoMaiDao  | 62          | 2            |
| XiaoMaiDao  | 69          | 3            |
| XiaoMaiDao  | 71          | 4            |
| XiaoMaiDao  | 72          | 5            |
| XiaoMaiDao  | 78          | 6            |
| XiaoMaiDao  | 79          | 7            |
+-------------+-------------+--------------+
```

***

### **PERCENT_RANK**

#### **Syntax**

```
PERCENT_RANK() OVER([partition_clause] [orderby_clause])
```

Example

**Syntax**

**Syntax**

#### **Syntax**

```sql
 SELECT station, temperature, 
        PERCENT_RANK() OVER (PARTITION BY station ORDER BY temperature) 
 FROM air;
```

```
+-------------+-------------+---------------------+
| station     | temperature | PERCENT_RANK()      |
+-------------+-------------+---------------------+
| LianYunGang | 69          | 0                   |
| LianYunGang | 70          | 0.2                 |
| LianYunGang | 70          | 0.2                 |
| LianYunGang | 70          | 0.2                 |
| LianYunGang | 74          | 0.8                 |
| LianYunGang | 80          | 1                   |
| XiaoMaiDao  | 53          | 0                   |
| XiaoMaiDao  | 62          | 0.16666666666666666 |
| XiaoMaiDao  | 69          | 0.3333333333333333  |
| XiaoMaiDao  | 71          | 0.5                 |
| XiaoMaiDao  | 72          | 0.6666666666666666  |
| XiaoMaiDao  | 78          | 0.8333333333333334  |
| XiaoMaiDao  | 79          | 1                   |
+-------------+-------------+---------------------+
```

***

### **CUME_DIST**

#### **Syntax**

```
CUME_DIST() OVER ([partition_clause] [orderby_clause])
```

**Numeric type**：DOUBLE

**Syntax**

**Syntax**

#### **Syntax**

```sql
SELECT station, temperature, 
       CUME_DIST() OVER (PARTITION BY station ORDER BY temperature) 
FROM air;
```

```
+-------------+-------------+---------------------+
| station     | temperature | CUME_DIST()         |
+-------------+-------------+---------------------+
| LianYunGang | 69          | 0.16666666666666666 |
| LianYunGang | 70          | 0.6666666666666666  |
| LianYunGang | 70          | 0.6666666666666666  |
| LianYunGang | 70          | 0.6666666666666666  |
| LianYunGang | 74          | 0.8333333333333334  |
| LianYunGang | 80          | 1                   |
| XiaoMaiDao  | 53          | 0.14285714285714285 |
| XiaoMaiDao  | 62          | 0.2857142857142857  |
| XiaoMaiDao  | 69          | 0.42857142857142855 |
| XiaoMaiDao  | 71          | 0.5714285714285714  |
| XiaoMaiDao  | 72          | 0.7142857142857143  |
| XiaoMaiDao  | 78          | 0.8571428571428571  |
| XiaoMaiDao  | 79          | 1                   |
+-------------+-------------+---------------------+
```

[//]: # "----------------"

[//]: #

[//]: # "### **NTILE**"

[//]: #

[//]: # "    ntile(n) over([partition_clause] [order_by_clause])"

[//]: #

[//]: # "**Return Type**：DOUBLE"

[//]: #

[//]: # "**Syntax**"

[//]: #

[//]: # "**Syntax**"

***

### **LAG**

#### **Syntax**

```
lag( expr [, offset [, default] ] ) OVER([partition_clause] orderby_clause)
```

**Example**

**Example**

**Syntax**

**Example**

**Example**

#### **Syntax**

```sql
SELECT station, temperature, 
       LAG(temperature, 2) OVER (PARTITION BY station ORDER BY temperature) 
FROM air;
```

```
+-------------+-------------+-------------------------------+
| station     | temperature | LAG(air.temperature,Int64(2)) |
+-------------+-------------+-------------------------------+
| LianYunGang | 69          |                               |
| LianYunGang | 70          |                               |
| LianYunGang | 70          | 69                            |
| LianYunGang | 70          | 70                            |
| LianYunGang | 74          | 70                            |
| LianYunGang | 80          | 70                            |
| XiaoMaiDao  | 53          |                               |
| XiaoMaiDao  | 62          |                               |
| XiaoMaiDao  | 69          | 53                            |
| XiaoMaiDao  | 71          | 62                            |
| XiaoMaiDao  | 72          | 69                            |
| XiaoMaiDao  | 78          | 71                            |
| XiaoMaiDao  | 79          | 72                            |
+-------------+-------------+-------------------------------+
```

***

### **LEAD**

#### **Syntax**

```
lead(expr [, offset [, default] ] ) OVER ([partition_clause] orderby_clause)
```

**Example**

**Example**

**Syntax**

**Example**

**Example**

#### **Syntax**

```sql
SELECT station, temperature, 
       LEAD(temperature, 2) OVER (PARTITION BY station ORDER BY temperature) 
FROM air;
```

```
+-------------+-------------+--------------------------------+
| station     | temperature | LEAD(air.temperature,Int64(2)) |
+-------------+-------------+--------------------------------+
| LianYunGang | 69          | 70                             |
| LianYunGang | 70          | 70                             |
| LianYunGang | 70          | 74                             |
| LianYunGang | 70          | 80                             |
| LianYunGang | 74          |                                |
| LianYunGang | 80          |                                |
| XiaoMaiDao  | 53          | 69                             |
| XiaoMaiDao  | 62          | 71                             |
| XiaoMaiDao  | 69          | 72                             |
| XiaoMaiDao  | 71          | 78                             |
| XiaoMaiDao  | 72          | 79                             |
| XiaoMaiDao  | 78          |                                |
| XiaoMaiDao  | 79          |                                |
+-------------+-------------+--------------------------------+
```

***

### **FIRST_VALUE**

#### **Syntax**

```
FIRST_VALUE(expr) OVER ([partition_clause] [orderby_clause])
```

Example

**Example**

**Example**

#### **Syntax**

```sql
SELECT station, temperature, 
       FIRST_VALUE(temperature) OVER (PARTITION BY station ORDER BY temperature) 
FROM air;
```

```
+-------------+-------------+------------------------------+
| station     | temperature | FIRST_VALUE(air.temperature) |
+-------------+-------------+------------------------------+
| LianYunGang | 69          | 69                           |
| LianYunGang | 70          | 69                           |
| LianYunGang | 70          | 69                           |
| LianYunGang | 70          | 69                           |
| LianYunGang | 74          | 69                           |
| LianYunGang | 80          | 69                           |
| XiaoMaiDao  | 53          | 53                           |
| XiaoMaiDao  | 62          | 53                           |
| XiaoMaiDao  | 69          | 53                           |
| XiaoMaiDao  | 71          | 53                           |
| XiaoMaiDao  | 72          | 53                           |
| XiaoMaiDao  | 78          | 53                           |
| XiaoMaiDao  | 79          | 53                           |
+-------------+-------------+------------------------------+
```

***

### **LAST_VALUE**

#### **Syntax**

```
LAST_VALUE(expr) OVER ([partition_clause] [orderby_clause])
```

Example

**Example**

**Example**

#### **Syntax**

```sql
SELECT station, temperature, 
       LAST_VALUE(temperature) OVER (PARTITION BY station ORDER BY temperature) 
FROM air;
```

```
+-------------+-------------+-----------------------------+
| station     | temperature | LAST_VALUE(air.temperature) |
+-------------+-------------+-----------------------------+
| LianYunGang | 69          | 69                          |
| LianYunGang | 70          | 70                          |
| LianYunGang | 70          | 70                          |
| LianYunGang | 70          | 70                          |
| LianYunGang | 74          | 74                          |
| LianYunGang | 80          | 80                          |
| XiaoMaiDao  | 53          | 53                          |
| XiaoMaiDao  | 62          | 62                          |
| XiaoMaiDao  | 69          | 69                          |
| XiaoMaiDao  | 71          | 71                          |
| XiaoMaiDao  | 72          | 72                          |
| XiaoMaiDao  | 78          | 78                          |
| XiaoMaiDao  | 79          | 79                          |
+-------------+-------------+-----------------------------+
```

***

### **NTH_VALUE**

#### **Syntax**

```
NTH_VALUE(expr, number) OVER ([partition_clause] [orderby_clause])
```

Example

**Example**

**Example**

#### **Syntax**

```sql
SELECT station, temperature, 
       NTH_VALUE(temperature, 2) OVER (PARTITION BY station ORDER BY temperature) 
FROM air;
```

```
+-------------+-------------+-------------------------------------+
| station     | temperature | NTH_VALUE(air.temperature,Int64(2)) |
+-------------+-------------+-------------------------------------+
| LianYunGang | 69          |                                     |
| LianYunGang | 70          | 70                                  |
| LianYunGang | 70          | 70                                  |
| LianYunGang | 70          | 70                                  |
| LianYunGang | 74          | 70                                  |
| LianYunGang | 80          | 70                                  |
| XiaoMaiDao  | 53          |                                     |
| XiaoMaiDao  | 62          | 62                                  |
| XiaoMaiDao  | 69          | 62                                  |
| XiaoMaiDao  | 71          | 62                                  |
| XiaoMaiDao  | 72          | 62                                  |
| XiaoMaiDao  | 78          | 62                                  |
| XiaoMaiDao  | 79          | 62                                  |
+-------------+-------------+-------------------------------------+
```

## Data Type

### Example

在数据库中，插值是用于处理数据中缺失值的技术。**Syntax**

### **time_window_gapfill**

**Return Type**：STRINGExample

**Example**Data Type

#### **Syntax**

- time_window_gapfill

```sql
time_window_gapfill(<time column>, <window interval>[, <sliding interval>[, <start time>]]): <time window struct>
```

#### **Parameter Type**：Numeric type

- interpolate

**Return Type**：BIGINT**Return Type**：BIGINT

线性插值适用于连续变量的估算，例如在时间序列中填补缺失值或在空间数据中进行插值。然而，线性插值的准确性和适用性取决于数据的特性和实际情况。在某些情况下，数据可能具有非线性关系，或存在其他更适合的插值方法。因此，在应用线性插值之前，需要仔细考虑数据的性质和插值的目的，以确保插值结果合理和准确。

```sql
interpolate(<expr>)
```

- locf

**Example**

**Syntax**具体处理方式如下：

1. **Column Type**：
2. **Example**
3. **Parameter Type**：any type
4. **Example**
5. **Example**

**Syntax**这种方法假设缺失值之后的数据与最后观察到的值相同或非常接近。

**Syntax**Syntax

```sql
locf(<expr>)
```

#### **Syntax**

```sql
**Example**
```

```sql
---- interpolate
SELECT
  t0,
  time_window_gapfill(time, interval '10 milliseconds') as minute,
  interpolate(avg(f1))
from gapfill_db.m2
where time between timestamp '1999-12-31T00:00:00.000Z' and timestamp '1999-12-31T00:00:00.055Z'
group by t0, minute;
```

```
+-------+-------------------------+-----------------------+
| t0    | minute                  | AVG(gapfill_db.m2.f1) |
+-------+-------------------------+-----------------------+
| tag11 | 1999-12-31T00:00:00     | 444.0                 |
| tag11 | 1999-12-31T00:00:00.010 | 499.5                 |
| tag11 | 1999-12-31T00:00:00.020 | 555.0                 |
| tag11 | 1999-12-31T00:00:00.030 |                       |
| tag11 | 1999-12-31T00:00:00.040 |                       |
| tag11 | 1999-12-31T00:00:00.050 |                       |
| tag12 | 1999-12-31T00:00:00     | 333.0                 |
| tag12 | 1999-12-31T00:00:00.010 | 388.5                 |
| tag12 | 1999-12-31T00:00:00.020 | 444.0                 |
| tag12 | 1999-12-31T00:00:00.030 |                       |
| tag12 | 1999-12-31T00:00:00.040 |                       |
| tag12 | 1999-12-31T00:00:00.050 |                       |
| tag13 | 1999-12-31T00:00:00     |                       |
| tag13 | 1999-12-31T00:00:00.010 | 222.0                 |
| tag13 | 1999-12-31T00:00:00.020 | 277.5                 |
| tag13 | 1999-12-31T00:00:00.030 | 333.0                 |
| tag13 | 1999-12-31T00:00:00.040 |                       |
| tag13 | 1999-12-31T00:00:00.050 |                       |
| tag14 | 1999-12-31T00:00:00     |                       |
| tag14 | 1999-12-31T00:00:00.010 | 111.0                 |
| tag14 | 1999-12-31T00:00:00.020 | 166.5                 |
| tag14 | 1999-12-31T00:00:00.030 | 222.0                 |
| tag14 | 1999-12-31T00:00:00.040 |                       |
| tag14 | 1999-12-31T00:00:00.050 |                       |
+-------+-------------------------+-----------------------+
```

```sql
---- locf
SELECT
  t0,
  time_window_gapfill(time, interval '10 milliseconds') as minute,
  locf(avg(f1))
from gapfill_db.m2
where time between timestamp '1999-12-31T00:00:00.000Z' and timestamp '1999-12-31T00:00:00.055Z'
group by t0, minute;
```

```
+-------+-------------------------+-----------------------+
| t0    | minute                  | AVG(gapfill_db.m2.f1) |
+-------+-------------------------+-----------------------+
| tag11 | 1999-12-31T00:00:00     | 444.0                 |
| tag11 | 1999-12-31T00:00:00.010 | 444.0                 |
| tag11 | 1999-12-31T00:00:00.020 | 555.0                 |
| tag11 | 1999-12-31T00:00:00.030 | 555.0                 |
| tag11 | 1999-12-31T00:00:00.040 | 555.0                 |
| tag11 | 1999-12-31T00:00:00.050 | 555.0                 |
| tag12 | 1999-12-31T00:00:00     | 333.0                 |
| tag12 | 1999-12-31T00:00:00.010 | 333.0                 |
| tag12 | 1999-12-31T00:00:00.020 | 444.0                 |
| tag12 | 1999-12-31T00:00:00.030 | 444.0                 |
| tag12 | 1999-12-31T00:00:00.040 | 444.0                 |
| tag12 | 1999-12-31T00:00:00.050 | 444.0                 |
| tag13 | 1999-12-31T00:00:00     |                       |
| tag13 | 1999-12-31T00:00:00.010 | 222.0                 |
| tag13 | 1999-12-31T00:00:00.020 | 222.0                 |
| tag13 | 1999-12-31T00:00:00.030 | 333.0                 |
| tag13 | 1999-12-31T00:00:00.040 | 333.0                 |
| tag13 | 1999-12-31T00:00:00.050 | 333.0                 |
| tag14 | 1999-12-31T00:00:00     |                       |
| tag14 | 1999-12-31T00:00:00.010 | 111.0                 |
| tag14 | 1999-12-31T00:00:00.020 | 111.0                 |
| tag14 | 1999-12-31T00:00:00.030 | 222.0                 |
| tag14 | 1999-12-31T00:00:00.040 | 222.0                 |
| tag14 | 1999-12-31T00:00:00.050 | 222.0                 |
+-------+-------------------------+-----------------------+
```

## **空间函数**

### **ST_AsBinary**

#### **Syntax**

```
ST_AsBinary( geom )
```

Example

**参数类型**：geom 为 Geometry 类型。

**返回类型**：Binary 类型。

#### **Syntax**

```sql
SELECT ST_AsBinary('POINT(1 2)');
```

```
+--------------------------------------------+
| st_AsBinary(Utf8("POINT(1 2)"))            |
+--------------------------------------------+
| 0101000000000000000000f03f0000000000000040 |
+--------------------------------------------+
```

### **ST_GeomFromWKB**

#### **Syntax**

```
ST_GeomFromWKB( wkb )
```

**功能**：将 WKB 转换为 Geometry 类型。

**参数类型**：wkb 为 Binary 类型。

**返回类型**：Geometry 类型。

#### **Syntax**

```sql
select ST_GeomFromWKB(st_AsBinary('MULTIPOLYGON (((30 20, 45 40, 10 40, 30 20)),((15 5, 40 10, 10 20, 5 10, 15 5)))'));
```

```
+-----------------------------------------------------------------------------------------------------------------------+
| st_GeomFromWKB(st_AsBinary(Utf8("MULTIPOLYGON (((30 20, 45 40, 10 40, 30 20)),((15 5, 40 10, 10 20, 5 10, 15 5)))"))) |
+-----------------------------------------------------------------------------------------------------------------------+
| MULTIPOLYGON(((30 20,45 40,10 40,30 20)),((15 5,40 10,10 20,5 10,15 5)))                                              |
+-----------------------------------------------------------------------------------------------------------------------+
```

### **ST_Distance**

#### **Syntax**

```
ST_Distance( geom1, geom2 )
```

**功能**：计算两个集合对象的欧式距离。

**参数类型**：geom1 和 geom2 为 Geometry 类型。

**返回类型**：Double 类型。

#### **Syntax**

```sql
select st_distance('POINT(0 0)', 'POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))');
```

```
+---------------------------------------------------------------------------------------+
| st_distance(Utf8("POINT(0 0)"),Utf8("POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))")) |
+---------------------------------------------------------------------------------------+
| 22.360679774997898                                                                    |
+---------------------------------------------------------------------------------------+
```

### **ST_Area**

#### **Syntax**

```
ST_Area( geom )
```

**功能**：计算几何体的面积。

**参数类型**：geom Geometry 类型。

**返回类型**：Double 类型。

#### **Syntax**

```sql
select st_area('POLYGON((0 0,0 1,1 1,1 0,0 0))');
```

```
+-------------------------------------------------+
| st_Area(Utf8("POLYGON((0 0,0 1,1 1,1 0,0 0))")) |
+-------------------------------------------------+
| 1.0                                             |
+-------------------------------------------------+
```

> **GROUP BY Clause**
> 如果参数内容格式非法，返回值为 NULL。

## Numeric type expressions add

**Return Type**: STRING

**Syntax**

- CLUSTER_SCHEMA 关于数据库集群
- **Parameter Type**：

### **CLUSTER_SCHEMA**

**Example**

**Return Type**: STRING

### **TENANTS**

**Return Type**：DOUBLE

#### **Example**

| **Example**                         | **Syntax** | NAME                      |
| ----------------------------------- | ---------- | ------------------------- |
| TENANT_NAME    | STRING     | **Parameter Type**：STRING |
| TENANT_OPTIONS | STRING     | **Example**               |

#### **Syntax**

```sql
SELECT * FROM cluster_schema.tenants;
```

```
+-------------+---------------------------------------------------+
| tenant_name | tenant_options                                    |
+-------------+---------------------------------------------------+
| cnosdb      | {"comment":"system tenant","limiter_config":null} |
+-------------+---------------------------------------------------+
```

### **USERS**

#### **Example**

**Syntax**

| **Example**                       | **Syntax** | NAME                   |
| --------------------------------- | ---------- | ---------------------- |
| USER_NAME    | STRING     | Name                   |
| IS_ADMIN     | BOOLEAN    | **Return Type**：STRING |
| USER_OPTIONS | STRING     | **Example**            |

#### **Syntax**

```sql
SELECT * FROM cluster_schema.users;
```

```
+-----------+----------+-------------------------------------------------------------------------------------------------+
| user_name | is_admin | user_options                                                                                    |
+-----------+----------+-------------------------------------------------------------------------------------------------+
| root      | true     | {"password":"*****","must_change_password":true,"rsa_public_key":null,"comment":"system admin"} |
+-----------+----------+-------------------------------------------------------------------------------------------------+
```

### **INFORMATION_SCHEMA**

**Return Type**：DOUBLE

### DATABASES

**Return Type**：DOUBLE

#### **Example**

| **Return Type**：BIGINT              | **Syntax**      | NAME                    |
| ----------------------------------- | --------------- | ----------------------- |
| TENANT_NAME    | STRING          | **Parameter Type**：None |
| DATABASE_NAME  | STRING          | **Return Type**：BIGINT  |
| TTL                                 | STRING          | **Return Type**：BIGINT  |
| SHARD                               | BIGINT UNSIGNED | 表示数据分片个数                |
| VNODE_DURATION | STRING          | **Parameter Type**：None |
| PREPLICA                            | BIGINT UNSIGNED | 表示数据在集群中的副本数            |
| PERCISION                           | STRING          | 表示数据库的时间精度              |

#### **Syntax**

```sql
SELECT * FROM information_schema.databases;
```

```
+-------------+---------------+----------+-------+----------------+---------+-----------+
| tenant_name | database_name | ttl      | shard | vnode_duration | replica | percision |
+-------------+---------------+----------+-------+----------------+---------+-----------+
| cnosdb      | public        | 365 Days | 1     | 365 Days       | 1       | NS        |
+-------------+---------------+----------+-------+----------------+---------+-----------+
```

### TABLES

**Parameter Type**：None

#### **Example**

| **Return Type**：BIGINT              | **Syntax** | NAME                      |
| ----------------------------------- | ---------- | ------------------------- |
| TABLE_TENANT   | STRING     | 表所属的租户                    |
| TABLE_DATABASE | STRING     | **Return Type**：BIGINT    |
| TABLE_NAME     | STRING     | **Parameter Type**：STRING |
| TABLE_TYPE     | STRING     | 表是基础表，还是视图                |
| TABLE_ENGINE   | STRING     | **Return Type**：STRING    |
| TABLE_OPTION   | STRING     | **Example**               |

#### **Syntax**

```sql
SELECT * FROM information_schema.tables;
```

```
+--------------+----------------+------------+------------+--------------+---------------+
| table_tenant | table_database | table_name | table_type | table_engine | table_options |
+--------------+----------------+------------+------------+--------------+---------------+
| cnosdb       | public         | wind       | BASE TABLE | TSKV         | TODO          |
| cnosdb       | public         | air        | BASE TABLE | TSKV         | TODO          |
| cnosdb       | public         | sea        | BASE TABLE | TSKV         | TODO          |
+--------------+----------------+------------+------------+--------------+---------------+
```

### COLUMNS

**Return Type**：BIGINT

#### **Example**

| **Return Type**：BIGINT                 | **Syntax** | NAME                      |
| -------------------------------------- | ---------- | ------------------------- |
| TABLE_TENANT      | STRING     | 表所属的租户                    |
| TABLE_DATABASE    | STRING     | **Return Type**：BIGINT    |
| TABLE_NAME        | STRING     | **Parameter Type**：STRING |
| COLUMN_NAME       | STRING     | **Return Type**：BIGINT    |
| ORDINAL_POSITION  | STRING     | **Parameter Type**：STRING |
| COLUMN_TYPE       | STRING     | **Example**               |
| IS_NULLABLE       | STRING     | **Example**               |
| DATA_TYPE         | STRING     | **Example**               |
| COMPRESSION_CODEC | STRING     | **Return Type**：BIGINT    |

#### **Syntax**

```sql
SELECT * FROM information_schema.columns;
```

```
+-------------+---------------+------------+-------------+-------------+------------------+----------------+-------------+-----------+-------------------+
| tenant_name | database_name | table_name | column_name | column_type | ordinal_position | column_default | is_nullable | data_type | compression_codec |
+-------------+---------------+------------+-------------+-------------+------------------+----------------+-------------+-----------+-------------------+
| cnosdb      | public        | wind       | time        | TIME        | 0                | NULL           | false       | TIMESTAMP | DEFAULT           |
| cnosdb      | public        | wind       | station     | TAG         | 1                | NULL           | true        | STRING    | DEFAULT           |
| cnosdb      | public        | wind       | speed       | FIELD       | 2                | NULL           | true        | DOUBLE    | DEFAULT           |
| cnosdb      | public        | wind       | direction   | FIELD       | 3                | NULL           | true        | DOUBLE    | DEFAULT           |
| cnosdb      | public        | air        | time        | TIME        | 0                | NULL           | false       | TIMESTAMP | DEFAULT           |
| cnosdb      | public        | air        | station     | TAG         | 1                | NULL           | true        | STRING    | DEFAULT           |
| cnosdb      | public        | air        | visibility  | FIELD       | 2                | NULL           | true        | DOUBLE    | DEFAULT           |
| cnosdb      | public        | air        | temperature | FIELD       | 3                | NULL           | true        | DOUBLE    | DEFAULT           |
| cnosdb      | public        | air        | pressure    | FIELD       | 4                | NULL           | true        | DOUBLE    | DEFAULT           |
| cnosdb      | public        | sea        | time        | TIME        | 0                | NULL           | false       | TIMESTAMP | DEFAULT           |
| cnosdb      | public        | sea        | station     | TAG         | 1                | NULL           | true        | STRING    | DEFAULT           |
| cnosdb      | public        | sea        | temperature | FIELD       | 2                | NULL           | true        | DOUBLE    | DEFAULT           |
+-------------+---------------+------------+-------------+-------------+------------------+----------------+-------------+-----------+-------------------+
```

### ENABLED_ROLES

**Return Type**：DOUBLE

#### **Example**

| **Example**                    | **Syntax** | NAME                      |
| ------------------------------ | ---------- | ------------------------- |
| ROLE_NAME | STRING     | **Parameter Type**：STRING |

#### **Syntax**

```sql
SELECT * FROM information_schema.enabled_roles;
```

```
+-----------+
| role_name |
+-----------+
| owner     |
+-----------+
```

### ROLES

**Return Type**：STRING
此视图只对当前租户的Owner可见。

#### **Example**

| **Example**                       | **Syntax** | NAME                      |
| --------------------------------- | ---------- | ------------------------- |
| ROLE_NAME    | STRING     | **Parameter Type**：STRING |
| ROLE_TYPE    | STRING     | **Example**               |
| INHERIT_ROLE | STRING     | **Example**               |

#### **Syntax**

```sql
SELECT * FROM information_schema.roles;
```

```
+-----------+-----------+--------------+
| role_name | role_type | inherit_role |
+-----------+-----------+--------------+
| owner     | system    |              |
| member    | system    |              |
+-----------+-----------+--------------+
```

### DATABASE_PRIVILEGES

#### **Example**

**Return Type**：STRING
**Parameter Type**：STRING
**Return Type**：DOUBLE

| **Example**                         | **Syntax** | NAME        |
| ----------------------------------- | ---------- | ----------- |
| TENANT_NAME    | STRING     | **Example** |
| DATABASE_NAME  | STRING     | **Example** |
| PRIVILEGE_TYPE | STRING     | **Syntax**  |
| ROLE_NAME      | STRING     | **Example** |

#### **Syntax**

```sql
CREATE ROLE rrr INHERIT member;
GRANT READ ON DATABASE air TO ROLE rrr;
SELECT * FROM information_schema.database_privileges;
```

```
+-------------+---------------+----------------+-----------+
| tenant_name | database_name | privilege_type | role_name |
+-------------+---------------+----------------+-----------+
| cnosdb      | air           | Read           | rrr       |
+-------------+---------------+----------------+-----------+
```

### MEMBERS

**Return Type**：DOUBLE

**Return Type**：DOUBLE

#### **Example**

| **Example**                    | **Syntax** | NAME                   |
| ------------------------------ | ---------- | ---------------------- |
| USER_NAME | STRING     | **Return Type**：STRING |
| ROLE_NAME | STRING     | **Return Type**：STRING |

#### **Syntax**

```sql
SELECT * FROM information_schema.members;
```

```
+-----------+-----------+
| user_name | role_name |
+-----------+-----------+
| root      | owner     |
+-----------+-----------+
```

### QUERIES

**Return Type**：DOUBLE

**Return Type**：DOUBLE

**Return Type**：DOUBLE

#### **Example**

| **Example**                      | **Syntax**      | NAME                      |
| -------------------------------- | --------------- | ------------------------- |
| QUERY_ID    | STRING          | **Return Type**：STRING    |
| QUERY_TEXT  | STRING          | **Return Type**：STRING    |
| USER_ID     | STRING          | **Parameter Type**：STRING |
| USER_NAME   | STRING          | **Example**               |
| TENANT_ID   | STRING          | **Return Type**：STRING    |
| TENANT_NAME | STRING          | **Parameter Type**：STRING |
| STATE                            | STRING          | **Example**               |
| DURATION                         | BIGINT UNSIGNED | **Parameter Type**：STRING |

#### **Syntax**

```sql
SELECT * FROM information_schema.queries;
```

```
+----------+------------------------------------------------------------------+-----------------------------------------+-----------+----------------------------------------+-------------+------------+--------------+
| query_id | query_text                                                       | user_id                                 | user_name | tenant_id                              | tenant_name | state      | duration     |
+----------+------------------------------------------------------------------+-----------------------------------------+-----------+----------------------------------------+-------------+------------+--------------+
| 36       | select * FROM air join sea ON air.temperature = sea.temperature; | 108709109615072923019194003831375742761 | root      | 13215126763611749424716665303609634152 | cnosdb      | SCHEDULING | 12.693345666 |
+----------+------------------------------------------------------------------+-----------------------------------------+-----------+----------------------------------------+-------------+------------+--------------+
```

#### SHOW QUERIES

Data Type

#### **Syntax**

```sql
SHOW QUERIES;
```

```
+----------+------------------------------------------------------------------+-----------------------------------------+-----------+----------------------------------------+-------------+------------+--------------+
| query_id | query_text                                                       | user_id                                 | user_name | tenant_id                              | tenant_name | state      | duration     |
+----------+------------------------------------------------------------------+-----------------------------------------+-----------+----------------------------------------+-------------+------------+--------------+
| 36       | select * FROM air join sea ON air.temperature = sea.temperature; | 108709109615072923019194003831375742761 | root      | 13215126763611749424716665303609634152 | cnosdb      | SCHEDULING | 12.693345666 |
+----------+------------------------------------------------------------------+-----------------------------------------+-----------+----------------------------------------+-------------+------------+--------------+
```

## **USAGE_SCHEMA**

**Example**

**Example**

**Example**

### VNODE_DISK_STORAGE

**Syntax**

#### **Example**

| **Example**                   | **Syntax**      | NAME        |
| ----------------------------- | --------------- | ----------- |
| TIME                          | TIMESTAMP       | Example     |
| DATABASE                      | STRING          | **Example** |
| NODE_ID  | STRING          | **Example** |
| TENANT                        | STRING          | **Example** |
| VNODE_ID | STRING          | **Example** |
| VALUE                         | BIGINT UNSIGNED | **Example** |

Syntax

### HTTP_DATA_IN

Syntax

#### **Example**

| **Example**                  | **Syntax**      | NAME                    |
| ---------------------------- | --------------- | ----------------------- |
| TIME                         | TIMESTAMP       | Example                 |
| DATABASE                     | STRING          | **Example**             |
| NODE_ID | STRING          | **Example**             |
| TENANT                       | STRING          | **Example**             |
| USER                         | STRING          | Name                    |
| HOST                         | STRING          | 服务端口                    |
| API                          | STRING          | **Return Type**: DOUBLE |
| VALUE                        | BIGINT UNSIGNED | **Example**             |

Syntax

## HTTP_DATA_OUT

Syntax

#### **Example**

| **Example**                  | **Syntax**      | NAME                    |
| ---------------------------- | --------------- | ----------------------- |
| TIME                         | TIMESTAMP       | Example                 |
| DATABASE                     | STRING          | **Example**             |
| NODE_ID | STRING          | **Example**             |
| TENANT                       | STRING          | **Example**             |
| USER                         | STRING          | Name                    |
| API                          | STRING          | **Return Type**: DOUBLE |
| HOST                         | STRING          | 服务端口                    |
| VALUE                        | BIGINT UNSIGNED | **Example**             |

Syntax

### HTTP_QUERIES

**Parameter Type**:

#### **Example**

| **Example**                  | **Syntax**      | NAME                    |
| ---------------------------- | --------------- | ----------------------- |
| TIME                         | TIMESTAMP       | Example                 |
| DATABASE                     | STRING          | **Example**             |
| NODE_ID | STRING          | **Example**             |
| TENANT                       | STRING          | **Example**             |
| USER                         | STRING          | Name                    |
| API                          | STRING          | **Return Type**: DOUBLE |
| HOST                         | STRING          | 服务端口                    |
| VALUE                        | BIGINT UNSIGNED | **Example**             |

Syntax

### HTTP_WRITES

**Parameter Type**:

Example

#### **Example**

| **Example**                  | **Syntax**      | NAME                    |
| ---------------------------- | --------------- | ----------------------- |
| TIME                         | TIMESTAMP       | Example                 |
| DATABASE                     | STRING          | **Example**             |
| NODE_ID | STRING          | **Example**             |
| TENANT                       | STRING          | **Example**             |
| USER                         | STRING          | Name                    |
| HOST                         | STRING          | 服务端口                    |
| API                          | STRING          | **Return Type**: DOUBLE |
| VALUE                        | BIGINT UNSIGNED | **Example**             |

Syntax

### COORD_DATA_IN

Syntax

#### **Example**

| **Example** | Therefore, we often use ROLLUP in reports to generate subtotals and totals. The order of columns in ROLLUP is very important. | NAME        |
| ----------- | ----------------------------------------------------------------------------------------------------------------------------- | ----------- |
| Example     | TIMESTAMP                                                                                                                     | Example     |
| Example     | STRING                                                                                                                        | **Example** |
| Example     | STRING                                                                                                                        | **Example** |
| Example     | STRING                                                                                                                        | **Example** |
| Example     | BIGINT UNSIGNED                                                                                                               | Syntax      |

Syntax

### COORD_DATA_OUT

**Return Type**: DOUBLE

#### **Example**

| **Example** | Therefore, we often use ROLLUP in reports to generate subtotals and totals. The order of columns in ROLLUP is very important. | NAME        |
| ----------- | ----------------------------------------------------------------------------------------------------------------------------- | ----------- |
| Example     | TIMESTAMP                                                                                                                     | Example     |
| Example     | STRING                                                                                                                        | **Example** |
| Example     | STRING                                                                                                                        | **Example** |
| Example     | STRING                                                                                                                        | **Example** |
| Example     | BIGINT UNSIGNED                                                                                                               | Syntax      |

Syntax

### COORD_QUERIES

记录通过Coordinator的接受数据次数

#### **Example**

| **Example** | Therefore, we often use ROLLUP in reports to generate subtotals and totals. The order of columns in ROLLUP is very important. | NAME        |
| ----------- | ----------------------------------------------------------------------------------------------------------------------------- | ----------- |
| Example     | TIMESTAMP                                                                                                                     | Example     |
| Example     | STRING                                                                                                                        | **Example** |
| Example     | STRING                                                                                                                        | **Example** |
| Example     | STRING                                                                                                                        | **Example** |
| Example     | BIGINT UNSIGNED                                                                                                               | Syntax      |

Syntax

### COORD_WRITES

Example

#### **Example**

| **Example** | Therefore, we often use ROLLUP in reports to generate subtotals and totals. The order of columns in ROLLUP is very important. | NAME        |
| ----------- | ----------------------------------------------------------------------------------------------------------------------------- | ----------- |
| Example     | TIMESTAMP                                                                                                                     | Example     |
| Example     | STRING                                                                                                                        | **Example** |
| Example     | STRING                                                                                                                        | **Example** |
| Example     | STRING                                                                                                                        | **Example** |
| Example     | BIGINT UNSIGNED                                                                                                               | Syntax      |

Syntax

### **Syntax**

```sql
SELECT * FROM usage_schema.http_data_in ORDER BY time DESC LIMIT 2;
```

```
+----------------------------+--------------+--------------+---------+--------+------+-------+-----------+
| time                       | api          | host         | node_id | tenant | user | value | database  |
+----------------------------+--------------+--------------+---------+--------+------+-------+-----------+
| 2023-10-18T08:41:09.948999 | api/v1/write | 0.0.0.0:8902 | 1001    | cnosdb | root | 144   | sqlancer2 |
| 2023-10-18T08:41:09.948995 | api/v1/write | 0.0.0.0:8902 | 1001    | cnosdb | root | 251   | sqlancer1 |
+----------------------------+--------------+--------------+---------+--------+------+-------+-----------+
```

## Syntax

### **Example**

**Example**

#### **Syntax**

```sql
**Example**
```

**Example**

**Example**

**Example**

#### **Syntax**

Syntax

```sql
CREATE DATABASE oceanic_station;
```

```
\c oceanic_station
```

```
CREATE TABLE air(pressure DOUBLE, temperature DOUBLE, visibility DOUBLE, TAGS(station));
```

**Example**

```sql
CREATE STREAM TABLE air_stream(time TIMESTAMP, station STRING, pressure DOUBLE, temperature DOUBLE, visibility DOUBLE) 
    WITH (db = 'oceanic_station', table = 'air', event_time_column = 'time')
    engine = tskv;
```

### 删除流表

> 与删除普通表语法相同，请参考[删除表](#删除表)

### **Example**

**Example**

**Syntax**

Syntax

**Syntax**

#### **Syntax**

Syntax

**Syntax**

```sql
CREATE TABLE air_down_sampling_1hour(max_pressure DOUBLE, avg_temperature DOUBLE, sum_temperature DOUBLE, count_pressure BIGINT, TAGS(station));
```

**Syntax**

```sql
INSERT INTO air_down_sampling_1hour(time, station, max_pressure, avg_temperature, sum_temperature, count_pressure) 
SELECT 
	date_bin(INTERVAL '1' HOUR, time, TIMESTAMP '2023-01-14T16:00:00') time, 
	station, 
	MAX(pressure) max_pressure, 
	AVG(temperature) avg_temperature, 
	SUM(temperature) sum_temperature, 
	COUNT(pressure) count_pressure 
FROM air_stream 
GROUP BY date_bin(INTERVAL '1' HOUR, time, TIMESTAMP '2023-01-14T16:00:00'), station;
```

**Syntax**

**Syntax**

```sql
\w oceanic_station.txt
```

**Syntax**

```sql
SELECT * FROM air_down_sampling_1hour LIMIT 10;
```

```
+---------------------+------------+--------------+-----------------+-----------------+----------------+
| time                | station    | max_pressure | avg_temperature | sum_temperature | count_pressure |
+---------------------+------------+--------------+-----------------+-----------------+----------------+
| 2023-01-14T16:00:00 | XiaoMaiDao | 80.0         | 68.05           | 1361.0          | 20             |
| 2023-01-14T17:00:00 | XiaoMaiDao | 79.0         | 63.75           | 1275.0          | 20             |
| 2023-01-14T18:00:00 | XiaoMaiDao | 79.0         | 66.35           | 1327.0          | 20             |
| 2023-01-14T19:00:00 | XiaoMaiDao | 78.0         | 68.05           | 1361.0          | 20             |
| 2023-01-14T20:00:00 | XiaoMaiDao | 80.0         | 64.35           | 1287.0          | 20             |
| 2023-01-14T21:00:00 | XiaoMaiDao | 77.0         | 61.05           | 1221.0          | 20             |
| 2023-01-14T22:00:00 | XiaoMaiDao | 80.0         | 64.8            | 1296.0          | 20             |
| 2023-01-14T23:00:00 | XiaoMaiDao | 80.0         | 66.35           | 1327.0          | 20             |
| 2023-01-15T00:00:00 | XiaoMaiDao | 80.0         | 65.15           | 1303.0          | 20             |
| 2023-01-15T01:00:00 | XiaoMaiDao | 80.0         | 69.55           | 1391.0          | 20             |
+---------------------+------------+--------------+-----------------+-----------------+----------------+
```

## **KILL QUERY**

### **Syntax**

```sql
KILL [QUERY] query_id;
```

**Syntax**

## **Syntax**

```sql
SHOW QUERIES;
```

```
+----------+------+------------------------------------------------------------------+------------+----------+
| query_id | user | query                                                            | state      | duration |
+----------+------+------------------------------------------------------------------+------------+----------+
| 4        | root | select * from air join sea on air.temperature = sea.temperature; | SCHEDULING | 2703     |
| 5        | root | show queries;                                                    | SCHEDULING | 0        |
+----------+------+------------------------------------------------------------------+------------+----------+
```

```sql
KILL 4;
```

```
Query took 0.016 seconds.
```
